{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/fujinoyouichi/music-studio-app/src/actions/studio.ts"],"sourcesContent":["\"use server\";\n\nimport {\n    StudioProfile,\n    getAllStudios,\n    getStudioById,\n    saveStudio,\n    createEmptyStudio,\n    deleteStudio\n} from \"@/lib/db-studio\";\nimport { revalidatePath } from \"next/cache\";\n\n// Get All\nexport async function fetchStudios() {\n    return getAllStudios();\n}\n\n// Get One\nexport async function fetchStudio(id: string) {\n    return getStudioById(id);\n}\n\n// Upsert\nexport async function updateStudio(data: StudioProfile) {\n    try {\n        saveStudio(data);\n        revalidatePath(\"/studios\");\n        revalidatePath(`/studios/${data.id}`);\n        return { success: true, message: \"Studio saved successfully.\" };\n    } catch (e: any) {\n        return { success: false, message: e.message };\n    }\n}\n\n// Create New\nexport async function createNewStudioAction() {\n    const newStudio = createEmptyStudio();\n    saveStudio(newStudio);\n    revalidatePath(\"/studios\");\n    return newStudio.id;\n}\n\n// Delete\nexport async function deleteStudioAction(id: string) {\n    deleteStudio(id);\n    revalidatePath(\"/studios\");\n    return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AAQA;;;;;AAGO,eAAe;IAClB,OAAO,IAAA,qKAAa;AACxB;AAGO,eAAe,YAAY,EAAU;IACxC,OAAO,IAAA,qKAAa,EAAC;AACzB;AAGO,eAAe,aAAa,IAAmB;IAClD,IAAI;QACA,IAAA,kKAAU,EAAC;QACX,IAAA,yKAAc,EAAC;QACf,IAAA,yKAAc,EAAC,CAAC,SAAS,EAAE,KAAK,EAAE,EAAE;QACpC,OAAO;YAAE,SAAS;YAAM,SAAS;QAA6B;IAClE,EAAE,OAAO,GAAQ;QACb,OAAO;YAAE,SAAS;YAAO,SAAS,EAAE,OAAO;QAAC;IAChD;AACJ;AAGO,eAAe;IAClB,MAAM,YAAY,IAAA,yKAAiB;IACnC,IAAA,kKAAU,EAAC;IACX,IAAA,yKAAc,EAAC;IACf,OAAO,UAAU,EAAE;AACvB;AAGO,eAAe,mBAAmB,EAAU;IAC/C,IAAA,oKAAY,EAAC;IACb,IAAA,yKAAc,EAAC;IACf,OAAO;QAAE,SAAS;IAAK;AAC3B;;;IAlCsB;IAKA;IAKA;IAYA;IAQA;;AA9BA,yQAAA;AAKA,yQAAA;AAKA,yQAAA;AAYA,yQAAA;AAQA,yQAAA"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///Users/fujinoyouichi/music-studio-app/src/actions/campaign.ts"],"sourcesContent":["\"use server\";\n\nimport fs from \"fs\";\nimport path from \"path\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { getAllStudios } from \"@/lib/db-studio\";\n\nconst CAMPAIGNS_DB_PATH = path.join(process.cwd(), \"data\", \"campaigns.json\");\n\n// Initialize campaigns DB\nif (!fs.existsSync(CAMPAIGNS_DB_PATH)) {\n    fs.writeFileSync(CAMPAIGNS_DB_PATH, JSON.stringify([], null, 2));\n}\n\ninterface Campaign {\n    id: string;\n    title: string;\n    description: string;\n    discountType: \"percentage\" | \"fixed\";\n    discountValue: number;\n    target: \"all\" | \"specific\";\n    targetStudioIds: string[];\n    startDate: string;\n    endDate: string;\n    isActive: boolean;\n    createdAt: string;\n}\n\n// Get all campaigns\nexport async function fetchCampaigns(): Promise<Campaign[]> {\n    try {\n        const data = fs.readFileSync(CAMPAIGNS_DB_PATH, \"utf-8\");\n        return JSON.parse(data);\n    } catch (error) {\n        return [];\n    }\n}\n\n// Get studios (for target selection)\nexport async function fetchStudios() {\n    return getAllStudios();\n}\n\n// Create new campaign\nexport async function createCampaign(data: {\n    title: string;\n    description: string;\n    discountType: \"percentage\" | \"fixed\";\n    discountValue: number;\n    target: \"all\" | \"specific\";\n    targetStudioIds: string[];\n    startDate: string;\n    endDate: string;\n    isActive: boolean;\n}): Promise<{ success: boolean; campaignId: string }> {\n    const campaigns = await fetchCampaigns();\n\n    const newCampaign: Campaign = {\n        id: uuidv4(),\n        ...data,\n        createdAt: new Date().toISOString(),\n    };\n\n    campaigns.push(newCampaign);\n    fs.writeFileSync(CAMPAIGNS_DB_PATH, JSON.stringify(campaigns, null, 2));\n\n    return { success: true, campaignId: newCampaign.id };\n}\n\n// Update campaign\nexport async function updateCampaign(\n    data: Campaign\n): Promise<{ success: boolean }> {\n    const campaigns = await fetchCampaigns();\n    const campaignIndex = campaigns.findIndex((c) => c.id === data.id);\n\n    if (campaignIndex === -1) {\n        return { success: false };\n    }\n\n    campaigns[campaignIndex] = data;\n    fs.writeFileSync(CAMPAIGNS_DB_PATH, JSON.stringify(campaigns, null, 2));\n\n    return { success: true };\n}\n\n// Delete campaign\nexport async function deleteCampaign(id: string): Promise<{ success: boolean }> {\n    const campaigns = await fetchCampaigns();\n    const filteredCampaigns = campaigns.filter((c) => c.id !== id);\n\n    fs.writeFileSync(CAMPAIGNS_DB_PATH, JSON.stringify(filteredCampaigns, null, 2));\n\n    return { success: true };\n}\n\n// Get active campaigns for a specific studio\nexport async function getActiveCampaignsForStudio(\n    studioId: string\n): Promise<Campaign[]> {\n    const campaigns = await fetchCampaigns();\n    const today = new Date().toISOString().split(\"T\")[0];\n\n    return campaigns.filter(\n        (campaign) =>\n            campaign.isActive &&\n            campaign.startDate <= today &&\n            campaign.endDate >= today &&\n            (campaign.target === \"all\" ||\n                campaign.targetStudioIds.includes(studioId))\n    );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;;;;;;;AAEA,MAAM,oBAAoB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAE3D,0BAA0B;AAC1B,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,oBAAoB;IACnC,wGAAE,CAAC,aAAa,CAAC,mBAAmB,KAAK,SAAS,CAAC,EAAE,EAAE,MAAM;AACjE;AAiBO,eAAe;IAClB,IAAI;QACA,MAAM,OAAO,wGAAE,CAAC,YAAY,CAAC,mBAAmB;QAChD,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAO;QACZ,OAAO,EAAE;IACb;AACJ;AAGO,eAAe;IAClB,OAAO,IAAA,qKAAa;AACxB;AAGO,eAAe,eAAe,IAUpC;IACG,MAAM,YAAY,MAAM;IAExB,MAAM,cAAwB;QAC1B,IAAI,IAAA,2MAAM;QACV,GAAG,IAAI;QACP,WAAW,IAAI,OAAO,WAAW;IACrC;IAEA,UAAU,IAAI,CAAC;IACf,wGAAE,CAAC,aAAa,CAAC,mBAAmB,KAAK,SAAS,CAAC,WAAW,MAAM;IAEpE,OAAO;QAAE,SAAS;QAAM,YAAY,YAAY,EAAE;IAAC;AACvD;AAGO,eAAe,eAClB,IAAc;IAEd,MAAM,YAAY,MAAM;IACxB,MAAM,gBAAgB,UAAU,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;IAEjE,IAAI,kBAAkB,CAAC,GAAG;QACtB,OAAO;YAAE,SAAS;QAAM;IAC5B;IAEA,SAAS,CAAC,cAAc,GAAG;IAC3B,wGAAE,CAAC,aAAa,CAAC,mBAAmB,KAAK,SAAS,CAAC,WAAW,MAAM;IAEpE,OAAO;QAAE,SAAS;IAAK;AAC3B;AAGO,eAAe,eAAe,EAAU;IAC3C,MAAM,YAAY,MAAM;IACxB,MAAM,oBAAoB,UAAU,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAE3D,wGAAE,CAAC,aAAa,CAAC,mBAAmB,KAAK,SAAS,CAAC,mBAAmB,MAAM;IAE5E,OAAO;QAAE,SAAS;IAAK;AAC3B;AAGO,eAAe,4BAClB,QAAgB;IAEhB,MAAM,YAAY,MAAM;IACxB,MAAM,QAAQ,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IAEpD,OAAO,UAAU,MAAM,CACnB,CAAC,WACG,SAAS,QAAQ,IACjB,SAAS,SAAS,IAAI,SACtB,SAAS,OAAO,IAAI,SACpB,CAAC,SAAS,MAAM,KAAK,SACjB,SAAS,eAAe,CAAC,QAAQ,CAAC,SAAS;AAE3D;;;IAlFsB;IAUA;IAKA;IA0BA;IAiBA;IAUA;;AApEA,yQAAA;AAUA,yQAAA;AAKA,yQAAA;AA0BA,yQAAA;AAiBA,yQAAA;AAUA,yQAAA"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///Users/fujinoyouichi/music-studio-app/.next-internal/server/app/admin/%28protected%29/campaigns/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {adminLogout as '001204c5cf63a9b2296f854320112c5a87dcce6e42'} from 'ACTIONS_MODULE0'\nexport {checkAdminAuth as '00437f65ee5b42f956e8ffc66d1cb8f078eb3f7b8f'} from 'ACTIONS_MODULE0'\nexport {getAuthInfo as '0094447a595c8804f1bc342263046c499a9212ef70'} from 'ACTIONS_MODULE0'\nexport {requireAdminAuth as '00fad050e5d6ad0ce3b05eee5af53765577db154bf'} from 'ACTIONS_MODULE0'\nexport {storeLogin as '40f94cb5b752928b50e639d0b94db41445b719e91b'} from 'ACTIONS_MODULE0'\nexport {adminLogin as '6095d9b95f263e7a67fcaf6220fc022a92ad42b253'} from 'ACTIONS_MODULE0'\nexport {adminLogout as '001204c5cf63a9b2296f854320112c5a87dcce6e42'} from 'ACTIONS_MODULE0'\nexport {getAuthInfo as '0094447a595c8804f1bc342263046c499a9212ef70'} from 'ACTIONS_MODULE0'\nexport {fetchStudios as '00de754591fdaf2c4a04b598d8d123785d38cd283a'} from 'ACTIONS_MODULE1'\nexport {fetchStudio as '405932c62487fb452c306955850c3372e60cb81894'} from 'ACTIONS_MODULE1'\nexport {updateStudio as '40a99c7e57f5ffb60c7126b179428ff9a0895705a5'} from 'ACTIONS_MODULE1'\nexport {createNewStudioAction as '00074318368149362b438db185274ca5ef282e82ea'} from 'ACTIONS_MODULE1'\nexport {deleteStudioAction as '40f0b91f465b26951c09a3f17715c967e1276cad01'} from 'ACTIONS_MODULE1'\nexport {fetchCampaigns as '000bf1b2cc1df417a185e44d3e96c2c98308eabe0b'} from 'ACTIONS_MODULE2'\nexport {createCampaign as '405569bc3f9ea0e5419e154fabdd8fab836867ecfa'} from 'ACTIONS_MODULE2'\nexport {updateCampaign as '40109479fc7529f325b3473e7d8191d3a2a95b3d1f'} from 'ACTIONS_MODULE2'\nexport {deleteCampaign as '403ec227a5e98694e1173b6b9083b121c1b2a307d4'} from 'ACTIONS_MODULE2'\nexport {fetchStudios as '0099d520f362b3f2d89f8c65d96b297763d8987a58'} from 'ACTIONS_MODULE2'\n"],"names":[],"mappings":";AAAA;AAQA;AAKA"}}]
}