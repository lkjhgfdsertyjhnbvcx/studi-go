{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/fujinoyouichi/music-studio-app/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n    measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID,\n};\n\n// Initialize Firebase (Singleton pattern)\nconst app = getApps().length > 0 ? getApp() : initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\nexport { db };\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACnB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACjB;AAEA,0CAA0C;AAC1C,MAAM,MAAM,IAAA,qMAAO,IAAG,MAAM,GAAG,IAAI,IAAA,oMAAM,MAAK,IAAA,2MAAa,EAAC;AAC5D,MAAM,KAAK,IAAA,2MAAY,EAAC"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/fujinoyouichi/music-studio-app/src/lib/db-firestore.ts"],"sourcesContent":["import { db } from \"./firebase\";\nimport {\n    collection,\n    doc,\n    getDocs,\n    getDoc,\n    setDoc,\n    updateDoc,\n    deleteDoc,\n    query,\n    where,\n    Timestamp\n} from \"firebase/firestore\";\nimport { StudioProfile } from \"./db-studio\";\nimport { User } from \"@/actions/auth\";\nimport { Booking } from \"./db-local\";\nimport { Payment } from \"@/actions/payment\";\n\nexport interface Campaign {\n    id: string;\n    title: string;\n    description: string;\n    discountType: \"percentage\" | \"fixed\";\n    discountValue: number;\n    target: \"all\" | \"specific\";\n    targetStudioIds: string[];\n    startDate: string;\n    endDate: string;\n    isActive: boolean;\n    createdAt: string;\n}\n\nexport interface Coupon {\n    id: string;\n    code: string;\n    title: string;\n    discountType: \"percentage\" | \"fixed\";\n    discountValue: number;\n    maxUses: number;\n    usedCount: number;\n    validFrom: string;\n    validUntil: string;\n    targetStudioIds: string[];\n    isActive: boolean;\n    createdAt: string;\n}\n\n// --- STUDIOS ---\nexport const getAllStudiosFromFirestore = async (): Promise<StudioProfile[]> => {\n    try {\n        const snapshot = await getDocs(collection(db, \"studios\"));\n        return snapshot.docs.map(doc => doc.data() as StudioProfile);\n    } catch (e) {\n        console.error(\"Error fetching studios:\", e);\n        return [];\n    }\n};\n\nexport const getStudioByIdFromFirestore = async (id: string): Promise<StudioProfile | null> => {\n    try {\n        const docRef = doc(db, \"studios\", id);\n        const docSnap = await getDoc(docRef);\n        return docSnap.exists() ? (docSnap.data() as StudioProfile) : null;\n    } catch (e) {\n        console.error(\"Error fetching studio:\", e);\n        return null;\n    }\n};\n\nexport const saveStudioToFirestore = async (studio: StudioProfile): Promise<void> => {\n    try {\n        await setDoc(doc(db, \"studios\", studio.id), studio);\n    } catch (e) {\n        console.error(\"Error saving studio:\", e);\n        throw e;\n    }\n};\n\nexport const deleteStudioFromFirestore = async (id: string): Promise<void> => {\n    try {\n        await deleteDoc(doc(db, \"studios\", id));\n    } catch (e) {\n        console.error(\"Error deleting studio:\", e);\n        throw e;\n    }\n};\n\n// --- USERS ---\nexport const getAllUsersFromFirestore = async (): Promise<User[]> => {\n    try {\n        const snapshot = await getDocs(collection(db, \"users\"));\n        return snapshot.docs.map(doc => doc.data() as User);\n    } catch (e) {\n        console.error(\"Error fetching users:\", e);\n        return [];\n    }\n};\n\nexport const getUserByIdFromFirestore = async (id: string): Promise<User | undefined> => {\n    try {\n        const docRef = doc(db, \"users\", id);\n        const docSnap = await getDoc(docRef);\n        return docSnap.exists() ? (docSnap.data() as User) : undefined;\n    } catch (e) {\n        console.error(\"Error fetching user:\", e);\n        return undefined;\n    }\n};\n\nexport const saveUserToFirestore = async (user: User): Promise<void> => {\n    try {\n        await setDoc(doc(db, \"users\", user.id), user);\n    } catch (e) {\n        console.error(\"Error saving user:\", e);\n        throw e;\n    }\n};\n\n// --- BOOKINGS ---\nexport const getAllBookingsFromFirestore = async (): Promise<Booking[]> => {\n    try {\n        const snapshot = await getDocs(collection(db, \"bookings\"));\n        return snapshot.docs.map(doc => doc.data() as Booking);\n    } catch (e) {\n        console.error(\"Error fetching bookings:\", e);\n        return [];\n    }\n};\n\nexport const getBookingByIdFromFirestore = async (id: string): Promise<Booking | undefined> => {\n    try {\n        const docRef = doc(db, \"bookings\", id);\n        const docSnap = await getDoc(docRef);\n        return docSnap.exists() ? (docSnap.data() as Booking) : undefined;\n    } catch (e) {\n        console.error(\"Error fetching booking:\", e);\n        return undefined;\n    }\n};\n\nexport const saveBookingToFirestore = async (booking: Booking): Promise<void> => {\n    try {\n        await setDoc(doc(db, \"bookings\", booking.id), booking);\n    } catch (e) {\n        console.error(\"Error saving booking:\", e);\n        throw e;\n    }\n};\n\nexport const updateBookingInFirestore = async (id: string, updates: Partial<Booking>): Promise<boolean> => {\n    try {\n        await updateDoc(doc(db, \"bookings\", id), updates);\n        return true;\n    } catch (e) {\n        console.error(\"Error updating booking:\", e);\n        return false;\n    }\n};\n\n// --- PAYMENTS ---\nexport const getAllPaymentsFromFirestore = async (): Promise<Payment[]> => {\n    try {\n        const snapshot = await getDocs(collection(db, \"payments\"));\n        return snapshot.docs.map(doc => doc.data() as Payment);\n    } catch (e) {\n        console.error(\"Error fetching payments:\", e);\n        return [];\n    }\n};\n\nexport const getPaymentsByStudioIdFromFirestore = async (studioId: string): Promise<Payment[]> => {\n    try {\n        const q = query(collection(db, \"payments\"), where(\"studioId\", \"==\", studioId));\n        const snapshot = await getDocs(q);\n        return snapshot.docs.map(doc => doc.data() as Payment);\n    } catch (e) {\n        console.error(\"Error fetching studio payments:\", e);\n        return [];\n    }\n};\n\nexport const savePaymentToFirestore = async (payment: Payment): Promise<void> => {\n    try {\n        await setDoc(doc(db, \"payments\", payment.id), payment);\n    } catch (e) {\n        console.error(\"Error saving payment:\", e);\n        throw e;\n    }\n};\n\nexport const updatePaymentStatusInFirestore = async (id: string, status: string): Promise<boolean> => {\n    try {\n        await updateDoc(doc(db, \"payments\", id), { status });\n        return true;\n    } catch (e) {\n        console.error(\"Error updating payment status:\", e);\n        return false;\n    }\n};\n\n// --- AVAILABILITY ---\nexport const checkAvailabilityFromFirestore = async (\n    studioId: string,\n    roomName: string | undefined,\n    date: string,\n    startTime: string,\n    duration: number,\n    excludeBookingId?: string\n): Promise<boolean> => {\n    try {\n        const bookings = await getAllBookingsFromFirestore();\n\n        // Convert new request to minutes from midnight\n        const [startH, startM] = startTime.split(':').map(Number);\n        const newStart = startH * 60 + startM;\n        const newEnd = newStart + (duration * 60);\n\n        const conflictingBookings = bookings.filter(b => {\n            if (b.status === 'cancelled') return false;\n            if (excludeBookingId && b.id === excludeBookingId) return false;\n            if (b.date !== date) return false;\n            if (b.studioId !== studioId) return false;\n            if (roomName && b.roomName && b.roomName !== roomName) return false;\n            return true;\n        });\n\n        for (const b of conflictingBookings) {\n            const [h, m] = b.startTime.split(':').map(Number);\n            const bStart = h * 60 + m;\n            const bEnd = bStart + (b.durationHours * 60);\n\n            if (newStart < bEnd && newEnd > bStart) {\n                return false;\n            }\n        }\n        return true;\n    } catch (e) {\n        console.error(\"Error checking availability:\", e);\n        return false;\n    }\n};\n\n// --- CAMPAIGNS ---\nexport const getAllCampaignsFromFirestore = async (): Promise<Campaign[]> => {\n    try {\n        const snapshot = await getDocs(collection(db, \"campaigns\"));\n        return snapshot.docs.map(doc => doc.data() as Campaign);\n    } catch (e) {\n        console.error(\"Error fetching campaigns:\", e);\n        return [];\n    }\n};\n\nexport const saveCampaignToFirestore = async (campaign: Campaign): Promise<void> => {\n    try {\n        await setDoc(doc(db, \"campaigns\", campaign.id), campaign);\n    } catch (e) {\n        console.error(\"Error saving campaign:\", e);\n        throw e;\n    }\n};\n\nexport const deleteCampaignFromFirestore = async (id: string): Promise<void> => {\n    try {\n        await deleteDoc(doc(db, \"campaigns\", id));\n    } catch (e) {\n        console.error(\"Error deleting campaign:\", e);\n        throw e;\n    }\n};\n\n// --- COUPONS ---\nexport const getAllCouponsFromFirestore = async (): Promise<Coupon[]> => {\n    try {\n        const snapshot = await getDocs(collection(db, \"coupons\"));\n        return snapshot.docs.map(doc => doc.data() as Coupon);\n    } catch (e) {\n        console.error(\"Error fetching coupons:\", e);\n        return [];\n    }\n};\n\nexport const saveCouponToFirestore = async (coupon: Coupon): Promise<void> => {\n    try {\n        await setDoc(doc(db, \"coupons\", coupon.id), coupon);\n    } catch (e) {\n        console.error(\"Error saving coupon:\", e);\n        throw e;\n    }\n};\n\nexport const deleteCouponFromFirestore = async (id: string): Promise<void> => {\n    try {\n        await deleteDoc(doc(db, \"coupons\", id));\n    } catch (e) {\n        console.error(\"Error deleting coupon:\", e);\n        throw e;\n    }\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":["file:///Users/fujinoyouichi/music-studio-app/src/actions/login.ts"],"sourcesContent":["\"use server\";\n\nimport { cookies } from 'next/headers';\nimport { getAllUsersFromFirestore } from '@/lib/db-firestore';\n\nexport async function loginAction(formData: FormData) {\n    const email = formData.get('email') as string;\n    const password = formData.get('password') as string;\n\n    if (!email) {\n        return { success: false, message: 'メールアドレスを入力してください。' };\n    }\n\n    const users = await getAllUsersFromFirestore();\n    const user = users.find(u => u.email === email);\n\n    if (!user) {\n        return { success: false, message: 'ユーザーが見つかりません。アカウント登録はお済みですか？' };\n    }\n\n    // Verify password\n    if (!user.password) {\n        return { success: false, message: 'パスワードが設定されていません。「パスワードをお忘れですか？」から設定を行ってください。' };\n    }\n\n    if (user.password !== password) {\n        return { success: false, message: 'パスワードが間違っています。' };\n    }\n\n    const cookieStore = await cookies();\n    cookieStore.set('__session', JSON.stringify({ type: 'user', id: user.id, name: user.name }), {\n        httpOnly: true,\n        secure: true,\n        path: '/',\n        maxAge: 60 * 60 * 24 * 7 // 7 days\n    });\n\n    return { success: true, message: 'ログインしました。' };\n}\n\nexport async function logoutAction() {\n    const cookieStore = await cookies();\n    cookieStore.delete('__session');\n    return { success: true };\n}\n\nexport async function getCurrentUser() {\n    const cookieStore = await cookies();\n    const session = cookieStore.get('__session')?.value;\n    if (!session) return null;\n\n    try {\n        const data = JSON.parse(session);\n        if (data.type !== 'user') return null;\n\n        const users = await getAllUsersFromFirestore();\n        return users.find(u => u.id === data.id) || null;\n    } catch (e) {\n        return null;\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;;;AAEO,eAAe,YAAY,QAAkB;IAChD,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,IAAI,CAAC,OAAO;QACR,OAAO;YAAE,SAAS;YAAO,SAAS;QAAoB;IAC1D;IAEA,MAAM,QAAQ,MAAM,IAAA,mLAAwB;IAC5C,MAAM,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK;IAEzC,IAAI,CAAC,MAAM;QACP,OAAO;YAAE,SAAS;YAAO,SAAS;QAA+B;IACrE;IAEA,kBAAkB;IAClB,IAAI,CAAC,KAAK,QAAQ,EAAE;QAChB,OAAO;YAAE,SAAS;YAAO,SAAS;QAA+C;IACrF;IAEA,IAAI,KAAK,QAAQ,KAAK,UAAU;QAC5B,OAAO;YAAE,SAAS;YAAO,SAAS;QAAiB;IACvD;IAEA,MAAM,cAAc,MAAM,IAAA,oKAAO;IACjC,YAAY,GAAG,CAAC,aAAa,KAAK,SAAS,CAAC;QAAE,MAAM;QAAQ,IAAI,KAAK,EAAE;QAAE,MAAM,KAAK,IAAI;IAAC,IAAI;QACzF,UAAU;QACV,QAAQ;QACR,MAAM;QACN,QAAQ,KAAK,KAAK,KAAK,EAAE,SAAS;IACtC;IAEA,OAAO;QAAE,SAAS;QAAM,SAAS;IAAY;AACjD;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,oKAAO;IACjC,YAAY,MAAM,CAAC;IACnB,OAAO;QAAE,SAAS;IAAK;AAC3B;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,oKAAO;IACjC,MAAM,UAAU,YAAY,GAAG,CAAC,cAAc;IAC9C,IAAI,CAAC,SAAS,OAAO;IAErB,IAAI;QACA,MAAM,OAAO,KAAK,KAAK,CAAC;QACxB,IAAI,KAAK,IAAI,KAAK,QAAQ,OAAO;QAEjC,MAAM,QAAQ,MAAM,IAAA,mLAAwB;QAC5C,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE,KAAK;IAChD,EAAE,OAAO,GAAG;QACR,OAAO;IACX;AACJ;;;IAvDsB;IAmCA;IAMA;;AAzCA,yQAAA;AAmCA,yQAAA;AAMA,yQAAA"}},
    {"offset": {"line": 473, "column": 0}, "map": {"version":3,"sources":["file:///Users/fujinoyouichi/music-studio-app/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {loginAction as '40cb3a12f77b058d2c5958baae637d31328c65a6ba'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}