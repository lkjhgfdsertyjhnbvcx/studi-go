(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22814,e=>{"use strict";let a=(0,e.i(81416).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],22814)},50542,e=>{"use strict";var a=e.i(33067),t=e.i(58682);function r({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function s({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function c({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...r})}function l({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...r})}function i({className:e,...r}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>l,"CardHeader",()=>s,"CardTitle",()=>c])},74897,e=>{"use strict";let a=(0,e.i(81416).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],74897)},62870,e=>{"use strict";let a=(0,e.i(81416).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>a],62870)},34272,e=>{"use strict";var a=e.i(33067),t=e.i(67437),r=e.i(76381),s=e.i(50542),c=e.i(22814),l=e.i(62870),i=e.i(74897);function d(){let[e,d]=(0,t.useState)("idle"),[n,o]=(0,t.useState)([]),x=async()=>{if(confirm("JSONファイルからFirestoreへデータを移行します。よろしいですか？")){d("loading"),o(["Migration started..."]);try{let e=await fetch("/api/admin/migrate",{method:"POST"}),a=await e.json();if(a.success)d("success"),o(e=>[...e,...a.logs,"✅ Migration completed!"]);else throw Error(a.message)}catch(e){d("error"),o(a=>[...a,`❌ Error: ${e.message}`])}}};return(0,a.jsx)("div",{className:"min-h-screen bg-black text-white p-10 font-sans",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto space-y-8",children:(0,a.jsxs)(s.Card,{className:"bg-slate-900 border-white/10",children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{className:"text-2xl text-cyan-400",children:"データ移行ツール (Beta)"})}),(0,a.jsxs)(s.CardContent,{className:"space-y-6",children:[(0,a.jsx)("p",{className:"text-gray-400",children:"ローカルファイル (`data/*.json`) に保存されているスタジオ・予約・ユーザー情報を、 新しく設定した Cloud Firestore へコピーします。"}),"idle"===e&&(0,a.jsx)(r.Button,{onClick:x,className:"w-full bg-cyan-500 hover:bg-cyan-600 text-black font-bold h-12",children:"データを移行する"}),"loading"===e&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 py-8",children:[(0,a.jsx)(c.Loader2,{className:"h-10 w-10 animate-spin text-cyan-500"}),(0,a.jsx)("p",{children:"移行中... しばらくお待ちください"})]}),"success"===e&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 py-8 text-green-400",children:[(0,a.jsx)(l.CheckCircle2,{className:"h-12 w-12"}),(0,a.jsx)("p",{className:"font-bold",children:"移行が完了しました！"}),(0,a.jsx)(r.Button,{onClick:()=>window.location.href="/admin",variant:"outline",className:"border-green-900 text-green-400",children:"管理画面へ戻る"})]}),"error"===e&&(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4 py-8 text-red-400",children:[(0,a.jsx)(i.AlertCircle,{className:"h-12 w-12"}),(0,a.jsx)("p",{className:"font-bold",children:"移行中にエラーが発生しました"}),(0,a.jsx)(r.Button,{onClick:()=>d("idle"),variant:"outline",className:"border-red-900 text-red-400",children:"リトライ"})]}),(0,a.jsx)("div",{className:"bg-black/50 p-4 rounded-lg font-mono text-xs overflow-y-auto max-h-48 border border-white/5 space-y-1",children:n.map((e,t)=>(0,a.jsx)("div",{children:e},t))})]})]})})})}e.s(["default",()=>d])}]);