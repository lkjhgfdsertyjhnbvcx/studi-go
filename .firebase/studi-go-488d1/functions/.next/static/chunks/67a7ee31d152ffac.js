(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22814,e=>{"use strict";let t=(0,e.i(81416).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],22814)},50542,e=>{"use strict";var t=e.i(33067),a=e.i(58682);function s({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function r({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function d({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>d,"CardHeader",()=>i,"CardTitle",()=>r])},65276,e=>{"use strict";let t=(0,e.i(81416).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],65276)},28978,e=>{"use strict";let t=(0,e.i(81416).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],28978)},97034,48777,e=>{"use strict";var t=e.i(33067),a=e.i(58682);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s],97034);let i=(0,e.i(81416).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>i],48777)},46765,e=>{"use strict";var t=e.i(33067),a=e.i(67437),s=e.i(50542),i=e.i(76381),r=e.i(90174),d=e.i(61468),l=e.i(97034),c=e.i(18699),n=e.i(71246),o=e.i(99189),h=e.i(65276),x=e.i(81416);let u=(0,x.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var g=e.i(28978),m=e.i(14603);let v=(0,x.default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var b=e.i(48777),p=e.i(22814),j=e.i(74714);let y=(0,j.createServerReference)("005b4f95552a6f7e2456ac2e03dfdbd67550265893",j.callServer,void 0,j.findSourceMapURL,"fetchCampaigns"),f=(0,j.createServerReference)("4077a815a43b092be3404c0672409bd7374c1e2b6e",j.callServer,void 0,j.findSourceMapURL,"createCampaign"),N=(0,j.createServerReference)("406357e0a4ac14f7dae8bf63108d95db3199343a9b",j.callServer,void 0,j.findSourceMapURL,"updateCampaign"),w=(0,j.createServerReference)("401ea65fe157d237b2079b3f31164b4998f5ff5edd",j.callServer,void 0,j.findSourceMapURL,"deleteCampaign"),S=(0,j.createServerReference)("00622baa97a1d191237b2c40df4482d18355dce376",j.callServer,void 0,j.findSourceMapURL,"fetchStudios");function k(){let[e,x]=(0,a.useState)([]),[j,k]=(0,a.useState)([]),[C,D]=(0,a.useState)(!0),[M,T]=(0,a.useState)(!1),[A,I]=(0,a.useState)(null),[L,V]=(0,a.useState)({title:"",description:"",discountType:"percentage",discountValue:0,target:"all",targetStudioIds:[],startDate:"",endDate:"",isActive:!0}),F=async()=>{D(!0);let[e,t]=await Promise.all([y(),S()]);x(e),k(t),D(!1)};(0,a.useEffect)(()=>{F()},[]);let R=async e=>{e.preventDefault(),A?await N({...L,id:A.id,createdAt:A.createdAt}):await f(L),T(!1),F()},B=async e=>{confirm("このキャンペーンを削除しますか？")&&(await w(e),F())},z=async e=>{await N({...e,isActive:!e.isActive}),F()};return C?(0,t.jsxs)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:[(0,t.jsx)(p.Loader2,{className:"animate-spin mr-2"})," Loading..."]}):(0,t.jsx)("div",{className:"min-h-screen bg-black text-white p-10 font-sans",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8 border-b border-white/10 pb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-cyan-400 mb-2",children:"キャンペーン管理"}),(0,t.jsx)("p",{className:"text-gray-400",children:"全店舗・個別店舗向けキャンペーンを管理"})]}),(0,t.jsxs)(c.Dialog,{open:M,onOpenChange:T,children:[(0,t.jsx)(c.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(i.Button,{onClick:()=>{I(null),V({title:"",description:"",discountType:"percentage",discountValue:0,target:"all",targetStudioIds:[],startDate:"",endDate:"",isActive:!0}),T(!0)},className:"bg-cyan-500 hover:bg-cyan-600 text-black font-bold",children:[(0,t.jsx)(h.Plus,{className:"mr-2 h-4 w-4"})," 新規作成"]})}),(0,t.jsxs)(c.DialogContent,{className:"bg-slate-900 border-white/10 text-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(c.DialogHeader,{children:(0,t.jsx)(c.DialogTitle,{className:"text-cyan-400",children:A?"キャンペーン編集":"新規キャンペーン"})}),(0,t.jsxs)("form",{onSubmit:R,className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"title",children:"タイトル"}),(0,t.jsx)(r.Input,{id:"title",value:L.title,onChange:e=>V({...L,title:e.target.value}),className:"bg-slate-800 border-white/10 text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"description",children:"説明"}),(0,t.jsx)(l.Textarea,{id:"description",value:L.description,onChange:e=>V({...L,description:e.target.value}),className:"bg-slate-800 border-white/10 text-white",rows:3,required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"discountType",children:"割引タイプ"}),(0,t.jsxs)(n.Select,{value:L.discountType,onValueChange:e=>V({...L,discountType:e}),children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-slate-800 border-white/10 text-white",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsxs)(n.SelectContent,{className:"bg-slate-800 border-white/10 text-white",children:[(0,t.jsx)(n.SelectItem,{value:"percentage",children:"パーセント(%)"}),(0,t.jsx)(n.SelectItem,{value:"fixed",children:"固定額(¥)"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.Label,{htmlFor:"discountValue",children:["割引値"," ","percentage"===L.discountType?"(%)":"(¥)"]}),(0,t.jsx)(r.Input,{id:"discountValue",type:"number",value:L.discountValue,onChange:e=>V({...L,discountValue:Number(e.target.value)}),className:"bg-slate-800 border-white/10 text-white",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"target",children:"対象"}),(0,t.jsxs)(n.Select,{value:L.target,onValueChange:e=>V({...L,target:e,targetStudioIds:"all"===e?[]:L.targetStudioIds}),children:[(0,t.jsx)(n.SelectTrigger,{className:"bg-slate-800 border-white/10 text-white",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsxs)(n.SelectContent,{className:"bg-slate-800 border-white/10 text-white",children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"全店舗"}),(0,t.jsx)(n.SelectItem,{value:"specific",children:"個別店舗"})]})]})]}),"specific"===L.target&&(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{children:"対象スタジオ"}),(0,t.jsx)("div",{className:"space-y-2 mt-2 max-h-40 overflow-y-auto bg-slate-800 p-3 rounded border border-white/10",children:j.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white/5 p-2 rounded",children:[(0,t.jsx)("input",{type:"checkbox",checked:L.targetStudioIds.includes(e.id),onChange:t=>{t.target.checked?V({...L,targetStudioIds:[...L.targetStudioIds,e.id]}):V({...L,targetStudioIds:L.targetStudioIds.filter(t=>t!==e.id)})},className:"rounded border-white/20"}),(0,t.jsx)("span",{className:"text-sm",children:e.storeName})]},e.id))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"startDate",children:"開始日"}),(0,t.jsx)(r.Input,{id:"startDate",type:"date",value:L.startDate,onChange:e=>V({...L,startDate:e.target.value}),className:"bg-slate-800 border-white/10 text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Label,{htmlFor:"endDate",children:"終了日"}),(0,t.jsx)(r.Input,{id:"endDate",type:"date",value:L.endDate,onChange:e=>V({...L,endDate:e.target.value}),className:"bg-slate-800 border-white/10 text-white",required:!0})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"isActive",checked:L.isActive,onChange:e=>V({...L,isActive:e.target.checked}),className:"rounded border-white/20"}),(0,t.jsx)(d.Label,{htmlFor:"isActive",className:"cursor-pointer",children:"アクティブ"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>T(!1),className:"border-white/20 text-white hover:bg-white/5",children:"キャンセル"}),(0,t.jsx)(i.Button,{type:"submit",className:"bg-cyan-500 hover:bg-cyan-600 text-black",children:A?"更新":"作成"})]})]})]})]})]}),(0,t.jsx)("div",{className:"grid gap-6",children:0===e.length?(0,t.jsx)(s.Card,{className:"bg-slate-900 border-white/10",children:(0,t.jsx)(s.CardContent,{className:"py-20 text-center text-gray-500",children:"キャンペーンがありません。右上のボタンから作成してください。"})}):e.map(e=>(0,t.jsxs)(s.Card,{className:`bg-slate-900 border ${e.isActive?"border-cyan-500/30":"border-white/10"}`,children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)(m.Megaphone,{className:"h-5 w-5 text-cyan-400"}),(0,t.jsx)(s.CardTitle,{className:"text-xl text-white",children:e.title}),e.isActive&&(0,t.jsx)(o.Badge,{className:"bg-green-900/30 text-green-400 border-green-500/30",children:"Active"}),!e.isActive&&(0,t.jsx)(o.Badge,{className:"bg-gray-700/30 text-gray-400 border-gray-500/30",children:"Inactive"})]}),(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:e.description})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/5",onClick:()=>{I(e),V({title:e.title,description:e.description,discountType:e.discountType,discountValue:e.discountValue,target:e.target,targetStudioIds:e.targetStudioIds,startDate:e.startDate,endDate:e.endDate,isActive:e.isActive}),T(!0)},children:(0,t.jsx)(u,{className:"h-3 w-3"})}),(0,t.jsx)(i.Button,{size:"sm",variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-900/20",onClick:()=>B(e.id),children:(0,t.jsx)(g.Trash2,{className:"h-3 w-3"})})]})]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v,{className:"h-4 w-4 text-cyan-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-gray-500 text-xs",children:"期間"}),(0,t.jsxs)("div",{className:"text-white",children:[e.startDate," ~ ",e.endDate]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Target,{className:"h-4 w-4 text-cyan-400"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-gray-500 text-xs",children:"対象"}),(0,t.jsx)("div",{className:"text-white",children:"all"===e.target?"全店舗":`${e.targetStudioIds.length}店舗`})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-gray-500 text-xs",children:"割引"}),(0,t.jsx)("div",{className:"text-cyan-400 font-bold",children:"percentage"===e.discountType?`${e.discountValue}% OFF`:`\xa5${e.discountValue.toLocaleString()} OFF`})]}),(0,t.jsx)("div",{className:"flex items-center justify-end",children:(0,t.jsx)(i.Button,{size:"sm",variant:e.isActive?"outline":"default",className:e.isActive?"border-yellow-500/30 text-yellow-400 hover:bg-yellow-900/20":"bg-cyan-500 hover:bg-cyan-600 text-black",onClick:()=>z(e),children:e.isActive?"無効化":"有効化"})})]})})]},e.id))})]})})}e.s(["default",()=>k],46765)}]);