module.exports=[83264,a=>{"use strict";var b=a.i(35649),c=a.i(54010),d=a.i(20191),e=a.i(60330);async function f(){return(0,c.getAllStudiosFromFirestore)()}async function g(a){return(0,c.getStudioByIdFromFirestore)(a)}async function h(a){try{return await (0,c.saveStudioToFirestore)(a),(0,d.revalidatePath)("/studios"),(0,d.revalidatePath)(`/studios/${a.id}`),{success:!0,message:"Studio saved successfully."}}catch(a){return{success:!1,message:a.message}}}async function i(){let a={id:(0,e.v4)(),storeName:"New Studio",representative:"",manager:"",contactPerson:"",address:"",phone:"",email:"",businessHours:{weekday:"10:00-22:00",saturday:"10:00-22:00",sundayHoliday:"10:00-22:00"},url:"",studioCount:0,rooms:[],studentDiscount:{enabled:!1,discountType:"amount",value:0},otherDiscounts:[],personalPracticeSettings:{enabled:!0,reservationWindowType:"days",reservationWindowValue:1,maxPeople:2},designSettings:{logoSize:100,backgroundColor:"#000000",backgroundType:"color"},equipmentOptions:[],createdAt:new Date().toISOString()};return await (0,c.saveStudioToFirestore)(a),(0,d.revalidatePath)("/studios"),a.id}async function j(a){return await (0,c.deleteStudioFromFirestore)(a),(0,d.revalidatePath)("/studios"),{success:!0}}(0,a.i(87735).ensureServerEntryExports)([f,g,h,i,j]),(0,b.registerServerReference)(f,"00e4c93b8752da6310062bf7641dee775c057867ca",null),(0,b.registerServerReference)(g,"40f3f415047df7d6f80b4eeb845beddaafcd2f52bb",null),(0,b.registerServerReference)(h,"404b0dc80b6afb3ebc6ef733601d064b54b160fee4",null),(0,b.registerServerReference)(i,"00c0bbb4b1415d1cd7c9373ddf7699da1ac1714148",null),(0,b.registerServerReference)(j,"40273ea227268ba866faf368020cc212388113d420",null),a.s(["createNewStudioAction",()=>i,"deleteStudioAction",()=>j,"fetchStudio",()=>g,"fetchStudios",()=>f,"updateStudio",()=>h])},60785,a=>{"use strict";var b=a.i(46548),c=a.i(83264),d=a.i(35649),e=a.i(60330),f=a.i(41626),g=a.i(54010);function h(){let a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b="";for(let c=0;c<8;c++)b+=a.charAt(Math.floor(Math.random()*a.length));return b}async function i(){return(0,g.getAllCouponsFromFirestore)()}async function j(){return await (0,f.getAllStudios)()}async function k(a){let b=await i(),c=h();for(;b.some(a=>a.code===c);)c=h();let d=new Date().toISOString().split("T")[0],f=a.validFrom<=d&&a.validUntil>=d,j={id:(0,e.v4)(),code:c,...a,usedCount:0,isActive:f,createdAt:new Date().toISOString()};return await (0,g.saveCouponToFirestore)(j),{success:!0,couponId:j.id,code:c}}async function l(a){try{return await (0,g.deleteCouponFromFirestore)(a),{success:!0}}catch(a){return{success:!1}}}async function m(a,b){let c=(await i()).find(b=>b.code===a);if(!c)return{valid:!1,message:"クーポンコードが無効です"};let d=new Date().toISOString().split("T")[0];return c.isActive?d<c.validFrom||d>c.validUntil?{valid:!1,message:"クーポンの有効期限外です"}:c.usedCount>=c.maxUses?{valid:!1,message:"クーポンの利用上限に達しています"}:c.targetStudioIds.length>0&&!c.targetStudioIds.includes(b)?{valid:!1,message:"このスタジオでは使用できません"}:{valid:!0,discount:{type:c.discountType,value:c.discountValue}}:{valid:!1,message:"このクーポンは無効です"}}async function n(a){let b=await i(),c=b.findIndex(b=>b.code===a);if(-1===c)return{success:!1};let d=b[c];return d.usedCount+=1,d.usedCount>=d.maxUses&&(d.isActive=!1),await (0,g.saveCouponToFirestore)(d),{success:!0}}async function o(){let a=await i(),b=new Date().toISOString().split("T")[0];for(let c of a){let a=c.validFrom<=b&&c.validUntil>=b&&c.usedCount<c.maxUses;c.isActive!==a&&(c.isActive=a,await (0,g.saveCouponToFirestore)(c))}}(0,a.i(87735).ensureServerEntryExports)([i,j,k,l,m,n,o]),(0,d.registerServerReference)(i,"00422208a51b5663b9e615a47c358d26b4ad0de769",null),(0,d.registerServerReference)(j,"0004ce98d57b4e58c117a5709faf9f06f304d07903",null),(0,d.registerServerReference)(k,"4006ee327384973dc7230516f685a2df53875192d2",null),(0,d.registerServerReference)(l,"409094c6682faddea444e16d8079894da6643581c6",null),(0,d.registerServerReference)(m,"60627b5075e152859e0da9308786356901efcb952f",null),(0,d.registerServerReference)(n,"408717f571b955bd774380749c7834e4236698cb3f",null),(0,d.registerServerReference)(o,"00517610b6b7586ca242ba21ef47015c42c6ccff15",null),a.s([],34078),a.i(34078),a.s(["0004ce98d57b4e58c117a5709faf9f06f304d07903",()=>j,"00422208a51b5663b9e615a47c358d26b4ad0de769",()=>i,"006af075316706db006bce5619a543b7baa153f247",()=>b.adminLogout,"0085772fd2329d46f7302aede12ceb7d687cfee89e",()=>b.getAuthInfo,"0089a1f7cb2a7fadf26749d87f9fcdbc1f15b236d8",()=>b.checkAdminAuth,"00c0bbb4b1415d1cd7c9373ddf7699da1ac1714148",()=>c.createNewStudioAction,"00cc8a2f516f8fd155c8dc632b4a1c0a38dab84afa",()=>b.requireAdminAuth,"00e4c93b8752da6310062bf7641dee775c057867ca",()=>c.fetchStudios,"4006ee327384973dc7230516f685a2df53875192d2",()=>k,"40273ea227268ba866faf368020cc212388113d420",()=>c.deleteStudioAction,"404b0dc80b6afb3ebc6ef733601d064b54b160fee4",()=>c.updateStudio,"40530a7c11e54431ea05abc98c22a440f2a6e9ff9a",()=>b.storeLogin,"409094c6682faddea444e16d8079894da6643581c6",()=>l,"40f3f415047df7d6f80b4eeb845beddaafcd2f52bb",()=>c.fetchStudio,"60dc2d980d08fe70a6632f1c2387a539aa45c05dbf",()=>b.adminLogin],60785)}];

//# sourceMappingURL=music-studio-app_30645808._.js.map