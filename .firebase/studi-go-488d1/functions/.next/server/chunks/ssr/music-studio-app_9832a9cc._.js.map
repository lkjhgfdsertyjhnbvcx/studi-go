{"version":3,"sources":["../../../../../music-studio-app/src/actions/studio.ts","../../../../../music-studio-app/.next-internal/server/app/admin/%28protected%29/campaigns/page/actions.js%20%28server%20actions%20loader%29","../../../../../music-studio-app/src/actions/campaign.ts"],"sourcesContent":["\"use server\";\n\nimport {\n    getAllStudiosFromFirestore,\n    getStudioByIdFromFirestore,\n    saveStudioToFirestore,\n    deleteStudioFromFirestore\n} from \"@/lib/db-firestore\";\nimport { StudioProfile } from \"@/lib/db-studio\";\nimport { revalidatePath } from \"next/cache\";\nimport { v4 as uuidv4 } from \"uuid\";\n\n// Get All\nexport async function fetchStudios() {\n    return getAllStudiosFromFirestore();\n}\n\n// Get One\nexport async function fetchStudio(id: string) {\n    return getStudioByIdFromFirestore(id);\n}\n\n// Upsert\nexport async function updateStudio(data: StudioProfile) {\n    try {\n        await saveStudioToFirestore(data);\n        revalidatePath(\"/studios\");\n        revalidatePath(`/studios/${data.id}`);\n        return { success: true, message: \"Studio saved successfully.\" };\n    } catch (e: any) {\n        return { success: false, message: e.message };\n    }\n}\n\n// Create New\nexport async function createNewStudioAction() {\n    const newStudio: StudioProfile = {\n        id: uuidv4(),\n        storeName: \"New Studio\",\n        representative: \"\",\n        manager: \"\",\n        contactPerson: \"\",\n        address: \"\",\n        phone: \"\",\n        email: \"\",\n        businessHours: { weekday: \"10:00-22:00\", saturday: \"10:00-22:00\", sundayHoliday: \"10:00-22:00\" },\n        url: \"\",\n        studioCount: 0,\n        rooms: [],\n        studentDiscount: { enabled: false, discountType: 'amount', value: 0 },\n        otherDiscounts: [],\n        personalPracticeSettings: { enabled: true, reservationWindowType: 'days', reservationWindowValue: 1, maxPeople: 2 },\n        designSettings: { logoSize: 100, backgroundColor: \"#000000\", backgroundType: 'color' },\n        equipmentOptions: [],\n        createdAt: new Date().toISOString()\n    };\n    await saveStudioToFirestore(newStudio);\n    revalidatePath(\"/studios\");\n    return newStudio.id;\n}\n\n// Delete\nexport async function deleteStudioAction(id: string) {\n    await deleteStudioFromFirestore(id);\n    revalidatePath(\"/studios\");\n    return { success: true };\n}\n","export {adminLogout as '006af075316706db006bce5619a543b7baa153f247'} from 'ACTIONS_MODULE0'\nexport {getAuthInfo as '0085772fd2329d46f7302aede12ceb7d687cfee89e'} from 'ACTIONS_MODULE0'\nexport {checkAdminAuth as '0089a1f7cb2a7fadf26749d87f9fcdbc1f15b236d8'} from 'ACTIONS_MODULE0'\nexport {requireAdminAuth as '00cc8a2f516f8fd155c8dc632b4a1c0a38dab84afa'} from 'ACTIONS_MODULE0'\nexport {storeLogin as '40530a7c11e54431ea05abc98c22a440f2a6e9ff9a'} from 'ACTIONS_MODULE0'\nexport {adminLogin as '60dc2d980d08fe70a6632f1c2387a539aa45c05dbf'} from 'ACTIONS_MODULE0'\nexport {adminLogout as '006af075316706db006bce5619a543b7baa153f247'} from 'ACTIONS_MODULE0'\nexport {getAuthInfo as '0085772fd2329d46f7302aede12ceb7d687cfee89e'} from 'ACTIONS_MODULE0'\nexport {fetchStudios as '00e4c93b8752da6310062bf7641dee775c057867ca'} from 'ACTIONS_MODULE1'\nexport {fetchStudio as '40f3f415047df7d6f80b4eeb845beddaafcd2f52bb'} from 'ACTIONS_MODULE1'\nexport {updateStudio as '404b0dc80b6afb3ebc6ef733601d064b54b160fee4'} from 'ACTIONS_MODULE1'\nexport {createNewStudioAction as '00c0bbb4b1415d1cd7c9373ddf7699da1ac1714148'} from 'ACTIONS_MODULE1'\nexport {deleteStudioAction as '40273ea227268ba866faf368020cc212388113d420'} from 'ACTIONS_MODULE1'\nexport {fetchCampaigns as '005b4f95552a6f7e2456ac2e03dfdbd67550265893'} from 'ACTIONS_MODULE2'\nexport {createCampaign as '4077a815a43b092be3404c0672409bd7374c1e2b6e'} from 'ACTIONS_MODULE2'\nexport {updateCampaign as '406357e0a4ac14f7dae8bf63108d95db3199343a9b'} from 'ACTIONS_MODULE2'\nexport {deleteCampaign as '401ea65fe157d237b2079b3f31164b4998f5ff5edd'} from 'ACTIONS_MODULE2'\nexport {fetchStudios as '00622baa97a1d191237b2c40df4482d18355dce376'} from 'ACTIONS_MODULE2'\n","\"use server\";\n\nimport { v4 as uuidv4 } from \"uuid\";\nimport { getAllStudios } from \"@/lib/db-studio\";\nimport {\n    getAllCampaignsFromFirestore,\n    saveCampaignToFirestore,\n    deleteCampaignFromFirestore,\n    Campaign\n} from \"@/lib/db-firestore\";\n\n// Get all campaigns\nexport async function fetchCampaigns(): Promise<Campaign[]> {\n    return getAllCampaignsFromFirestore();\n}\n\n// Get studios (for target selection)\nexport async function fetchStudios() {\n    return await getAllStudios();\n}\n\n// Create new campaign\nexport async function createCampaign(data: {\n    title: string;\n    description: string;\n    discountType: \"percentage\" | \"fixed\";\n    discountValue: number;\n    target: \"all\" | \"specific\";\n    targetStudioIds: string[];\n    startDate: string;\n    endDate: string;\n    isActive: boolean;\n}): Promise<{ success: boolean; campaignId: string }> {\n    const newCampaign: Campaign = {\n        id: uuidv4(),\n        ...data,\n        createdAt: new Date().toISOString(),\n    };\n\n    await saveCampaignToFirestore(newCampaign);\n\n    return { success: true, campaignId: newCampaign.id };\n}\n\n// Update campaign\nexport async function updateCampaign(\n    data: Campaign\n): Promise<{ success: boolean }> {\n    try {\n        await saveCampaignToFirestore(data);\n        return { success: true };\n    } catch (e) {\n        return { success: false };\n    }\n}\n\n// Delete campaign\nexport async function deleteCampaign(id: string): Promise<{ success: boolean }> {\n    try {\n        await deleteCampaignFromFirestore(id);\n        return { success: true };\n    } catch (e) {\n        return { success: false };\n    }\n}\n\n// Get active campaigns for a specific studio\nexport async function getActiveCampaignsForStudio(\n    studioId: string\n): Promise<Campaign[]> {\n    const campaigns = await fetchCampaigns();\n    const today = new Date().toISOString().split(\"T\")[0];\n\n    return campaigns.filter(\n        (campaign) =>\n            campaign.isActive &&\n            campaign.startDate <= today &&\n            campaign.endDate >= today &&\n            (campaign.target === \"all\" ||\n                campaign.targetStudioIds.includes(studioId))\n    );\n}\n"],"names":[],"mappings":"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"}