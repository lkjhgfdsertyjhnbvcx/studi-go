module.exports=[22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},35649,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(68083)},87735,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},60330,a=>{"use strict";var b=a.i(66680);let c={randomUUID:b.randomUUID},d=new Uint8Array(256),e=d.length,f=[];for(let a=0;a<256;++a)f.push((a+256).toString(16).slice(1));a.s(["v4",0,function(a,g,h){if(c.randomUUID&&!g&&!a)return c.randomUUID();var i=a,j=h;let k=(i=i||{}).random??i.rng?.()??(e>d.length-16&&((0,b.randomFillSync)(d),e=0),d.slice(e,e+=16));if(k.length<16)throw Error("Random bytes length must be >= 16");if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,g){if((j=j||0)<0||j+16>g.length)throw RangeError(`UUID byte range ${j}:${j+15} is out of buffer bounds`);for(let a=0;a<16;++a)g[j+a]=k[a];return g}return function(a,b=0){return(f[a[b+0]]+f[a[b+1]]+f[a[b+2]]+f[a[b+3]]+"-"+f[a[b+4]]+f[a[b+5]]+"-"+f[a[b+6]]+f[a[b+7]]+"-"+f[a[b+8]]+f[a[b+9]]+"-"+f[a[b+10]]+f[a[b+11]]+f[a[b+12]]+f[a[b+13]]+f[a[b+14]]+f[a[b+15]]).toLowerCase()}(k)}],60330)},48463,a=>{"use strict";var b=a.i(35649),c=a.i(22734),d=a.i(14747),e=a.i(60330),f=a.i(50872),g=a.i(87735);let h=d.default.join(process.cwd(),"data","users.json"),i=new f.Resend(process.env.RESEND_API_KEY),j=()=>{if(!c.default.existsSync(h))return[];try{let a=c.default.readFileSync(h,"utf-8");return JSON.parse(a)}catch{return[]}},k=a=>{c.default.writeFileSync(h,JSON.stringify(a,null,2))};async function l(a){let b=a.get("email");if(!b)return{success:!1,message:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚"};let c=j(),d=c.findIndex(a=>a.email===b),f=c[d];if(!f)return{success:!1,message:"ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚"};let g=(0,e.v4)(),h=Date.now()+36e5;f.resetToken=g,f.resetTokenExpiry=h,c[d]=f,k(c);let l=process.env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000",m=`${l}/reset-password?token=${g}`;if(!process.env.RESEND_API_KEY)return console.log(`[Reset Password] âš ï¸ No Resend API Key. DEV MODE: Reset URL is ${m}`),{success:!0,message:"é€ä¿¡ã—ã¾ã—ãŸ(Dev: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„)"};try{let{error:a}=await i.emails.send({from:"Studi-Go <onboarding@resend.dev>",to:b,subject:"ã€Studi-Goã€‘ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®šã®ã”æ¡ˆå†…",html:`
                    <h1>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®š</h1>
                    <p>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å†è¨­å®šãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚</p>
                    <p>ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚</p>
                    <p><a href="${m}">${m}</a></p>
                    <p>ã“ã®ãƒªãƒ³ã‚¯ã¯1æ™‚é–“æœ‰åŠ¹ã§ã™ã€‚</p>
                    <p>ãŠå¿ƒå½“ãŸã‚ŠãŒãªã„å ´åˆã¯ã€ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚’ç„¡è¦–ã—ã¦ãã ã•ã„ã€‚</p>
                `});if(a)return console.error("[Reset Password] âŒ Resend Error (Returned):",a),console.log(`[Reset Password] âš ï¸ Email failed. DEV MODE: Reset URL is ${m}`),{success:!0,message:`(é–‹ç™ºãƒ¢ãƒ¼ãƒ‰) ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸãŒã€ãƒªã‚»ãƒƒãƒˆURLã‚’ç™ºè¡Œã—ã¾ã—ãŸ: ${m}`};return console.log(`[Reset Password] ğŸ“§ Email sent to ${b} via Resend.`),{success:!0,message:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®šç”¨ã®ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚"}}catch(a){return console.error("[Reset Password] âŒ Failed to send email via Resend (Exception):",a),console.log(`[Reset Password] ğŸ§ª DEV MODE: Reset URL is ${m}`),{success:!0,message:"ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚(Dev: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç¢ºèª)"}}}async function m(a){let b=a.get("token"),c=a.get("password");if(!b||!c)return{success:!1,message:"ç„¡åŠ¹ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã™ã€‚"};let d=j(),e=d.findIndex(a=>a.resetToken===b),f=d[e];return f?f.resetTokenExpiry&&f.resetTokenExpiry<Date.now()?{success:!1,message:"ãƒªãƒ³ã‚¯ã®æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã†ä¸€åº¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ãã ã•ã„ã€‚"}:(f.password=c,delete f.resetToken,delete f.resetTokenExpiry,d[e]=f,k(d),{success:!0,message:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¾ã—ãŸã€‚ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚"}):{success:!1,message:"ç„¡åŠ¹ãªã¾ãŸã¯æœŸé™åˆ‡ã‚Œã®ãƒªãƒ³ã‚¯ã§ã™ã€‚"}}(0,g.ensureServerEntryExports)([l,m]),(0,b.registerServerReference)(l,"408a5b8f0a16289985689f7f77e61c31909003d02d",null),(0,b.registerServerReference)(m,"406d50826d0311f4a2ba4016d0c87eb0c801506ec1",null),a.s(["resetPasswordAction",()=>m,"sendPasswordResetAction",()=>l])},36466,a=>{"use strict";var b=a.i(48463);a.s([],99517),a.i(99517),a.s(["406d50826d0311f4a2ba4016d0c87eb0c801506ec1",()=>b.resetPasswordAction],36466)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__37caae07._.js.map