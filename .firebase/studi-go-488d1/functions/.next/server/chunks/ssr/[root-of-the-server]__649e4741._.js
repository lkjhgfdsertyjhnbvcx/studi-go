module.exports=[22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},35649,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(68083)},87735,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},66680,(a,b,c)=>{b.exports=a.x("node:crypto",()=>require("node:crypto"))},60330,a=>{"use strict";var b=a.i(66680);let c={randomUUID:b.randomUUID},d=new Uint8Array(256),e=d.length,f=[];for(let a=0;a<256;++a)f.push((a+256).toString(16).slice(1));a.s(["v4",0,function(a,g,h){if(c.randomUUID&&!g&&!a)return c.randomUUID();var i=a,j=h;let k=(i=i||{}).random??i.rng?.()??(e>d.length-16&&((0,b.randomFillSync)(d),e=0),d.slice(e,e+=16));if(k.length<16)throw Error("Random bytes length must be >= 16");if(k[6]=15&k[6]|64,k[8]=63&k[8]|128,g){if((j=j||0)<0||j+16>g.length)throw RangeError(`UUID byte range ${j}:${j+15} is out of buffer bounds`);for(let a=0;a<16;++a)g[j+a]=k[a];return g}return function(a,b=0){return(f[a[b+0]]+f[a[b+1]]+f[a[b+2]]+f[a[b+3]]+"-"+f[a[b+4]]+f[a[b+5]]+"-"+f[a[b+6]]+f[a[b+7]]+"-"+f[a[b+8]]+f[a[b+9]]+"-"+f[a[b+10]]+f[a[b+11]]+f[a[b+12]]+f[a[b+13]]+f[a[b+14]]+f[a[b+15]]).toLowerCase()}(k)}],60330)},83264,a=>{"use strict";var b=a.i(35649),c=a.i(54010),d=a.i(20191),e=a.i(60330);async function f(){return(0,c.getAllStudiosFromFirestore)()}async function g(a){return(0,c.getStudioByIdFromFirestore)(a)}async function h(a){try{return await (0,c.saveStudioToFirestore)(a),(0,d.revalidatePath)("/studios"),(0,d.revalidatePath)(`/studios/${a.id}`),{success:!0,message:"Studio saved successfully."}}catch(a){return{success:!1,message:a.message}}}async function i(){let a={id:(0,e.v4)(),storeName:"New Studio",representative:"",manager:"",contactPerson:"",address:"",phone:"",email:"",businessHours:{weekday:"10:00-22:00",saturday:"10:00-22:00",sundayHoliday:"10:00-22:00"},url:"",studioCount:0,rooms:[],studentDiscount:{enabled:!1,discountType:"amount",value:0},otherDiscounts:[],personalPracticeSettings:{enabled:!0,reservationWindowType:"days",reservationWindowValue:1,maxPeople:2},designSettings:{logoSize:100,backgroundColor:"#000000",backgroundType:"color"},equipmentOptions:[],createdAt:new Date().toISOString()};return await (0,c.saveStudioToFirestore)(a),(0,d.revalidatePath)("/studios"),a.id}async function j(a){return await (0,c.deleteStudioFromFirestore)(a),(0,d.revalidatePath)("/studios"),{success:!0}}(0,a.i(87735).ensureServerEntryExports)([f,g,h,i,j]),(0,b.registerServerReference)(f,"00e4c93b8752da6310062bf7641dee775c057867ca",null),(0,b.registerServerReference)(g,"40f3f415047df7d6f80b4eeb845beddaafcd2f52bb",null),(0,b.registerServerReference)(h,"404b0dc80b6afb3ebc6ef733601d064b54b160fee4",null),(0,b.registerServerReference)(i,"00c0bbb4b1415d1cd7c9373ddf7699da1ac1714148",null),(0,b.registerServerReference)(j,"40273ea227268ba866faf368020cc212388113d420",null),a.s(["createNewStudioAction",()=>i,"deleteStudioAction",()=>j,"fetchStudio",()=>g,"fetchStudios",()=>f,"updateStudio",()=>h])},24380,a=>{"use strict";var b=a.i(35649),c=a.i(12437),d=a.i(54010);async function e(a){let b=a.get("email"),e=a.get("password");if(!b)return{success:!1,message:"メールアドレスを入力してください。"};let f=(await (0,d.getAllUsersFromFirestore)()).find(a=>a.email===b);return f?f.password?f.password!==e?{success:!1,message:"パスワードが間違っています。"}:((await (0,c.cookies)()).set("__session",JSON.stringify({type:"user",id:f.id,name:f.name}),{httpOnly:!0,secure:!0,path:"/",maxAge:604800}),{success:!0,message:"ログインしました。"}):{success:!1,message:"パスワードが設定されていません。「パスワードをお忘れですか？」から設定を行ってください。"}:{success:!1,message:"ユーザーが見つかりません。アカウント登録はお済みですか？"}}async function f(){return(await (0,c.cookies)()).delete("__session"),{success:!0}}async function g(){let a=await (0,c.cookies)(),b=a.get("__session")?.value;if(!b)return null;try{let a=JSON.parse(b);if("user"!==a.type)return null;return(await (0,d.getAllUsersFromFirestore)()).find(b=>b.id===a.id)||null}catch(a){return null}}(0,a.i(87735).ensureServerEntryExports)([e,f,g]),(0,b.registerServerReference)(e,"40fd6d66984b29bd424bd497fbe1777d05b6a3fb74",null),(0,b.registerServerReference)(f,"009837b3c5fe64d738d0768ba5c33970c0b39a09c2",null),(0,b.registerServerReference)(g,"00fd941a7429035171e0b748ef78c5506f25c02154",null),a.s(["getCurrentUser",()=>g,"loginAction",()=>e,"logoutAction",()=>f])},76177,a=>{"use strict";var b=a.i(35649),c=a.i(24380),d=a.i(54010),e=a.i(87735);let f=async a=>(0,d.getUserByIdFromFirestore)(a);async function g(a){let b=await (0,c.getCurrentUser)();if(!b)return{success:!1,message:"Not logged in"};let e=await (0,d.getUserByIdFromFirestore)(b.id);if(!e)return{success:!1,message:"User not found"};let f=e.myStudios||[];return f.includes(a)?e.myStudios=f.filter(b=>b!==a):e.myStudios=[...f,a],await (0,d.saveUserToFirestore)(e),{success:!0,myStudios:e.myStudios}}async function h(a){let b=await (0,c.getCurrentUser)();if(!b)return{success:!1,message:"Not logged in"};let e=await (0,d.getUserByIdFromFirestore)(b.id);if(!e)return{success:!1,message:"User not found"};let f=e.myStudios||[];return f.includes(a)||(e.myStudios=[...f,a],await (0,d.saveUserToFirestore)(e)),{success:!0,myStudios:e.myStudios}}async function i(){let a=await (0,c.getCurrentUser)();return a&&a.myStudios||[]}(0,e.ensureServerEntryExports)([f,g,h,i]),(0,b.registerServerReference)(f,"403ca1312ea93f7fdec7a89fa7fffd634d584f59b7",null),(0,b.registerServerReference)(g,"401c848a4839b5495e326dbd9527e980e56b2e81d0",null),(0,b.registerServerReference)(h,"40214df9e35c0b93cc6363e09c49015f9b23d89af7",null),(0,b.registerServerReference)(i,"00fe4763763c9e25e7b0c23dc51f4ad6547485b042",null),a.s(["addMyStudioAction",()=>h,"getMyStudiosAction",()=>i,"toggleMyStudioAction",()=>g])},33451,a=>{"use strict";var b=a.i(83264),c=a.i(76177),d=a.i(24380);a.s([],78798),a.i(78798),a.s(["009837b3c5fe64d738d0768ba5c33970c0b39a09c2",()=>d.logoutAction,"00e4c93b8752da6310062bf7641dee775c057867ca",()=>b.fetchStudios,"00fd941a7429035171e0b748ef78c5506f25c02154",()=>d.getCurrentUser,"00fe4763763c9e25e7b0c23dc51f4ad6547485b042",()=>c.getMyStudiosAction,"401c848a4839b5495e326dbd9527e980e56b2e81d0",()=>c.toggleMyStudioAction],33451)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__649e4741._.js.map