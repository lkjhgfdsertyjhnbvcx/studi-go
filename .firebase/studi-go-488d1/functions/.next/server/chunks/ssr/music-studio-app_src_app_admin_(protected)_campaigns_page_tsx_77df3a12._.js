module.exports=[80846,a=>{"use strict";var b=a.i(15334),c=a.i(66757),d=a.i(4715),e=a.i(10425),f=a.i(97438),g=a.i(11866),h=a.i(76483),i=a.i(34183),j=a.i(86378),k=a.i(86176),l=a.i(89799),m=a.i(13035);let n=(0,m.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var o=a.i(86907),p=a.i(37869);let q=(0,m.default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var r=a.i(19817),s=a.i(50048),t=a.i(10623);let u=(0,t.createServerReference)("005b4f95552a6f7e2456ac2e03dfdbd67550265893",t.callServer,void 0,t.findSourceMapURL,"fetchCampaigns"),v=(0,t.createServerReference)("4077a815a43b092be3404c0672409bd7374c1e2b6e",t.callServer,void 0,t.findSourceMapURL,"createCampaign"),w=(0,t.createServerReference)("406357e0a4ac14f7dae8bf63108d95db3199343a9b",t.callServer,void 0,t.findSourceMapURL,"updateCampaign"),x=(0,t.createServerReference)("401ea65fe157d237b2079b3f31164b4998f5ff5edd",t.callServer,void 0,t.findSourceMapURL,"deleteCampaign"),y=(0,t.createServerReference)("00622baa97a1d191237b2c40df4482d18355dce376",t.callServer,void 0,t.findSourceMapURL,"fetchStudios");function z(){let[a,m]=(0,c.useState)([]),[t,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)({title:"",description:"",discountType:"percentage",discountValue:0,target:"all",targetStudioIds:[],startDate:"",endDate:"",isActive:!0}),I=async()=>{B(!0);let[a,b]=await Promise.all([u(),y()]);m(a),z(b),B(!1)};(0,c.useEffect)(()=>{I()},[]);let J=async a=>{a.preventDefault(),E?await w({...G,id:E.id,createdAt:E.createdAt}):await v(G),D(!1),I()},K=async a=>{confirm("このキャンペーンを削除しますか？")&&(await x(a),I())},L=async a=>{await w({...a,isActive:!a.isActive}),I()};return A?(0,b.jsxs)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:[(0,b.jsx)(s.Loader2,{className:"animate-spin mr-2"})," Loading..."]}):(0,b.jsx)("div",{className:"min-h-screen bg-black text-white p-10 font-sans",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8 border-b border-white/10 pb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-cyan-400 mb-2",children:"キャンペーン管理"}),(0,b.jsx)("p",{className:"text-gray-400",children:"全店舗・個別店舗向けキャンペーンを管理"})]}),(0,b.jsxs)(i.Dialog,{open:C,onOpenChange:D,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{onClick:()=>{F(null),H({title:"",description:"",discountType:"percentage",discountValue:0,target:"all",targetStudioIds:[],startDate:"",endDate:"",isActive:!0}),D(!0)},className:"bg-cyan-500 hover:bg-cyan-600 text-black font-bold",children:[(0,b.jsx)(l.Plus,{className:"mr-2 h-4 w-4"})," 新規作成"]})}),(0,b.jsxs)(i.DialogContent,{className:"bg-slate-900 border-white/10 text-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{className:"text-cyan-400",children:E?"キャンペーン編集":"新規キャンペーン"})}),(0,b.jsxs)("form",{onSubmit:J,className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"title",children:"タイトル"}),(0,b.jsx)(f.Input,{id:"title",value:G.title,onChange:a=>H({...G,title:a.target.value}),className:"bg-slate-800 border-white/10 text-white",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"description",children:"説明"}),(0,b.jsx)(h.Textarea,{id:"description",value:G.description,onChange:a=>H({...G,description:a.target.value}),className:"bg-slate-800 border-white/10 text-white",rows:3,required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"discountType",children:"割引タイプ"}),(0,b.jsxs)(j.Select,{value:G.discountType,onValueChange:a=>H({...G,discountType:a}),children:[(0,b.jsx)(j.SelectTrigger,{className:"bg-slate-800 border-white/10 text-white",children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsxs)(j.SelectContent,{className:"bg-slate-800 border-white/10 text-white",children:[(0,b.jsx)(j.SelectItem,{value:"percentage",children:"パーセント(%)"}),(0,b.jsx)(j.SelectItem,{value:"fixed",children:"固定額(¥)"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(g.Label,{htmlFor:"discountValue",children:["割引値"," ","percentage"===G.discountType?"(%)":"(¥)"]}),(0,b.jsx)(f.Input,{id:"discountValue",type:"number",value:G.discountValue,onChange:a=>H({...G,discountValue:Number(a.target.value)}),className:"bg-slate-800 border-white/10 text-white",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"target",children:"対象"}),(0,b.jsxs)(j.Select,{value:G.target,onValueChange:a=>H({...G,target:a,targetStudioIds:"all"===a?[]:G.targetStudioIds}),children:[(0,b.jsx)(j.SelectTrigger,{className:"bg-slate-800 border-white/10 text-white",children:(0,b.jsx)(j.SelectValue,{})}),(0,b.jsxs)(j.SelectContent,{className:"bg-slate-800 border-white/10 text-white",children:[(0,b.jsx)(j.SelectItem,{value:"all",children:"全店舗"}),(0,b.jsx)(j.SelectItem,{value:"specific",children:"個別店舗"})]})]})]}),"specific"===G.target&&(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"対象スタジオ"}),(0,b.jsx)("div",{className:"space-y-2 mt-2 max-h-40 overflow-y-auto bg-slate-800 p-3 rounded border border-white/10",children:t.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-white/5 p-2 rounded",children:[(0,b.jsx)("input",{type:"checkbox",checked:G.targetStudioIds.includes(a.id),onChange:b=>{b.target.checked?H({...G,targetStudioIds:[...G.targetStudioIds,a.id]}):H({...G,targetStudioIds:G.targetStudioIds.filter(b=>b!==a.id)})},className:"rounded border-white/20"}),(0,b.jsx)("span",{className:"text-sm",children:a.storeName})]},a.id))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"startDate",children:"開始日"}),(0,b.jsx)(f.Input,{id:"startDate",type:"date",value:G.startDate,onChange:a=>H({...G,startDate:a.target.value}),className:"bg-slate-800 border-white/10 text-white",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"endDate",children:"終了日"}),(0,b.jsx)(f.Input,{id:"endDate",type:"date",value:G.endDate,onChange:a=>H({...G,endDate:a.target.value}),className:"bg-slate-800 border-white/10 text-white",required:!0})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"isActive",checked:G.isActive,onChange:a=>H({...G,isActive:a.target.checked}),className:"rounded border-white/20"}),(0,b.jsx)(g.Label,{htmlFor:"isActive",className:"cursor-pointer",children:"アクティブ"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>D(!1),className:"border-white/20 text-white hover:bg-white/5",children:"キャンセル"}),(0,b.jsx)(e.Button,{type:"submit",className:"bg-cyan-500 hover:bg-cyan-600 text-black",children:E?"更新":"作成"})]})]})]})]})]}),(0,b.jsx)("div",{className:"grid gap-6",children:0===a.length?(0,b.jsx)(d.Card,{className:"bg-slate-900 border-white/10",children:(0,b.jsx)(d.CardContent,{className:"py-20 text-center text-gray-500",children:"キャンペーンがありません。右上のボタンから作成してください。"})}):a.map(a=>(0,b.jsxs)(d.Card,{className:`bg-slate-900 border ${a.isActive?"border-cyan-500/30":"border-white/10"}`,children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(p.Megaphone,{className:"h-5 w-5 text-cyan-400"}),(0,b.jsx)(d.CardTitle,{className:"text-xl text-white",children:a.title}),a.isActive&&(0,b.jsx)(k.Badge,{className:"bg-green-900/30 text-green-400 border-green-500/30",children:"Active"}),!a.isActive&&(0,b.jsx)(k.Badge,{className:"bg-gray-700/30 text-gray-400 border-gray-500/30",children:"Inactive"})]}),(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:a.description})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/5",onClick:()=>{F(a),H({title:a.title,description:a.description,discountType:a.discountType,discountValue:a.discountValue,target:a.target,targetStudioIds:a.targetStudioIds,startDate:a.startDate,endDate:a.endDate,isActive:a.isActive}),D(!0)},children:(0,b.jsx)(n,{className:"h-3 w-3"})}),(0,b.jsx)(e.Button,{size:"sm",variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-900/20",onClick:()=>K(a.id),children:(0,b.jsx)(o.Trash2,{className:"h-3 w-3"})})]})]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q,{className:"h-4 w-4 text-cyan-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500 text-xs",children:"期間"}),(0,b.jsxs)("div",{className:"text-white",children:[a.startDate," ~ ",a.endDate]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Target,{className:"h-4 w-4 text-cyan-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500 text-xs",children:"対象"}),(0,b.jsx)("div",{className:"text-white",children:"all"===a.target?"全店舗":`${a.targetStudioIds.length}店舗`})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500 text-xs",children:"割引"}),(0,b.jsx)("div",{className:"text-cyan-400 font-bold",children:"percentage"===a.discountType?`${a.discountValue}% OFF`:`\xa5${a.discountValue.toLocaleString()} OFF`})]}),(0,b.jsx)("div",{className:"flex items-center justify-end",children:(0,b.jsx)(e.Button,{size:"sm",variant:a.isActive?"outline":"default",className:a.isActive?"border-yellow-500/30 text-yellow-400 hover:bg-yellow-900/20":"bg-cyan-500 hover:bg-cyan-600 text-black",onClick:()=>L(a),children:a.isActive?"無効化":"有効化"})})]})})]},a.id))})]})})}a.s(["default",()=>z],80846)}];

//# sourceMappingURL=music-studio-app_src_app_admin_%28protected%29_campaigns_page_tsx_77df3a12._.js.map