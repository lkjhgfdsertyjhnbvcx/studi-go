module.exports=[53903,(a,b,c)=>{!function(c,d){if("function"==typeof define&&define.amd){let b;void 0!==(b=d())&&a.v(b)}else b.exports?b.exports=d():c.sha256=d()}(a.e,function(){var a=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;n<64;p++)if(!o[p]){for(d=0;d<313;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="";b[h]%64-56;)b+="\0";for(d=0;d<b[h];d++){if((e=b.charCodeAt(d))>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(e=0,j[j[h]]=k/g|0,j[j[h]]=k;e<j[h];){var q=j.slice(e,e+=16),r=l;for(d=0,l=l.slice(0,8);d<64;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=d<16?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0);(l=[w+((c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]))|0].concat(l))[4]=l[4]+w|0}for(d=0;d<8;d++)l[d]=l[d]+r[d]|0}for(d=0;d<8;d++)for(e=3;e+1;e--){var x=l[d]>>8*e&255;i+=(x<16?0:"")+x.toString(16)}return i};return a.code='var sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\\x80";b[h]%64-56;)b+="\\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};',a})},21448,a=>{"use strict";var b=a.i(66757),c="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||a.g||{},d={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};if(d.arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(a){return a&&e.indexOf(Object.prototype.toString.call(a))>-1};function g(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(a)||""===a)throw TypeError('Invalid character in header field name: "'+a+'"');return a.toLowerCase()}function h(a){return"string"!=typeof a&&(a=String(a)),a}function i(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return d.iterable&&(b[Symbol.iterator]=function(){return b}),b}function j(a){this.map={},a instanceof j?a.forEach(function(a,b){this.append(b,a)},this):Array.isArray(a)?a.forEach(function(a){if(2!=a.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+a.length);this.append(a[0],a[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function k(a){if(!a._noBody){if(a.bodyUsed)return Promise.reject(TypeError("Already read"));a.bodyUsed=!0}}function l(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function m(a){var b=new FileReader,c=l(b);return b.readAsArrayBuffer(a),c}function n(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);return b.set(new Uint8Array(a)),b.buffer}function o(){return this.bodyUsed=!1,this._initBody=function(a){if(this.bodyUsed=this.bodyUsed,this._bodyInit=a,a)if("string"==typeof a)this._bodyText=a;else if(d.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(d.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(d.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else{var b;d.arrayBuffer&&d.blob&&(b=a)&&DataView.prototype.isPrototypeOf(b)?(this._bodyArrayBuffer=n(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||f(a))?this._bodyArrayBuffer=n(a):this._bodyText=a=Object.prototype.toString.call(a)}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var a=k(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var a=k(this);return a||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(d.blob)return this.blob().then(m);throw Error("could not read as ArrayBuffer")},this.text=function(){var a,b,c,d,e,f=k(this);if(f)return f;if(this._bodyBlob)return a=this._bodyBlob,c=l(b=new FileReader),e=(d=/charset=([A-Za-z0-9_-]+)/.exec(a.type))?d[1]:"utf-8",b.readAsText(a,e),c;if(this._bodyArrayBuffer)return Promise.resolve(function(a){for(var b=new Uint8Array(a),c=Array(b.length),d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);return c.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},d.formData&&(this.formData=function(){return this.text().then(r)}),this.json=function(){return this.text().then(JSON.parse)},this}j.prototype.append=function(a,b){a=g(a),b=h(b);var c=this.map[a];this.map[a]=c?c+", "+b:b},j.prototype.delete=function(a){delete this.map[g(a)]},j.prototype.get=function(a){return a=g(a),this.has(a)?this.map[a]:null},j.prototype.has=function(a){return this.map.hasOwnProperty(g(a))},j.prototype.set=function(a,b){this.map[g(a)]=h(b)},j.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)},j.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),i(a)},j.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),i(a)},j.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),i(a)},d.iterable&&(j.prototype[Symbol.iterator]=j.prototype.entries);var p=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function q(a,b){if(!(this instanceof q))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var d,e,f=(b=b||{}).body;if(a instanceof q){if(a.bodyUsed)throw TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new j(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,f||null==a._bodyInit||(f=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);if(this.credentials=b.credentials||this.credentials||"same-origin",(b.headers||!this.headers)&&(this.headers=new j(b.headers)),this.method=(e=(d=b.method||this.method||"GET").toUpperCase(),p.indexOf(e)>-1?e:d),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal||function(){if("AbortController"in c)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&f)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(f),("GET"===this.method||"HEAD"===this.method)&&("no-store"===b.cache||"no-cache"===b.cache)){var g=/([?&])_=[^&]*/;g.test(this.url)?this.url=this.url.replace(g,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function r(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function s(a,b){if(!(this instanceof s))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(b||(b={}),this.type="default",this.status=void 0===b.status?200:b.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===b.statusText?"":""+b.statusText,this.headers=new j(b.headers),this.url=b.url||"",this._initBody(a)}q.prototype.clone=function(){return new q(this,{body:this._bodyInit})},o.call(q.prototype),o.call(s.prototype),s.prototype.clone=function(){return new s(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new j(this.headers),url:this.url})},s.error=function(){var a=new s(null,{status:200,statusText:""});return a.ok=!1,a.status=0,a.type="error",a};var t=[301,302,303,307,308];s.redirect=function(a,b){if(-1===t.indexOf(b))throw RangeError("Invalid status code");return new s(null,{status:b,headers:{location:a}})};var u=c.DOMException;try{new u}catch(a){(u=function(a,b){this.message=a,this.name=b;var c=Error(a);this.stack=c.stack}).prototype=Object.create(Error.prototype),u.prototype.constructor=u}function v(a,b){return new Promise(function(e,f){var i=new q(a,b);if(i.signal&&i.signal.aborted)return f(new u("Aborted","AbortError"));var k=new XMLHttpRequest;function l(){k.abort()}if(k.onload=function(){var a,b,c={statusText:k.statusText,headers:(a=k.getAllResponseHeaders()||"",b=new j,a.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(a){return 0===a.indexOf("\n")?a.substr(1,a.length):a}).forEach(function(a){var c=a.split(":"),d=c.shift().trim();if(d){var e=c.join(":").trim();try{b.append(d,e)}catch(a){console.warn("Response "+a.message)}}}),b)};0===i.url.indexOf("file://")&&(k.status<200||k.status>599)?c.status=200:c.status=k.status,c.url="responseURL"in k?k.responseURL:c.headers.get("X-Request-URL");var d="response"in k?k.response:k.responseText;setTimeout(function(){e(new s(d,c))},0)},k.onerror=function(){setTimeout(function(){f(TypeError("Network request failed"))},0)},k.ontimeout=function(){setTimeout(function(){f(TypeError("Network request timed out"))},0)},k.onabort=function(){setTimeout(function(){f(new u("Aborted","AbortError"))},0)},k.open(i.method,function(a){try{return""===a&&c.location.href?c.location.href:a}catch(b){return a}}(i.url),!0),"include"===i.credentials?k.withCredentials=!0:"omit"===i.credentials&&(k.withCredentials=!1),"responseType"in k&&(d.blob?k.responseType="blob":d.arrayBuffer&&(k.responseType="arraybuffer")),b&&"object"==typeof b.headers&&!(b.headers instanceof j||c.Headers&&b.headers instanceof c.Headers)){var m=[];Object.getOwnPropertyNames(b.headers).forEach(function(a){m.push(g(a)),k.setRequestHeader(a,h(b.headers[a]))}),i.headers.forEach(function(a,b){-1===m.indexOf(b)&&k.setRequestHeader(b,a)})}else i.headers.forEach(function(a,b){k.setRequestHeader(b,a)});i.signal&&(i.signal.addEventListener("abort",l),k.onreadystatechange=function(){4===k.readyState&&i.signal.removeEventListener("abort",l)}),k.send(void 0===i._bodyInit?null:i._bodyInit)})}v.polyfill=!0,c.fetch||(c.fetch=v,c.Headers=j,c.Request=q,c.Response=s);var w=a.i(63919);(x=y||(y={}))[x.DEBUG=1]="DEBUG",x[x.INFO=2]="INFO",x[x.WARN=3]="WARN",x[x.ERROR=4]="ERROR";var x,y,z,A=new(function(){function a(a){void 0===a&&(a=y.INFO),this.logLevel=a,this._debug=console.debug,this._info=console.info,this._warn=console.warn,this._error=console.error}return a.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.logLevel<=y.DEBUG&&(a.unshift("[DEBUG]"),this._debug.apply(this,(0,w.__spreadArray)([],(0,w.__read)(a),!1)))},a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.logLevel<=y.INFO&&(a.unshift("[INFO]"),this._info.apply(this,(0,w.__spreadArray)([],(0,w.__read)(a),!1)))},a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.logLevel<=y.WARN&&(a.unshift("[WARN]"),this._warn.apply(this,(0,w.__spreadArray)([],(0,w.__read)(a),!1)))},a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.logLevel<=y.ERROR&&(a.unshift("[ERROR]"),this._error.apply(this,(0,w.__spreadArray)([],(0,w.__read)(a),!1)))},a}())(Number("3")),B=function(a,b){this._driver=a,this.liff=b,this.hooks=this._driver.hooks,this.internalHooks=this._driver.internalHooks},C=function(a,b){this._driver=a,this.liff=b,this.hooks=this._driver.hooks},D=function(){function a(a,b){this.pluginCtx=new C(a,b),this.moduleCtx=new B(a,b)}return Object.defineProperty(a.prototype,"pluginContext",{get:function(){return this.pluginCtx},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"moduleContext",{get:function(){return this.moduleCtx},enumerable:!1,configurable:!0}),a}(),E=function(){function a(){this.modules=new Map,this.hooks={},this.internalHooks={}}return a.prototype.addModule=function(a,b){this.modules.set(a,b),b.hooks&&(this.hooks[a]=Object.entries(b.hooks).reduce(function(a,b){var c,d=(0,w.__read)(b,2),e=d[0],f=d[1];return(0,w.__assign)((0,w.__assign)({},a),((c={})[e]=f.on.bind(f),c))},{})),"internalHooks"in b&&b.internalHooks&&(this.internalHooks[a]=Object.entries(b.internalHooks).reduce(function(a,b){var c,d=(0,w.__read)(b,2),e=d[0],f=d[1];return(0,w.__assign)((0,w.__assign)({},a),((c={})[e]=f.on.bind(f),c))},{}))},a.prototype.hasModule=function(a){return this.modules.has(a)},a}(),F=function(){},G=function(a){return a instanceof F},H=function(a){function b(b,c,d){var e=a.call(this)||this;return e.driver=b,e.contextHolder=c,e.option=d,e}return(0,w.__extends)(b,a),b.prototype.install=function(){return this.factory(this.driver,this.contextHolder)},Object.defineProperty(b.prototype,"name",{get:function(){return"use"},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"defaultOption",{get:function(){return{namespacePrefix:"$"}},enumerable:!1,configurable:!0}),b.prototype.factory=function(a,b){var c=Object.assign({},this.defaultOption,this.option).namespacePrefix;return function(d,e){if(!d||"function"!=typeof d.install||"string"!=typeof d.name)return A.warn("To install the plugin, you need to define the `name` property and the `install` method."),this;var f=G(d)?d.name:"".concat(c).concat(d.name);if(a.hasModule(f))return this;var g=G(d)?d.install.call(d,b.moduleContext,e):d.install.call(d,b.pluginContext,e);return this["".concat(f)]?(A.warn("There is a duplicate plugin name. `".concat(f,"` plugin namespace will be override.")),this["".concat(f)]=g):void 0!==g&&(this["".concat(f)]=g),a.addModule(f,d),this}},b}(F),I=new Promise(function(a){z=a}),J="UNKNOWN",K="UNAUTHORIZED",L="INVALID_ARGUMENT",M="INIT_FAILED",N="FORBIDDEN",O="INVALID_CONFIG",P="INVALID_ID_TOKEN",Q="CREATE_SUBWINDOW_FAILED",R="EXCEPTION_IN_SUBWINDOW",S="liffEvent",T="LIFF_STORE",U="https://liff.".concat("line.me","/"),V="https://miniapp.".concat("line.me","/"),W={ACCESS_TOKEN:"accessToken",ID_TOKEN:"IDToken",DECODED_ID_TOKEN:"decodedIDToken",FEATURE_TOKEN:"featureToken",LOGIN_TMP:"loginTmp",CONFIG:"config",CONTEXT:"context",EXPIRES:"expires",RAW_CONTEXT:"rawContext",CLIENT_ID:"clientId",IS_SUBSEQUENT_LIFF_APP:"isSubsequentLiffApp",MST_CHALLENGE:"mstChallenge",MSIT:"msit",MST:"mst",MST_VERIFIER:"mstVerifier",APP_DATA:"appData"},X="isInClient",Y=["context_token","feature_token","access_token","id_token","client_id","mst_verifier","mst_challenge","msit"],Z=["liff.ref.source","liff.ref.medium","liff.ref.campaign","liff.ref.term","liff.ref.content"],$={INIT:"init",SUBMIT:"submit",CANCEL:"cancel",CLOSE:"close",ERROR:"error"},_="liff.subwindow",aa="healthCheck",ab=["profile","chat_message.write","openid","email"];function ac(a){return window.atob(a.replace(/-/g,"+").replace(/_/g,"/"))}function ad(a,b){if(a===b)return 0;for(var c=a.split("."),d=b.split("."),e=Math.max(c.length,d.length),f=0;f<e;f++){c[f]||(c[f]="0"),d[f]||(d[f]="0");var g=parseInt(c[f])-parseInt(d[f]);if(0!==g)return g>0?1:-1}return 0}function ae(a){var b=a.replace("#","").match(/.{2}/g)||[];if(4!==b.length)return A.warn("convertArgbToRgba: Received invalid ARGB color"),"";var c=Math.round(af(b[0])/255*100)/100,d=af(b[1]),e=af(b[2]),f=af(b[3]);return"rgba(".concat(d,", ").concat(e,", ").concat(f,", ").concat(c,")")}function af(a){return parseInt(a,16)}function ag(a){var b=a.replace("#","").match(/.{2}/g)||[];if(3!==b.length)return A.warn("convertArgbToRgba: Received invalid hex color"),"";var c=af(b[0]),d=af(b[1]),e=af(b[2]);return"".concat(c,", ").concat(d,", ").concat(e)}function ah(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a.charCodeAt(e);return c}var ai=function(a){var b=new RegExp("(?:(?:^|.*;\\s*)".concat(a,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return document.cookie.replace(b,"$1")},aj=function(a,b,c){var d=a+"="+b;if(c)for(var e in c){var f=c[e]?"=".concat(c[e]):"";d+="; ".concat(e).concat(f)}A.debug("set cookie",d),document.cookie=d},ak=function(a,b){var c="".concat(a,"=; expires=Thu, 01 Jan 1970 00:00:00 GMT");if(b)for(var d in b)c+="; ".concat(d,"=").concat(b[d]);document.cookie=c},al=new Set(["400","401","403","404","429","500"]),am=function(a){function b(b,c,d){var e=a.call(this,c,d)||this;return e.code=b,e}return(0,w.__extends)(b,a),b}(Error);function an(a,b,c){return(null==c?void 0:c.cause)&&console.error("This is the cause of LiffError described below.",c.cause),new am(a,b||"",c||{})}function ao(a){var b=a.match(/([^-]+)-[^-]+/);return b&&b[1]}var ap,aq=function(){function a(){this.map={}}return a.prototype.clear=function(){this.map={}},a.prototype.getItem=function(a){var b=this.map[a];return void 0===b?null:b},a.prototype.setItem=function(a,b){this.map[a]=b},a.prototype.removeItem=function(a){delete this.map[a]},a.prototype.key=function(a){var b=Object.keys(this.map)[a];return void 0===b?null:b},Object.defineProperty(a.prototype,"length",{get:function(){return Object.keys(this.map).length},enumerable:!1,configurable:!0}),a}(),ar=function(a){return a.replace(/^\?/,"").replace(/^#\/?/,"").split(/&+/).filter(function(a){return a.length>0}).reduce(function(a,b){var c=(0,w.__read)(b.split("=").map(decodeURIComponent),2),d=c[0],e=c[1],f=a[d];return Array.isArray(f)?f.push(e):Object.prototype.hasOwnProperty.call(a,d)?a[d]=[f,e]:a[d]=e,a},{})},as=function(a){return Object.keys(a).map(function(b){var c=a[b],d=function(a){return void 0!==a?"".concat(encodeURIComponent(b),"=").concat(encodeURIComponent(a)):encodeURIComponent(b)};return Array.isArray(c)?c.map(function(a){return d(a)}).join("&"):d(c)}).join("&")},at="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function au(a){for(var b="",c=0;c<a;c++)b+=at[Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/0x100000000*at.length)];return b}function av(a){var b=new URL(a),c=b.hash.slice(1).split("&").filter(function(a){return!Y.some(function(b){return a.startsWith("".concat(b,"="))})}).join("&");return b.hash=c,b.toString()}var aw=function(a){var b=av(a);if(b!==a){var c,d=(c=new URL(b)).toString().replace(new RegExp(String.raw(ay||(ay=(0,w.__makeTemplateObject)(["^",""],["^",""])),c.origin)),"");window.history.replaceState(history.state,"",d)}};function ax(a,b){if(!a)throw Error("addParamsToUrl: invalid URL");var c=new URL(a);return Object.entries(b).forEach(function(a){var b=(0,w.__read)(a,2),d=b[0],e=b[1];c.searchParams.set(d,e)}),c.toString()}var ay,az=((ap={})[U]=function(){var a=aB(U);return new RegExp("^".concat(a,"(\\d+-\\w+)"))},ap[V]=function(){var a=aB(V);return new RegExp("^".concat(a,"((\\d+-\\w+)|(\\w+$))"))},ap);function aA(a){for(var b in az){var c=a.match(az[b]());if(c)return c[1]}return null}function aB(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function aC(a){return a.startsWith("line:")}function aD(a){return void 0===a&&(a=window.navigator.userAgent),/ipad/.test(a.toLowerCase())}function aE(a){return void 0===a&&(a=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+/.test(a)}function aF(a){return void 0===a&&(a=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+ LIFF/.test(a)}var aG=function(){return!0},aH=null;function aI(){return null===aH&&(aH=aF()||aE()&&/[#|&]access_token=/.test(location.hash)||"1"===sessionStorage.getItem("".concat(T,":").concat(X)),sessionStorage.setItem("".concat(T,":").concat(X),aH?"1":"0")),!!aH}function aJ(){return null!==F&&F.apply(this,arguments)||this}function aK(){var a;return null!=(a=window.__liffConfig)?a:{}}function aL(a){var b=aK().liffId;if(!b)throw an(O,"liffId is necessary for liff.init()");var c=(aI()?sessionStorage:localStorage).getItem("".concat(T,":").concat(b,":").concat(a));try{return null===c?null:JSON.parse(c)}catch(a){return null}}function aM(a,b){var c=aK().liffId;if(!c)throw an(O,"liffId is necessary for liff.init()");(aI()?sessionStorage:localStorage).setItem("".concat(T,":").concat(c,":").concat(a),JSON.stringify(b))}function aN(){return aL(W.CONTEXT)}function aO(a){aM(W.CONTEXT,a)}(0,w.__extends)(aJ,F),Object.defineProperty(aJ.prototype,"name",{get:function(){return"isInClient"},enumerable:!1,configurable:!0}),aJ.prototype.install=function(){return function(){return aI()}};function aP(){return null!==F&&F.apply(this,arguments)||this}function aQ(){return((aN()||{}).d||{}).aId}(0,w.__extends)(aP,F),Object.defineProperty(aP.prototype,"name",{get:function(){return"getContext"},enumerable:!1,configurable:!0}),aP.prototype.install=function(){return function(){return aN()}};function aR(){return null!==F&&F.apply(this,arguments)||this}function aS(){return((aN()||{}).d||{}).autoplay||!1}(0,w.__extends)(aR,F),Object.defineProperty(aR.prototype,"name",{get:function(){return"getAId"},enumerable:!1,configurable:!0}),aR.prototype.install=function(){return function(){return aQ()}};function aT(){return null!==F&&F.apply(this,arguments)||this}function aU(){return(aN()||{}).profilePlus}(0,w.__extends)(aT,F),Object.defineProperty(aT.prototype,"name",{get:function(){return"getIsVideoAutoPlay"},enumerable:!1,configurable:!0}),aT.prototype.install=function(){return function(){return aS()}};function aV(){return null!==F&&F.apply(this,arguments)||this}function aW(a){aM(W.APP_DATA,a)}function aX(){return aL(W.MST)}function aY(){return aL(W.MST_CHALLENGE)}function aZ(a){aM(W.CLIENT_ID,a)}function a$(){return aL(W.FEATURE_TOKEN)}function a_(a){aM(W.FEATURE_TOKEN,a)}function a0(){return aL(W.ID_TOKEN)}function a1(a){aM(W.ID_TOKEN,a)}(0,w.__extends)(aV,F),Object.defineProperty(aV.prototype,"name",{get:function(){return"getProfilePlus"},enumerable:!1,configurable:!0}),aV.prototype.install=function(){return function(){return aU()}};function a2(){return null!==F&&F.apply(this,arguments)||this}function a3(){return aL(W.ACCESS_TOKEN)}function a4(a){aM(W.ACCESS_TOKEN,a)}(0,w.__extends)(a2,F),Object.defineProperty(a2.prototype,"name",{get:function(){return"getIDToken"},enumerable:!1,configurable:!0}),a2.prototype.install=function(){return function(){return a0()}};function a5(){return null!==F&&F.apply(this,arguments)||this}function a6(a){var b=aK().liffId;if(!b)throw an(O,"liffId is necessary for liff.init()");(aI()?sessionStorage:localStorage).removeItem("".concat(T,":").concat(b,":").concat(a))}function a7(){return aL(W.LOGIN_TMP)}function a8(){a6(W.LOGIN_TMP)}function a9(a){var b=aK();aj("".concat(T,":").concat(W.EXPIRES,":").concat(b.liffId),a.getTime(),{expires:a.toUTCString(),path:"/",secure:null})}function ba(){return aL(W.DECODED_ID_TOKEN)}function bb(a){aM(W.DECODED_ID_TOKEN,a)}(0,w.__extends)(a5,F),Object.defineProperty(a5.prototype,"name",{get:function(){return"getAccessToken"},enumerable:!1,configurable:!0}),a5.prototype.install=function(){return function(){return a3()}};function bc(){return null!==F&&F.apply(this,arguments)||this}function bd(){return!!a3()}(0,w.__extends)(bc,F),Object.defineProperty(bc.prototype,"name",{get:function(){return"getDecodedIDToken"},enumerable:!1,configurable:!0}),bc.prototype.install=function(){return function(){return ba()}};function be(){return null!==F&&F.apply(this,arguments)||this}function bf(){return"2.27.3"}(0,w.__extends)(be,F),Object.defineProperty(be.prototype,"name",{get:function(){return"isLoggedIn"},enumerable:!1,configurable:!0}),be.prototype.install=function(){return function(){return bd()}};function bg(){return null!==F&&F.apply(this,arguments)||this}(0,w.__extends)(bg,F),Object.defineProperty(bg.prototype,"name",{get:function(){return"getVersion"},enumerable:!1,configurable:!0}),bg.prototype.install=function(){return function(){return"2.27.3"}};var bh=function(){function a(){}return a.prototype.invoke=function(){var a;return void 0===a&&(a=window.navigator.userAgent),/LIFF\/SubWindow/.test(a)},a}(),bi=function(){function a(a){this.storage=a}return Object.defineProperty(a,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),a.prototype.invoke=function(){return new URLSearchParams(window.location.search).has(_)&&this.setInSubWindow(!0),!(!this.getInSubWindow()&&!this.getSubWindowIdentifier())},a.prototype.getInSubWindow=function(){var b=this.storage.getItem("".concat(T,":").concat(this.getLiffId(),":").concat(a.IN_SUB_WINDOW_KEY));return null!==b&&JSON.parse(b)},a.prototype.getSubWindowIdentifier=function(){var a,b="liff.subwindow.identifier",c=new URLSearchParams(window.location.search);return c.get(b)||((a=c.get("liff.state"))?new URLSearchParams(a).get(b):null)||null},a.prototype.setInSubWindow=function(b){this.storage.setItem("".concat(T,":").concat(this.getLiffId(),":").concat(a.IN_SUB_WINDOW_KEY),String(b))},a.prototype.getLiffId=function(){var a=aK().liffId;if(!a)throw an(O,"liffId is necessary for liff.init()");return a},a}(),bj=new(function(a){function b(){var b=a.call(this)||this;return aG()?b.impl={invoke:function(){return!1}}:aI()?b.impl=new bh:b.impl=new bi(window.sessionStorage),b}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),b.prototype.install=function(){return this.impl.invoke.bind(this.impl)},b}(F)),bk=bj.install();function bl(){var a=navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);return a?a[0].slice(5):null}function bm(){return null!==F&&F.apply(this,arguments)||this}function bn(){if(!cg){var a=window.navigator.userAgent.toLowerCase();cg=/iphone|ipad|ipod/.test(a)?"ios":/android/.test(a)?"android":"web"}return cg}(0,w.__extends)(bm,F),Object.defineProperty(bm.prototype,"name",{get:function(){return"getLineVersion"},enumerable:!1,configurable:!0}),bm.prototype.install=function(){return function(){return bl()}};function bo(){return F.call(this)||this}function bp(a){var b,c=aN();return null==(b=null==c?void 0:c.availability)?void 0:b[a]}function bq(a,b,c){var d,e=bp(a),f=c||a;if(!e)return{available:!1,error:{code:N,message:"".concat(f," is not allowed in this LIFF app")}};var g=e.minVer,h=e.unsupportedFromVer,i=!g||!!(d=bl())&&!(h&&ad(d,h)>0)&&ad(d,g)>=0,j=aI();return j&&!i?{available:!1,error:{code:N,message:"".concat(f," is unavailable in this client version.")}}:e.permission?j&&i||b?{available:!0}:{available:!1,error:{code:N,message:"".concat(f," is not allowed in external browser")}}:{available:!1,error:{code:N,message:"".concat(f," is not allowed in this LIFF app")}}}(0,w.__extends)(bo,F),Object.defineProperty(bo.prototype,"name",{get:function(){return"getOS"},enumerable:!1,configurable:!0}),bo.prototype.install=function(){return function(){return bn()}};var br=function(){return bd()?!aF()&&aE()?{available:!1,error:{code:N,message:"Subwindow is not supported in this browser"}}:bk()?{available:!1,error:{code:N,message:"this api can be only called in parent window"}}:bq("subwindowOpen",!0):{available:!1,error:{code:K,message:"Need access_token for api call, Please login first"}}},bs=["subwindowOpen","shareTargetPicker","multipleLiffTransition","scanCode","scanCodeV2","getAdvertisingId","addToHomeScreen","bluetoothLeFunction","skipChannelVerificationScreen","createShortcutOnHomeScreen","internalCreateShortcutOnHomeScreen","iap"],bt={scanCode:function(){return bq("scanCode")},getAdvertisingId:function(){return bq("getAdvertisingId")},bluetoothLeFunction:function(){return bq("bluetoothLeFunction")},shareTargetPicker:function(){return bk()?{available:!1,error:{code:N,message:"this api can be only called in parent window"}}:bd()?bq("shareTargetPicker",!0):{available:!1,error:{code:K,message:"Need access_token for api call, Please login first"}}},multipleLiffTransition:function(){var a=bp("multipleLiffTransition");return a&&a.permission?aI()?{available:!0}:{available:!1,error:{code:N,message:"multipleLiffTransition is available only in the LINE App browser"}}:{available:!1,error:{code:N,message:"multipleLiffTransition is not allowed in this LIFF app"}}},subwindowOpen:br,scanCodeV2:function(){if(!bd())return{available:!1,error:{code:K,message:"Need access_token for api call, Please login first"}};var a=br();return a.available?bq("scanCodeV2",!0):a},addToHomeScreen:function(){return bk()?{available:!1,error:{code:N,message:"this api can be only called in parent window"}}:bq("addToHomeScreen")},skipChannelVerificationScreen:function(){var a=aN();return a?"square_chat"===a.type?{available:!1,error:{code:N,message:"skipChannelVerificationScreen is not allowed in OpenChat"}}:bq("skipChannelVerificationScreen"):{available:!1,error:{code:N,message:"Context is not found"}}},createShortcutOnHomeScreen:function(){if(bk())return{available:!1,error:{code:N,message:"this api can be only called in parent window"}};if(!bd())return{available:!1,error:{code:K,message:"Need access_token for api call, Please login first"}};var a=bn();return"android"!==a&&"ios"!==a?{available:!1,error:{code:N,message:"this api can be only called in mobile device"}}:bq("addToHomeV2",!0,"createShortcutOnHomeScreen")},internalCreateShortcutOnHomeScreen:function(){if(bk())return{available:!1,error:{code:N,message:"this api can be only called in parent window"}};if(!bd())return{available:!1,error:{code:K,message:"Need access_token for api call, Please login first"}};var a=bn();if("android"!==a&&"ios"!==a)return{available:!1,error:{code:N,message:"this api can be only called in mobile device"}};var b=bq("addToHomeV2",!0,"internalCreateShortcutOnHomeScreen");return b.available?bq("addToHomeLineScheme",!0,"internalCreateShortcutOnHomeScreen"):b},iap:function(){return aI()?bd()?bk()?{available:!1,error:{code:N,message:"this api can be only called in parent window"}}:bq("iap",!1,"In-App Purchase"):{available:!1,error:{code:K,message:"Need access_token for api call, Please login first"}}:{available:!1,error:{code:N,message:"In-App Purchase is not allowed in external browser"}}}},bu=function(a){return function(){var b=a();if(!b.available)throw an(b.error.code,b.error.message)}},bv={scanCode:bu(bt.scanCode),getAdvertisingId:bu(bt.getAdvertisingId),bluetoothLeFunction:bu(bt.bluetoothLeFunction),shareTargetPicker:bu(bt.shareTargetPicker),multipleLiffTransition:bu(bt.multipleLiffTransition),subwindowOpen:bu(bt.subwindowOpen),scanCodeV2:bu(bt.scanCodeV2),addToHomeScreen:bu(bt.addToHomeScreen),skipChannelVerificationScreen:bu(bt.skipChannelVerificationScreen),createShortcutOnHomeScreen:bu(bt.createShortcutOnHomeScreen),internalCreateShortcutOnHomeScreen:bu(bt.internalCreateShortcutOnHomeScreen),iap:bu(bt.iap)};function bw(a){if(!bs.some(function(b){return b===a}))throw an(L,"Unexpected API name.");var b=bt[a];return!b||b().available}function bx(){var a=F.apply(this,(0,w.__spreadArray)([],(0,w.__read)(arguments),!1))||this;return a.hooks={},a}(0,w.__extends)(bx,F),Object.defineProperty(bx.prototype,"name",{get:function(){return"isApiAvailable"},enumerable:!1,configurable:!0}),bx.prototype.install=function(){return function(a){return bw(a)}};var by=function(){function a(){}return a.prototype.invoke=function(a){var b=bv[a];return!!b&&(b(),!0)},a}(),bz=function(){function a(a){this.liff=a}return a.prototype.invoke=function(a){return this.liff.checkFeature(a)},a}(),bA=function(){function a(b){ad(bf(),a.SDK_VERSION_SUPPORTING_NEW)>=0?this.impl=new by:this.impl=new bz(b)}return Object.defineProperty(a,"SDK_VERSION_SUPPORTING_NEW",{get:function(){return"2.11.0"},enumerable:!1,configurable:!0}),a.prototype.invoke=function(a){return this.impl.invoke(a)},a}(),bB=function(a,b){return(bB=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},bC=!1,bD=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}bB(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"_legacyExtensionsEnabled"},enumerable:!1,configurable:!0}),b.prototype.install=function(){bC=!0},b}(F);function bE(){var a;Object.keys(W).forEach(function(a){a6(W[a])}),a=aK(),ak("".concat(T,":").concat(W.EXPIRES,":").concat(a.liffId),{path:"/"})}function bF(){return null!==F&&F.apply(this,arguments)||this}(0,w.__extends)(bF,F),Object.defineProperty(bF.prototype,"name",{get:function(){return"logout"},enumerable:!1,configurable:!0}),bF.prototype.install=function(){return function(){return bE()}};var bG=/([\x90\x9D\x81\x8D\x8F<"{|}>\\^`“›„•‚ŽŠ…’—ž–‘”‡™‰ŒšŸ‹œ†¥¿©áÄýÍÎðô]|\n|.*#.*#|%(?![0-9A-Fa-f]{2})[^%]{0,2})/,bH=function(a){if(bG.test(a))throw an(L,"invalid URL.");var b=new URL(a),c=b.username,d=b.password,e=b.hash,f=b.search;return{username:c,password:d,pathname:b.pathname,hash:e,origin:b.origin,search:f}},bI=function(a){return a.substring(1).split("&").filter(function(a){return!/^liff\./.test(a)&&!!a})},bJ=function(a,b){var c=a.substring(b.length);return"/"===c?"":(c.length>0&&"/"!==c[0]&&(c="/"+c),c)},bK=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})},bL=function(a,b){var c=(function(a,b){for(var c=(0,w.__spreadArray)([],(0,w.__read)(a),!1),d=0;d<b.length;d++){var e=b[d],f=c.indexOf(e);f>-1&&c.splice(f,1)}return c})(function(a){var b,c,d=new URLSearchParams(a.replace(/\+/g,"%2B")),e=[];try{for(var f=(0,w.__values)(d.entries()),g=f.next();!g.done;g=f.next()){var h=(0,w.__read)(g.value,2),i=h[0],j=h[1];e.push("".concat(bK(i),"=").concat(bK(j)))}}catch(a){b={error:a}}finally{try{g&&!g.done&&(c=f.return)&&c.call(f)}finally{if(b)throw b.error}}if(0===e.length)return[""];var k=a.split("&");return e.map(function(a,b){return a.endsWith("=")&&!k[b].endsWith("=")?a.slice(0,-1):a})}(bI(a).join("&")),bI(b)).join("&");return""!==c?"?".concat(c):""},bM=function(a){var b=new RegExp("^".concat(Y.join("|"))),c=a.substring(1).split("&").filter(function(a){return!b.test(a)&&!!a}).join("&");return c?"#".concat(c):""},bN=function(a,b){return 0===b.indexOf(a)&&(a.endsWith("/")&&(a=a.substring(0,a.length-1)),void 0===b[a.length]||"/"===b[a.length])},bO=function(a,b){var c=bH(a),d=new URL(b);if(c.username!==d.username||c.password!==d.password||d.origin!==c.origin||!bN(d.pathname,c.pathname))throw an(L,"invalid URL.")},bP=new(function(a){function b(){var b=a.apply(this,(0,w.__spreadArray)([],(0,w.__read)(arguments),!1))||this;return b.extraParams="",b.getAndValidateContext=function(){var a=aN();if(!a)throw an(M,"Could not get Context from server.");if(!a.endpointUrl)throw an(M,"Could not get endpointUrl from server.");if(!a.permanentLinkPattern)throw an(M,"Could not get permanentLinkPattern from server.");return a},b.createUrl=function(){var a=b.getAndValidateContext(),c=window.location,d=c.pathname,e=c.search,f=c.hash,g=c.origin,h=new URL(a.endpointUrl);if(h.origin!==g||!bN(h.pathname,d))throw an(O,"Current page is not under entrypoint.");var i=d.substring(h.pathname.length);i.length>0&&"/"!==i[0]&&(i="/"+i);var j=new RegExp("^".concat(Y.join("|"))),k=f.substring(1).split("&").filter(function(a){return!j.test(a)&&!!a}).join("&"),l=k===h.hash.substring(1)?"":k,m=function(a){return a.substring(1).split("&").filter(function(a){return!/liff\.state/.test(a)&&!!a})},n=m(e),o=m(h.search);b.extraParams&&n.push(b.extraParams);for(var p=0;p<o.length;p++){var q=o[p],r=n.indexOf(q);r>-1&&n.splice(r,1)}var s=n.join("&"),t="".concat(i).concat(""!==s?"?".concat(s):"").concat(l?"#".concat(l):"");return"".concat(U).concat(aK().liffId).concat(t)},b.createUrlBy=function(a){return(0,w.__awaiter)(b,void 0,void 0,function(){var b,c,d,e,f,g;return(0,w.__generator)(this,function(h){if(!(b=aK().liffId))throw an(M,"Should run after liff init.");return bO(a,(c=this.getAndValidateContext()).endpointUrl),d=bH(a),e=new URL(c.endpointUrl),f=c.miniDomainAllowed?V:U,g=c.miniDomainAllowed&&c.miniAppId?c.miniAppId:b,[2,f.concat(g,bJ(d.pathname,e.pathname),bL(d.search,e.search),bM(d.hash))]})})},b.setExtraQueryParam=function(a){b.extraParams=a},b.install=function(){return{createUrl:b.createUrl,createUrlBy:b.createUrlBy,setExtraQueryParam:b.setExtraQueryParam}},b}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"permanentLink"},enumerable:!1,configurable:!0}),b}(F));function bQ(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c,d;return(0,w.__generator)(this,function(e){switch(e.label){case 0:if(!a.ok)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,a.json()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,a];case 4:return b=String(a.status),c=al.has(b)?b:J,[4,a.json().catch(function(){throw an(c,a.statusText)})];case 5:throw an((d=e.sent()).error||d.errorCode||c,d.error_description||d.message)}})})}function bR(a){var b=function(a){if(a)return a;var b=a3();if(!b)throw an(K,"Need access_token for api call, Please login first");return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(b)}}(a&&a.headers);return(0,w.__assign)((0,w.__assign)({},a),{headers:b})}function bS(a,b){var c;try{c=bR(b)}catch(a){return Promise.reject(a)}return fetch(a,c).then(bQ)}function bT(a){var b=a.subdomain,c=a.pathname;return"https://".concat(void 0===b?"api":b,".").concat("line.me","/").concat(c)}var bU={token:bT({pathname:"oauth2/v2.1/token"}),certs:bT({pathname:"oauth2/v2.1/certs"}),"openid-configuration":bT({subdomain:"access",pathname:".well-known/openid-configuration"}),authorize:bT({subdomain:"access",pathname:"liff/v1/authorize"}),profile:bT({pathname:"v2/profile"}),message:bT({pathname:"message/v3/share"}),friendship:bT({pathname:"friendship/v1/status"}),shareTargetPicker:bT({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker"}),shareTargetPickerOtt:bT({pathname:"liff/v2/apps"}),shareTargetPickerResult:bT({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker/result"}),apps:bT({pathname:"liff/v2/apps"}),subWindowGetMSIT:bT({pathname:"liff/v2/sub/msit"}),subWindowGetMSTByMSIT:bT({pathname:"liff/v2/sub/mst"}),subWindowSubscribe:bT({subdomain:"liff",pathname:"liff/v2/sub/waitResult"}),subWindowPost:bT({pathname:"liff/v2/sub/result"}),subWindowGetAppData:bT({pathname:"liff/v2/sub/appData"}),subWindowGetOrigin:function(a){return bT({pathname:"liff/v2/sub/".concat(a,"/origin")})},accessTokenVerify:bT({pathname:"oauth2/v2.1/verify"}),unauthorizedPermissions:bT({subdomain:"liff",pathname:"liff/v2/incrementalAgreement/unauthorizedPermissions"}),permanentLink:bT({subdomain:"liff",pathname:"liff/v2/permanentLink"}),createShortcutOnHomeScreen:bT({subdomain:"liff-shortcut",pathname:"api/shortcut"}),iapVirtualConfirm:bT({pathname:"iap/v1/product/virtualConfirm"})};function bV(a){return bS("".concat(bU.accessTokenVerify,"?access_token=").concat(encodeURIComponent(a)),{headers:{"Content-Type":"application/json",Accept:"application/json"}})}var bW="liff.subwindow.identifier",bX="liff.subwindow.cryptokey",bY=(0,w.__assign)((0,w.__assign)({},$),{GET_DATA:"getData",SET_DATA:"setData",NOT_FOUND:"notFound",TEARDOWN:"teardown"}),bZ="broadcast",b$="main",b_=function(a){return(0,w.__awaiter)(void 0,void 0,void 0,function(){return(0,w.__generator)(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey("jwk",{kty:"oct",k:a,alg:"A128GCM",ext:!0},{name:"AES-GCM"},!1,["encrypt","decrypt"])];case 1:return[2,b.sent()];case 2:throw an(J,b.sent());case 3:return[2]}})})},b0=function(a){return"".concat(a.identifier,"-").concat(a.action,"-").concat(a.timestamp)};function b1(){var a=document.createElement("form");a.method="POST",a.action="$MESSAGE_HANDLER_URL";var b=document.createElement("input");b.type="hidden",b.name="identifier",b.value="$IDENTIFIER",a.appendChild(b),document.body.appendChild(a),a.submit()}var b2=function(a){void 0===a&&(a=b$);var b=this;this.identification={identifier:"",cryptoKey:""},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return(0,w.__awaiter)(b,void 0,void 0,function(){var a,b,c,d,e;return(0,w.__generator)(this,function(f){switch(f.label){case 0:return a=new URLSearchParams(window.location.search),b=function(b){var c=a.get("liff.state");return c?new URLSearchParams(c).get(b):null},c=this,e={identifier:this.windowType===b$?au(12):a.get("liff.subwindow.identifier")||b("liff.subwindow.identifier")||""},this.windowType!==b$?[3,2]:[4,(0,w.__awaiter)(void 0,void 0,void 0,function(){var a,b;return(0,w.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])];case 1:return a=c.sent(),[4,window.crypto.subtle.exportKey("jwk",a)];case 2:if(!(b=c.sent())||!b.k)throw an(J,"failed to generate key");return[2,b.k];case 3:throw an(J,c.sent());case 4:return[2]}})})];case 1:return d=f.sent(),[3,3];case 2:d=a.get(bX)||b(bX)||"",f.label=3;case 3:return c.identification=(e.cryptoKey=d,e),[2]}})})},this.hasIdentification=function(){var a=b.identification,c=a.identifier,d=a.cryptoKey;return"string"==typeof c&&"string"==typeof d&&c.length>0&&d.length>0},this.isReady=function(){return b.hasIdentification()&&!!b.messageHandlerInstance},this.setup=function(){return(0,w.__awaiter)(b,void 0,void 0,function(){var a,b,c,d,e,f=this;return(0,w.__generator)(this,function(g){switch(g.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(g.sent(),!(a=this.identification.identifier))return[2];if(b=/^[a-zA-Z0-9]+$/gm,!a.match(b))throw an(J,"Invalid identifier");return(c=document.createElement("iframe")).style.display="none",c.src="about:blank",document.body.appendChild(c),null==(e=null==c?void 0:c.contentWindow)||e.window.eval("(".concat(b1.toString().replace("$MESSAGE_HANDLER_URL","".concat("https://liff-subwindow.line.me/liff/v2/sub/messageHandler")).replace("$IDENTIFIER",a.split("'")[0]),")()")),d="iframe-".concat(a,"-ready"),[4,new Promise(function(a){var b=function(e){e.data[d]&&(f.messageHandlerInstance=c,window.addEventListener("message",f.proxyToListeners),a(),document.removeEventListener("message",b))};window.addEventListener("message",b)})];case 2:return[2,g.sent()]}})})},this.teardown=function(){return(0,w.__awaiter)(b,void 0,void 0,function(){var a,b;return(0,w.__generator)(this,function(c){switch(c.label){case 0:return this.isReady()?[4,this.send({eventName:bY.TEARDOWN})]:[3,2];case 1:c.sent(),window.removeEventListener("message",this.proxyToListeners),this.listeners.clear(),null==(b=null==(a=this.messageHandlerInstance)?void 0:a.parentNode)||b.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,c.label=2;case 2:return[2]}})})},this.listen=function(a){b.listeners.set(a,a)},this.listenRepliedEvent=function(a,c){var d=function(e){var f;e.replyTarget&&(f=e.replyTarget,b0(f)===b0(a))&&(c(e),b.listeners.delete(d))};b.listeners.set(d,d)},this.send=function(a){return(0,w.__awaiter)(b,void 0,void 0,function(){var b,c,d,e,f=this;return(0,w.__generator)(this,function(g){switch(g.label){case 0:var h;if(!this.isReady())throw an("message bus is not ready to send message");return c={action:(h=a.eventName,Object.keys($).map(function(a){return $[a]}).includes(h)?bZ:"command"),identifier:this.identification.identifier||"",timestamp:(new Date).getTime()},[4,this.getEncryptedContext(a)];case 1:return c.context=g.sent(),b=c,null==(e=null==(d=this.messageHandlerInstance)?void 0:d.contentWindow)||e.postMessage({messageBusEvent:b},"*"),this.sentMessages.push(b0(b)),[4,new Promise(function(a){f.listenRepliedEvent(b,function(b){a(b.context)})})];case 2:return[2,g.sent()]}})})},this.reply=function(a,c){return(0,w.__awaiter)(b,void 0,void 0,function(){var b,d,e,f;return(0,w.__generator)(this,function(g){switch(g.label){case 0:if(!this.isReady())throw an("message bus is not ready to send message");if(!a.identifier||!a.timestamp)throw an(J,"target message is not valid");return d={action:bZ},[4,this.getEncryptedContext(c)];case 1:return d.context=g.sent(),d.identifier=this.identification.identifier||"",d.timestamp=(new Date).getTime(),d.replyTarget={action:a.action,identifier:a.identifier,timestamp:a.timestamp},b=d,null==(f=null==(e=this.messageHandlerInstance)?void 0:e.contentWindow)||f.postMessage({messageBusEvent:b},"*"),this.sentMessages.push(b0(b)),[2]}})})},this.setData=function(a,c){void 0===a&&(a="appData"),b.send({eventName:bY.SET_DATA,key:a,data:c})},this.getData=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return(0,w.__awaiter)(b,(0,w.__spreadArray)([],(0,w.__read)(a),!1),void 0,function(a){return void 0===a&&(a="appData"),(0,w.__generator)(this,function(b){switch(b.label){case 0:return[4,this.send({eventName:bY.GET_DATA,key:a})];case 1:return[2,b.sent()]}})})},this.proxyToListeners=function(a){return(0,w.__awaiter)(b,void 0,void 0,function(){var b,c=this;return(0,w.__generator)(this,function(d){return b=a.data.messageBusEvent,"https://liff-subwindow.line.me"!==a.origin||b&&(this.sentMessages.includes(b0(b))||b.identifier!==this.identification.identifier||b.action!==bZ&&!b.replyTarget||this.listeners.forEach(function(a){return(0,w.__awaiter)(c,void 0,void 0,function(){var c,d,e;return(0,w.__generator)(this,function(f){switch(f.label){case 0:return c=a,d=[(0,w.__assign)({},b)],e={},[4,this.getDecryptedContext(b.context)];case 1:return c.apply(void 0,[w.__assign.apply(void 0,d.concat([(e.context=f.sent(),e)]))]),[2]}})})})),[2]})})},this.getEncryptedContext=function(a){return(0,w.__awaiter)(b,void 0,void 0,function(){var b,c,d,e,f,g,h;return(0,w.__generator)(this,function(i){switch(i.label){case 0:var j;return c=(b=this.identification).identifier,d=b.cryptoKey,f=(e=JSON).stringify,h={eventName:a.eventName,key:a.key?a.key:void 0},a.data?[4,(j=JSON.stringify(a.data),(0,w.__awaiter)(void 0,void 0,void 0,function(){var a,b;return(0,w.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),a=(new TextEncoder).encode(c),[4,b_(d)];case 1:return b=e.sent(),[4,window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},b,(new TextEncoder).encode(j))];case 2:return[2,btoa(new Uint8Array(e.sent()).reduce(function(a,b){return a+String.fromCharCode(b)},""))];case 3:throw an(J,e.sent());case 4:return[2]}})}))]:[3,2];case 1:return g=i.sent(),[3,3];case 2:g=void 0,i.label=3;case 3:return[2,f.apply(e,[(h.data=g,h)])]}})})},this.getDecryptedContext=function(a){return(0,w.__awaiter)(b,void 0,void 0,function(){var b,c,d,e,f,g,h,i;return(0,w.__generator)(this,function(j){switch(j.label){case 0:var k;return c=(b=this.identification).identifier,d=b.cryptoKey,(e=JSON.parse(a)).data&&"string"==typeof e.data?(i=(h=JSON).parse,[4,(k=e.data,(0,w.__awaiter)(void 0,void 0,void 0,function(){var a,b,e,f,g,h;return(0,w.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),a=(new TextEncoder).encode(c),[4,b_(d)];case 1:for(b=i.sent(),f=new Uint8Array((e=atob(k)).length),g=0;g<e.length;g++)f[g]=e.charCodeAt(g);return[4,window.crypto.subtle.decrypt({name:"AES-GCM",iv:a},b,f.buffer)];case 2:return h=i.sent(),[2,(new TextDecoder).decode(new Uint8Array(h))];case 3:throw an(J,i.sent());case 4:return[2]}})}))]):[3,2];case 1:return g=i.apply(h,[j.sent()]),[3,3];case 2:g=void 0,j.label=3;case 3:return f=g,[2,(0,w.__assign)((0,w.__assign)({},e),{data:f})]}})})},this.windowType=a},b3={},b4=!1;function b5(a,b){b4||(b4=!0,window.addEventListener(S,function(a){a&&a.detail&&a.detail.type&&b3[a.detail.type]&&b3[a.detail.type].forEach(function(b){return b(a)})})),b3[a]?b3[a].push(b):b3[a]=[b]}function b6(a,b){var c=b3[a];if(c&&Array.isArray(c)){var d=c.indexOf(b);d>=0&&c.splice(d,1)}}function b7(a,b,c){void 0===b&&(b={}),void 0===c&&(c="");var d=a$();if(!d)throw an(N,"Invalid featureToken for client features");if(!window._liff||!window._liff.postMessage)throw an(L,"postMessage is not available from client");A.debug("[js postMessage to client]",a,c,b),window._liff.postMessage(a,d,c,JSON.stringify(b))}function b8(a,b,c){return void 0===b&&(b={}),void 0===c&&(c={once:!0}),a$()?(c=(0,w.__assign)({callbackId:au(12),once:!0},c),new Promise(function(d,e){var f=function(b){if(b&&b.detail){var g=b.detail.callbackId===c.callbackId,h="string"!=typeof b.detail.callbackId;(g||h)&&(c.once&&b6(a,f),A.debug("[callback detail]",b.detail),b.detail.error?e(b.detail.error):b.detail.data?d(b.detail.data):e(b.detail))}e()};b5(a,f),b7(a,b,c.callbackId)})):Promise.reject(an(N,"Invalid featureToken for client features"))}function b9(){var a=bl();null!==a&&("ios"===bn()&&ad(a,"9.19")>=0||"android"===bn()&&ad(a,"11.6.0")>=0)?location.href="liff://close":window._liff&&window._liff.postMessage?null!==a&&ad(a,"10.15.0")>=0?"ios"===bn()?window._liff.postMessage("closeWindow",""):window._liff.postMessage("closeWindow","","",""):b8("closeWindow"):window.close()}function ca(){return null!==F&&F.apply(this,arguments)||this}function cb(a){return bS((0,bU.subWindowGetOrigin)(a))}(0,w.__extends)(ca,F),Object.defineProperty(ca.prototype,"name",{get:function(){return"closeWindow"},enumerable:!1,configurable:!0}),ca.prototype.install=function(){return function(){return b9()}};var cc={};function cd(a,b){a&&cc[a]&&cc[a].forEach(function(a){a(b)})}function ce(a,b){cc[a]||(cc[a]=[]),cc[a].push(b)}function cf(a,b){if(cc[a]){var c=cc[a].indexOf(b);c>=0&&cc[a].splice(c,1)}}var cg,ch,ci,cj,ck,cl,cm=function(){function a(a){this.storage=a}return a.prototype.getItem=function(a){return this.storage.getItem("".concat(this.getKeyPrefix(),":").concat(a))},a.prototype.setItem=function(a,b){this.storage.setItem("".concat(this.getKeyPrefix(),":").concat(a),b)},a.prototype.removeItem=function(a){this.storage.removeItem("".concat(this.getKeyPrefix(),":").concat(a))},a.prototype.clear=function(){this.storage.clear()},a.prototype.getKeyPrefix=function(){return"".concat(T,":").concat(this.getLiffId())},a.prototype.getLiffId=function(){var a=aK().liffId;if(!a)throw an(O,"liffId is necessary for liff.init()");return a},a}(),cn=new cm(new aq);function co(){var a=cn.getItem("subWindowStatusUpdated");return null!==a&&JSON.parse(a)}function cp(a){cn.setItem("subWindowStatusUpdated",String(a))}function cq(){return(0,w.__awaiter)(this,arguments,void 0,function(a){return void 0===a&&(a=b$),(0,w.__generator)(this,function(b){switch(b.label){case 0:return[4,(cl=new b2(a)).setup()];case 1:return b.sent(),[2,cl]}})})}var cr=new aq,cs=new cm(aG()?cr:window.sessionStorage);function ct(){return cs.getItem("mainWindowOrigin")}function cu(a){return(0,w.__awaiter)(this,arguments,void 0,function(a,b){var c,d,e,f,g,h,i;return void 0===b&&(b={}),(0,w.__generator)(this,function(j){switch(j.label){case 0:if(null==(c=cl)?void 0:c.isReady())return[3,5];if(d=JSON.stringify(b),e=aK().liffId,f=ct(),!window.opener||!f||!e)throw an(R);g=!1,j.label=1;case 1:return j.trys.push([1,3,,4]),[4,cb(e)];case 2:return g=j.sent().subwindowCommonModule,[3,4];case 3:throw h=j.sent(),A.debug(h),an(R);case 4:return i=g?f:location.origin,[2,new Promise(function(b){window.addEventListener("message",function c(e){var f;!(f=e).data||"string"!=typeof f.data.type||![$.SUBMIT,$.CANCEL].includes(f.data.type)||(window.removeEventListener("message",c),b({status:a,result:d}))}),window.opener.postMessage({status:a,result:d},i)})];case 5:return c.send({eventName:a,data:b}),[4,new Promise(function(a){setTimeout(a,500)})];case 6:return j.sent(),[2,{status:a,result:JSON.stringify(b)}]}})})}function cv(a){var b,c=ck;if(a.origin===c){var d=a.data;if(d){var e,f=d.status,g=d.result;try{e=JSON.parse(g||"{}")}catch(a){e={}}switch(f){case aa:window.clearInterval(cj),cz();break;case $.CANCEL:case $.SUBMIT:cp(!0),window.clearInterval(cj),window.removeEventListener("message",cv),cd(f,e),null==(b=ch)||b.postMessage({type:f},ck);break;default:A.debug("unexpected message")}}}}var cw=function(a){return(0,w.__awaiter)(void 0,void 0,void 0,function(){var b,c,d,e;return(0,w.__generator)(this,function(f){if(co())return[2];switch(c=(b=a.context).eventName,d=b.data,e=cl,c){case $.INIT:cy(!d.hasOpener);break;case $.CANCEL:case $.SUBMIT:cp(!0),cd(c,d),null==e||e.reply(a,{eventName:c});break;case $.CLOSE:!1===co()&&(cp(!0),cd($.CLOSE,{})),cz()}return[2]})})};function cx(){window.clearInterval(ci),window.clearInterval(cj),window.removeEventListener("message",cv)}function cy(a){if(void 0===a&&(a=!1),cx(),cp(!1),a){var b=ch;b&&(b.close(),ch=null)}}function cz(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){switch(b.label){case 0:return(a=cl)?[4,a.teardown()]:[3,2];case 1:b.sent(),b.label=2;case 2:return[2]}})})}var cA=null;function cB(a){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,a.json()];case 1:return[2,b.sent()];case 2:return b.sent(),[2,null];case 3:return[2]}})})}var cC={height:"full",closeButtonPosition:"right",closeButtonColor:"black",closeButtonLabel:""};function cD(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return bv.subwindowOpen(),aI()?(k=(b=a).appData,l=b.native,m=aK().liffId,n=aY(),o=aA(b.url),m?n?o?(f=(e={mainLiffId:m,subLiffId:o,mstChallenge:n,appData:k,view:(d={},Object.keys(c=Object.assign({},cC,l)).forEach(function(a){"closeButtonColor"===a?"white"===c[a]?d[a]="#ffffff":d[a]="#000000":d[a]=c[a]}),d)}).mainLiffId,g=e.subLiffId,h=e.mstChallenge,i=e.appData,j=e.view,f&&h?bS(bU.subWindowGetMSIT,{method:"POST",body:JSON.stringify({mainLiffId:f,subLiffId:g,mstChallenge:h,appData:i,view:j})}):Promise.reject(an(L,"no proper argument"))).then(function(a){var b=a.msit;return function a(b){return(0,w.__awaiter)(this,void 0,void 0,function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=this;return(0,w.__generator)(this,function(r){switch(r.label){case 0:if(c=b.msit,d=b.mstChallenge,f=void 0===(e=b.reconnectCount)?0:e,g=function(){return(0,w.__awaiter)(q,void 0,void 0,function(){return(0,w.__generator)(this,function(e){switch(e.label){case 0:return[4,new Promise(function(a){return setTimeout(a,1e3)})];case 1:return e.sent(),[4,a({msit:c,mstChallenge:d,onSuccess:b.onSuccess,onError:b.onError,reconnectCount:f+1})];case 2:return e.sent(),[2]}})})},h=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];cA=null,b.onSuccess.apply(b,(0,w.__spreadArray)([],(0,w.__read)(a),!1))},i=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];cA=null,b.onError.apply(b,(0,w.__spreadArray)([],(0,w.__read)(a),!1))},j=Date.now(),null===cA&&(cA=j),k=j-cA,f>=10||k>6e5)return i(an(J,"Failed to connect")),[2];r.label=1;case 1:return r.trys.push([1,3,,5]),[4,function(a,b){var c;try{c=bR(b)}catch(a){return Promise.reject(a)}return fetch(a,c)}(bU.subWindowSubscribe,{method:"POST",body:JSON.stringify({msit:c,mstChallenge:d})})];case 2:return l=r.sent(),[3,5];case 3:return r.sent(),[4,g()];case 4:return r.sent(),[2];case 5:return l.status>=500?[4,g()]:[3,7];case 6:return r.sent(),[3,17];case 7:return l.status>=400&&500>l.status?[4,cB(l)]:[3,9];case 8:return m=(n=r.sent())?an(L,n.errorDetail):an(J,"Some error happened in the server"),i(m),[3,17];case 9:return 200!==l.status?[3,16]:[4,cB(l)];case 10:if(!(n=r.sent()))return i(an(J,"Some error happened in the server")),[2];switch(o=n.status,p=n.result,o){case $.ERROR:return[3,11];case $.CLOSE:case $.CANCEL:case $.SUBMIT:return[3,13]}return[3,14];case 11:return[4,g()];case 12:return r.sent(),[3,15];case 13:return h(o,p),[3,15];case 14:i(an(J,"Some error happened in the server")),r.label=15;case 15:return[3,17];case 16:i(an(J,"Some error happened in the server")),r.label=17;case 17:return[2]}})})}({msit:b,mstChallenge:n,onSuccess:function(a,b){cd(a,b)},onError:function(a){cd($.ERROR,a)}}),b}).then(function(a){return function(a,b){return(0,w.__awaiter)(this,void 0,void 0,function(){var c,d,e;return(0,w.__generator)(this,function(f){switch(f.label){case 0:return c=a.url,(d=new URLSearchParams).set("msit",b),[4,null==(e=a.onBeforeTransition)?void 0:e.call(a)];case 1:return f.sent(),location.href="".concat("liff://subwindow","?url=").concat(encodeURIComponent(c),"&").concat(d.toString()),[2]}})})}(b,a)}):Promise.reject(an(L,"params.url must be liff url or mini url")):Promise.reject(an(K,"mst_challenge is invalid")):Promise.reject(an(K,"liffId is invalid"))):function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i,j,k,l,m;return(0,w.__generator)(this,function(n){var o,p,q,r,s,t,u,v;switch(n.label){case 0:return(b=aA(a.url))?(cy(!0),[4,cz()]):[2,Promise.reject(an(L,"params.url must be liff url or mini url"))];case 1:return n.sent(),ch="ios"!==bn()||aD()?window.open("","liffsubwindow","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):window.open(),c=a.url,d=a.appData,(e=new URL(c)).searchParams.append(_,"true"),[4,cq()];case 2:return f=n.sent(),e.searchParams.append(bW,f.identification.identifier),e.searchParams.append(bX,f.identification.cryptoKey),e.hostname=(o=e.hostname,q=(p=(0,w.__read)(o.split(".")))[0],r=p.slice(1),(0,w.__spreadArray)(["".concat(q,"-ext")],(0,w.__read)(r),!1).join(".")),g=e.toString(),[4,cb(b)];case 3:if(i=(h=n.sent()).origin,j=h.subwindowCommonModule,!(k=ch))throw an(Q);if(!j)return k.close(),[2];ck=i,f.listen(cw),f.setData("appData",d),window.addEventListener("message",cv),n.label=4;case 4:return n.trys.push([4,6,,7]),[4,null==(m=a.onBeforeTransition)?void 0:m.call(a)];case 5:return n.sent(),[3,7];case 6:throw l=n.sent(),k.close(),l;case 7:return k.location.href=g,s=i,t=d,u=ch,v={type:aa},t&&(v.message=JSON.stringify(t)),cj=window.setInterval(function(){null==u||u.postMessage(v,s)},100),ci=window.setInterval(function(){var a=ch;a&&a.closed&&(cx(),ch=null,!1===co()&&(cp(!0),cd($.CLOSE,{})))},100),[2]}})})}(a)}function cE(a){if(!a.mst||!a.status)return Promise.reject(an(L,"no proper argument"));var b=JSON.stringify(a);return bS(bU.subWindowPost,{method:"POST",body:b})}function cF(){if(!bk())throw an(K,"this api can be only called in child window")}function cG(a){var b;return void 0===a&&(a={}),cF(),aI()?function(){return(0,w.__awaiter)(this,arguments,void 0,function(a){var b,c;return void 0===a&&(a={}),(0,w.__generator)(this,function(d){switch(d.label){case 0:return(b=aX())?[4,cE({mst:b,status:$.CANCEL,result:a})]:[2,Promise.reject(an(K,"mst is invalid"))];case 1:return c=d.sent(),cp(!0),[2,c]}})})}(a):(void 0===(b=a)&&(b={}),cu($.CANCEL,b))}function cH(a){var b;return void 0===a&&(a={}),cF(),aI()?function(){return(0,w.__awaiter)(this,arguments,void 0,function(a){var b,c;return void 0===a&&(a={}),(0,w.__generator)(this,function(d){switch(d.label){case 0:return(b=aX())?[4,cE({mst:b,status:$.SUBMIT,result:a})]:[2,Promise.reject(an(K,"mst is invalid"))];case 1:return c=d.sent(),cp(!0),[2,c]}})})}(a):(void 0===(b=a)&&(b={}),cu($.SUBMIT,b))}function cI(){return cF(),aI()?function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){switch(b.label){case 0:return!1!==co()?[3,2]:(a=aX())?[4,cE({mst:a,status:$.CLOSE,result:{}})]:[2,Promise.reject(an(K,"mst is invalid"))];case 1:b.sent(),b.label=2;case 2:return b9(),[2]}})})}():function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){return(null==(a=cl)?void 0:a.isReady())?(a.send({eventName:$.CLOSE}),[2,new Promise(function(a){setTimeout(function(){b9(),a()},100)})]):(b9(),[2,Promise.resolve()])})})}()}function cJ(){return cF(),function(){var a,b=aL(W.APP_DATA);try{a=b?JSON.parse(b):{}}catch(b){a={}}return Promise.resolve(a)}()}var cK={on:ce,off:cf,open:cD,cancel:cG,submit:cH,close:cI,getAppData:cJ},cL=F;function cM(){return null!==cL&&cL.apply(this,arguments)||this}(0,w.__extends)(cM,cL),Object.defineProperty(cM.prototype,"name",{get:function(){return"subWindow"},enumerable:!1,configurable:!0}),cM.prototype.install=function(){var a=this;return{on:ce.bind(this),off:cf.bind(this),open:function(b){return cD.call(a,(0,w.__assign)((0,w.__assign)({},b),{onBeforeTransition:void 0}))},cancel:cG.bind(this),submit:cH.bind(this),close:cI.bind(this),getAppData:cJ.bind(this)}};var cN,cO=a.i(53903),cP=function(){var a=this;this.type="sync",this.fns=new Set,this.on=function(b){a.fns.add(b)},this.call=function(){for(var b,c,d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];try{for(var f=(0,w.__values)(a.fns),g=f.next();!g.done;g=f.next())g.value.apply(void 0,(0,w.__spreadArray)([],(0,w.__read)(d),!1))}catch(a){b={error:a}}finally{try{g&&!g.done&&(c=f.return)&&c.call(f)}finally{if(b)throw b.error}}}},cQ=function(){var a=this;this.type="async",this.fns=new Set,this.on=function(b){a.fns.add(b)},this.call=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(0,w.__awaiter)(a,void 0,void 0,function(){var a,c,d,e,f,g;return(0,w.__generator)(this,function(h){switch(h.label){case 0:a=[];try{for(d=(c=(0,w.__values)(this.fns)).next();!d.done;d=c.next())e=d.value,a.push(e.apply(void 0,(0,w.__spreadArray)([],(0,w.__read)(b),!1)))}catch(a){f={error:a}}finally{try{d&&!d.done&&(g=c.return)&&g.call(c)}finally{if(f)throw f.error}}return[4,Promise.all(a)];case 1:return h.sent(),[2]}})})}},cR=function(a){var b,c,d,e=au(43),f=(b=(0,cO.default)(e),c="",b.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").forEach(function(a){c+=String.fromCharCode(parseInt(a))}),window.btoa(c)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),g=aK();if(!g||!g.liffId)throw an(O,"You need to define `liffId` for liff.login()");var h={app_id:g.liffId,state:au(12),response_type:"code",code_challenge_method:"S256",code_challenge:f,liff_sdk_version:bf()};a&&a.redirectUri&&(h.redirect_uri=a.redirectUri),bk()&&!aI()&&((null==(d=cl)?void 0:d.isReady())?h.redirect_uri=window.location.href:h.disable_auto_login="true"),aM(W.LOGIN_TMP,{codeVerifier:e});var i=bU.authorize+"?"+as(h);A.debug("[Redirect] ".concat(i)),window.location.href=i},cS=function(a){function b(){var b=a.apply(this,(0,w.__spreadArray)([],(0,w.__read)(arguments),!1))||this;return b.hooks={before:new cP},b}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"login"},enumerable:!1,configurable:!0}),b.prototype.install=function(){return this._login.bind(this)},b.prototype._login=function(a){this.hooks.before.call(a),cR(a)},b}(F),cT="undefined"==typeof navigator?"en":null!=(cN=navigator.language)?cN:"en",cU=null;function cV(a){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(b){switch(b.label){case 0:return cT=a,[4,cW()];case 1:return b.sent(),[2]}})})}function cW(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b;return(0,w.__generator)(this,function(c){switch(c.label){case 0:return[4,bS("".concat("https://liffsdk.line-scdn.net/xlt/manifest.json"),{method:"GET",headers:{Accept:"application/json"}})];case 1:return a=c.sent(),b="".concat(cT),!a.languages[b]&&cT.includes("-")&&(b=cT.split("-")[0]),a.languages[b]||(b="en"),[4,bS("".concat("https://liffsdk.line-scdn.net/xlt","/").concat(a.languages[b]),{method:"GET",headers:{Accept:"application/json"}})];case 2:return cU=c.sent(),[2]}})})}function cX(a){if(null===cU)throw an(M,"please call xlt after liff.init");return cU[a]}var cY=new(function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"i18n"},enumerable:!1,configurable:!0}),b.prototype.install=function(a){return a.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)),{setLang:cV}},b.prototype.beforeInitFinished=function(){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(a){switch(a.label){case 0:return[4,cW()];case 1:return a.sent(),[2]}})})},b}(F)),cZ={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},c$={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function c_(a){var b=aN(),c=(null==b?void 0:b.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:cZ,darkModeColor:c$},d=c.adaptableColorSchemes,e=c.lightModeColor,f=c.darkModeColor,g=d.includes("dark");a.matches&&g?c0((0,w.__assign)((0,w.__assign)({},c$),f)):c0((0,w.__assign)((0,w.__assign)({},cZ),e))}function c0(a){var b=a.iconColor,c=a.statusBarColor,d=a.titleTextColor,e=a.titleSubtextColor,f=a.titleButtonColor,g=a.titleBackgroundColor,h=a.progressBarColor,i=a.progressBackgroundColor,j=a.titleButtonAreaBackgroundColor,k=a.titleButtonAreaBorderColor,l=a.baseBackgroundColor,m=a.baseTextColor,n=a.lightButtonBorderColor;c1("--liff-base-background-color",l),c1("--liff-base-text-color",m),c1("--liff-base-background-rgb-color",ag(l)),c1("--liff-base-text-rgb-color",ag(m)),c1("--liff-light-button-border-color",n),c1("--liff-title-text-color",d),c1("--liff-title-background-color",g),c1("--liff-title-button-color",f),c1("--liff-icon-color",b),c1("--liff-status-bar-color",c),c1("--liff-title-subtext-color",e),c1("--liff-progress-bar-color",h),c1("--liff-progress-background-color",i),c1("--liff-title-button-area-background-color",ae(j)),c1("--liff-title-button-area-border-color",ae(k))}function c1(a,b){document.documentElement.style.setProperty(a,b)}var c2={addToHomeScreen:function(a){if(!new bA(a).invoke("addToHomeScreen"))throw an(N,"No permission for liff.addToHomeScreen()")},scanCode:function(a){if(!new bA(a).invoke("scanCode"))return Promise.reject(an(N,"No permission for liff.scanCode()"))},getAdvertisingId:function(a){if(!new bA(a).invoke("getAdvertisingId"))return Promise.reject(an(N,"No permission for liff.getAdvertisingId()"))},initPlugins:function(){}};function c3(a,b){return(0,w.__awaiter)(this,void 0,void 0,function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return(0,w.__generator)(this,function(r){switch(r.label){case 0:return c=a.split("."),e=(d=(0,w.__read)(c,3))[0],f=d[1],g=d[2],h=JSON.parse(ac(e)),i=JSON.parse(decodeURIComponent(ac(f).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))),j=ah(ac(g)),k=ah("".concat(e,".").concat(f)),[4,function(){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(a){switch(a.label){case 0:return[4,bS(bU.certs)];case 1:return[2,a.sent()]}})})}()];case 1:if(!(l=r.sent().keys.find(function(a){return a.kid===h.kid})))return[3,6];if(delete l.alg,"ES256"!==h.alg)throw an(P,'Invalid "alg" value in ID_TOKEN');m=void 0,r.label=2;case 2:return r.trys.push([2,4,,5]),[4,function(a,b,c){return(0,w.__awaiter)(this,void 0,void 0,function(){var d;return(0,w.__generator)(this,function(e){switch(e.label){case 0:return[4,crypto.subtle.importKey("jwk",a,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return d=e.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},d,c,b)];case 2:return[2,e.sent()]}})})}(l,k,j)];case 3:return m=r.sent(),[3,5];case 4:throw n=r.sent(),an(P,"".concat("Failed to use Crypto API to verify ID_TOKEN",": ").concat(n));case 5:if(m){if(o=i.iss!=="https://access.".concat("line.me"),p=i.aud!==b,q=1e3*i.exp<Date.now(),o)throw an(P,'Invalid "iss" value in ID_TOKEN');if(p)throw an(P,'Invalid "aud" value in ID_TOKEN');if(q)throw an(P,'Invalid "exp" value in ID_TOKEN');return[2,i]}throw an(P,"Invalid signature in ID_TOKEN");case 6:throw an(P,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}})})}function c4(a){var b=a.split(".");if(b[1])try{var c=b[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(c))}catch(a){}return null}function c5(a){var b=a.pathname,c=a.query,d=c?"?".concat(as(c)):"",e="".concat("liff://").concat(b).concat(d);location.href=e}var c6=null;function c7(a){if(a.persisted&&bw("multipleLiffTransition"))if("ios"===bn())window.location.reload();else{var b=aK().liffId,c=a$();if(!b)throw an(M,"Invalid LIFF ID.");if(!c)throw an(N,"Invalid featureToken for client features");c5({pathname:"app/".concat(b),query:{feature_token:c}})}}function c8(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){switch(b.label){case 0:if(!(a=aK().liffId))throw an(M,"Invalid LIFF ID.");return[4,function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,f,g;return(0,w.__generator)(this,function(h){switch(h.label){case 0:return b=bU.apps,c="".concat(b,"/").concat(a,"/contextToken"),d=a3(),e={"Content-Type":"application/json",Accept:"application/json"},d&&(e.Authorization="Bearer ".concat(d)),[4,bS(c,{headers:e})];case 1:if(!(f=h.sent().contextToken))throw an(M,"Can not get context from server.");if(!(g=c4(f)))throw an(M,"Invalid context token.");return[2,g]}})})}(a)];case 1:return aO(b.sent()),[2]}})})}var c9=new(function(){function a(){var a=this;this.getAndValidateContext=function(){var a=aN();if(!a)throw an(M,"Could not get Context from server.");if(!a.endpointUrl)throw an(M,"Could not get endpointUrl from server.");if(!a.permanentLinkPattern)throw an(M,"Could not get permanentLinkPattern from server.");return a},this.decodeState=function(b){var c=a.getAndValidateContext();b=b.replace(/\n/g,"%0D%0A");var d=a.hasTrailingSlash(c.endpointUrl)||a.hasTrailingSlash(b),e=new URL(c.endpointUrl),f=e.origin,g=e.pathname,h=e.search,i=new URL("".concat(f).concat(a.attachSlashAtStart(b))),j=i.pathname,k=i.search,l=i.hash,m="".concat(h).concat(h?k.replace(/\?/g,"&"):k),n="".concat(g).concat(a.attachSlashAtStart(j)).replace("//","/");return(n=a.attachSlashAtStart("".concat(n))).endsWith("/")&&!d&&(n=n.substring(0,n.length-1)),"".concat(f).concat(n).concat(m).concat(l).replace(/%0D%0A/g,"\n")}}return a.prototype.attachSlashAtStart=function(a){return"".concat(a&&a.length>0&&!a.startsWith("/")?"/":"").concat(a)},a.prototype.hasTrailingSlash=function(a){var b=a.indexOf("?"),c=a.indexOf("#"),d=-1;return(d=-1===b&&-1===c?a.length:-1===b?c:-1===c?b:Math.min(b,c))>0&&"/"===a[d-1]},a.prototype.invoke=function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b,c,d,e;return(0,w.__generator)(this,function(f){switch(f.label){case 0:if("string"!=typeof(b=(a=ar(window.location.search))["liff.state"]))return[2];f.label=1;case 1:return f.trys.push([1,4,,5]),c=location.href,(d=this.decodeState(b))===c?[3,3]:(a["liff.hback"]?location.replace(ax(d,{"liff.hback":a["liff.hback"]})):location.replace(d),[4,new Promise(function(){})]);case 2:f.sent(),f.label=3;case 3:return[3,5];case 4:if((e=f.sent()).code===M)throw e;return A.debug(e),[3,5];case 5:return[2]}})})},a}()),da=function(a,b){return new Promise(function(c,d){if(a){var e=document.createElement("script");e.type="module",e.onload=function(){c()},e.src=a,document.head.appendChild(e)}else d(an(O,b))})},db=function(a){var b="https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js";return b&&a&&(b=b.replace(/\d{1,2}\.\d{1,2}\.\d{1,3}/,a)),da(b,"LUI_ALERT_URL is not defined")},dc=function(){return(0,w.__awaiter)(void 0,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){var c;switch(b.label){case 0:return(a=function(){var a,b=document.querySelector('script[src*="luivendor.js"]');if(b&&(null==(a=b.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g))?void 0:a.length))return b.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)[0]}())?[3,2]:[4,da("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js","LUI_VENDOR_URL is not defined")];case 1:b.sent(),b.label=2;case 2:return[4,db(a)];case 3:return b.sent(),[4,(c=au(6),new Promise(function(){var a=document.createElement("div");a.innerHTML='<lui-alert id="'.concat("liffAlert","-").concat(c,'" shown title="').concat(cX("alert.android.extBrowser.autoLoginWorkaround.title"),'" message="').concat(cX("alert.android.extBrowser.autoLoginWorkaround.desc"),'" button="').concat(cX("alert.android.extBrowser.autoLoginWorkaround.button.text"),'"></lui-alert>'),document.body.appendChild(a);var b=document.getElementById("".concat("liffAlert","-").concat(c));b&&b.addEventListener("lui-button-click",function(){var a=window.open(ax(window.location.href,{liffIsEscapedFromApp:"true"}),"_blank");a&&(a.location.href=ax(window.location.href,{liffIsEscapedFromApp:"true"}),window.close())})}))];case 4:return b.sent(),[2]}})})},dd=function(a){try{return new URL(a).searchParams.get("lineAppVersion")}catch(a){return null}},de=function(a){function b(){var b=a.apply(this,(0,w.__spreadArray)([],(0,w.__read)(arguments),!1))||this;return b.hooks={before:new cQ,after:new cQ},b.internalHooks={beforeFinished:new cQ,beforeSuccess:new cQ,error:new cQ},b}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),b.prototype.install=function(a){var b=a.liff;return this.liffForWindow=b,this.init.bind(this)},b.prototype.init=function(a,b,c){return(0,w.__awaiter)(this,void 0,void 0,function(){var d;return(0,w.__generator)(this,function(e){var f,g,h;switch(e.label){case 0:return[4,this.hooks.before.call()];case 1:e.sent(),f=this.liffForWindow,window&&!window.liff&&(window.liff=f),e.label=2;case 2:return e.trys.push([2,9,,11]),[4,Promise.all([function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b;return(0,w.__generator)(this,function(c){switch(c.label){case 0:return[4,bC?function(){var a,b,c,d;return a=this,b=void 0,c=void 0,d=function(){return function(a,b){var c,d,e,f,g={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return f={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f;function h(f){return function(h){var i=[f,h];if(c)throw TypeError("Generator is already executing.");for(;g;)try{if(c=1,d&&(e=2&i[0]?d.return:i[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,i[1])).done)return e;switch(d=0,e&&(i=[2&i[0],e.value]),i[0]){case 0:case 1:e=i;break;case 4:return g.label++,{value:i[1],done:!1};case 5:g.label++,d=i[1],i=[0];continue;case 7:i=g.ops.pop(),g.trys.pop();continue;default:if(!(e=(e=g.trys).length>0&&e[e.length-1])&&(6===i[0]||2===i[0])){g=0;continue}if(3===i[0]&&(!e||i[1]>e[0]&&i[1]<e[3])){g.label=i[1];break}if(6===i[0]&&g.label<e[1]){g.label=e[1],e=i;break}if(e&&g.label<e[2]){g.label=e[2],g.ops.push(i);break}e[2]&&g.ops.pop(),g.trys.pop();continue}i=b.call(a,g)}catch(a){i=[6,a],d=0}finally{c=e=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}}(this,function(a){switch(a.label){case 0:return[3,2];case 1:return[2,a.sent().default];case 2:return[2,new Promise(function(a,b){var c,d=document.createElement("script"),e="ios"===bn()?(c=bl())&&0>ad(c,"9.19.0")?"https://static.line-scdn.net/liff/edge/2/ios-918-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/ios-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/non-ios-extensions_2_22_0.js";d.onload=function(){var c=window.liffClientExtension;c?a(c):b(an(M,"Unable to load client features. (Extension is empty)"))},d.onerror=function(a){b(an(M,"Unable to load client features.",{cause:a}))},d.src=e,d.type="text/javascript",document.body.appendChild(d)})]}})},new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})}():Promise.resolve(void 0)];case 1:return(b=c.sent())&&b.install(a,c2),[2]}})})}(this.liffForWindow),function(a,b){return(0,w.__awaiter)(this,void 0,void 0,function(){var c,d;return(0,w.__generator)(this,function(e){var f,g,h,i,j;switch(e.label){case 0:if(!a.liffId)throw an(O,"liffId is necessary for liff.init()");return window.__liffConfig=a,!aI()&&bd()&&(j=aK(),ai("".concat(T,":").concat(W.EXPIRES,":").concat(j.liffId))||bE()),c=ar(window.location.search),!bk()||aI()?[3,2]:[4,function a(){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,f,g,h=this;return(0,w.__generator)(this,function(i){switch(i.label){case 0:return(c=cl)?[3,2]:[4,cq("sub")];case 1:c=i.sent(),i.label=2;case 2:return(b=c).isReady()?(d=au(8),[4,b.getData("appData")]):[3,8];case 3:return f=(e=i.sent()).eventName,g=e.data,f!==bY.NOT_FOUND?[3,6]:[4,b.teardown()];case 4:return i.sent(),[4,a()];case 5:return[2,i.sent()];case 6:g&&aW(JSON.stringify(g)),i.label=7;case 7:return b.listen(function(a){return(0,w.__awaiter)(h,void 0,void 0,function(){var c,e;return(0,w.__generator)(this,function(f){return e=(c=a.context).data,c.eventName===$.INIT&&(null==e?void 0:e.subWindowId)!==d&&b9(),c.eventName!==$.CANCEL&&c.eventName!==$.SUBMIT||b.teardown(),[2]})})}),bd()&&b.send({eventName:$.INIT,data:{subWindowId:d,hasOpener:!!window.opener}}),[3,10];case 8:return ct()?[3,10]:[4,new Promise(function(a){window.addEventListener("message",function b(c){var d=c.data,e=c.source,f=c.origin;if(d){var g=d.type,h=d.message;g===aa&&(window.removeEventListener("message",b),h&&aW(h),cs.setItem("mainWindowOrigin",f),e&&e.postMessage&&e.postMessage({status:aa},f),a())}})})];case 9:return[2,i.sent()];case 10:return[2]}})})}()];case 1:e.sent(),e.label=2;case 2:if(c.error&&c.liffOAuth2Error)throw h=c.error,i=c.error_description.replace(/\+/g," "),an(M,"".concat(h,": ").concat(i));return f=c.code,g=a7(),f&&!bd()&&g&&g.codeVerifier?[4,function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c,d=this;return(0,w.__generator)(this,function(e){switch(e.label){case 0:b=function(){return(0,w.__awaiter)(d,void 0,void 0,function(){var b,c,d,e,f,g;return(0,w.__generator)(this,function(h){var i,j,k,l;switch(h.label){case 0:return[4,(i=aK(),j=ar(window.location.search),k=a7(),l=as({grant_type:"authorization_code",client_id:j.liffClientId,appId:i.liffId,code:j.code,code_verifier:k.codeVerifier,redirect_uri:i.redirectUri||j.liffRedirectUri,id_token_key_type:"JWK"}),bS(bU.token,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:l}))];case 1:return c=(b=h.sent()).access_token,d=b.id_token,e=b.expires_in,aZ(a),a4(c),a9(new Date(Date.now()+1e3*e)),a8(),d?(a1(d),[4,c3(d,a)]):[3,3];case 2:(f=h.sent())&&bb(f),h.label=3;case 3:return(g=ar(location.hash).context_token)?(aO(c4(g)),[3,6]):[3,4];case 4:return[4,c8()];case 5:h.sent(),h.label=6;case 6:return[2]}})})},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,b()];case 2:return e.sent(),[3,4];case 3:throw c=e.sent(),a8(),c;case 4:return[2]}})})}(c.liffClientId)]:[3,4];case 3:e.sent(),e.label=4;case 4:return aI()?[4,function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return(0,w.__generator)(this,function(s){var t,u,v,x;switch(s.label){case 0:return[4,new Promise(function(a){var b=bl();if(!b||0>ad(b,"9.5.0"))a();else if(window._liff&&window._liff.features)a();else{A.debug("cannot find window._liff.features, listen to ready event");var c=function(){A.debug("ready event is fired"),b6("ready",c),a()};b5("ready",c)}})];case 1:return s.sent(),"boolean"==typeof c6&&A.warn("liff.init is not expected to be called more than once"),c6=!!aL(W.IS_SUBSEQUENT_LIFF_APP)||!(!aI()||ar(window.location.hash).feature_token||a$())&&(aM(W.IS_SUBSEQUENT_LIFF_APP,!0),!0),[4,function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c,d,e;return(0,w.__generator)(this,function(f){switch(f.label){case 0:return b=ar(window.location.hash),c=function(a){for(var b,c,d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];var f=function(b){Object.keys(b).filter(function(a){return null!==b[a]&&void 0!==b[a]}).forEach(function(c){a[c]=b[c]})};try{for(var g=(0,w.__values)(d),h=g.next();!h.done;h=g.next())f(h.value)}catch(a){b={error:a}}finally{try{h&&!h.done&&(c=g.return)&&c.call(g)}finally{if(b)throw b.error}}return a}({access_token:a3(),context_token:aL(W.RAW_CONTEXT),feature_token:a$(),id_token:a0(),client_id:aL(W.CLIENT_ID),mst_challenge:aY(),mst_verifier:aL(W.MST_VERIFIER),msit:aL(W.MSIT)},b),c6?bd()?[4,bS("".concat(bU.apps,"/").concat(a,"/featureToken"))]:[3,2]:[3,3];case 1:d=f.sent().featureToken,c.feature_token||(c.feature_token=d),f.label=2;case 2:(e=ao(a))&&(c.client_id=e),f.label=3;case 3:return[2,c]}})})}(a.liffId)];case 2:if(c=(b=s.sent()).access_token,d=b.context_token,e=b.feature_token,f=b.id_token,g=b.client_id,h=b.mst_verifier,i=b.mst_challenge,j=b.msit,d){if("string"!=typeof d)throw an(M,"Cannot get context token, perhaps there is an incorrect parameter in permanent link");aO(c4(d))}if(void 0!==(null==(q=aN())?void 0:q.liffId)&&(null==(r=aN())?void 0:r.liffId)!==a.liffId)throw an(M,"Invalid LIFF ID");return!bk()&&e&&(t=a.liffId,u=e,bw("multipleLiffTransition")&&c5({pathname:"app/".concat(t),query:{feature_token:u}}),c6&&a_(e)),i&&aM(W.MST_CHALLENGE,i),h&&(v=h,aM(W.MST_VERIFIER,v)),g&&aZ(g),j&&(x=j,aM(W.MSIT,x)),window.addEventListener("pageshow",c7),bd()||e&&c?[3,5]:c6?(cR({redirectUri:ax(location.href,{"liff.hback":"2"})}),[4,new Promise(function(){})]):[3,4];case 3:s.sent(),s.label=4;case 4:throw cR(),an(M,"Failed to parse feature_token or access_token");case 5:return c&&e?[4,bV(c)]:[3,7];case 6:if(l=(k=s.sent()).client_id,m=k.expires_in,l!==ao(a.liffId))throw cR(),an(M,"Failed to verify access_token");a_(e),a9(new Date(Date.now()+1e3*m)),a4(c),s.label=7;case 7:return[4,function(a,b){return(0,w.__awaiter)(this,void 0,void 0,function(){var c;return(0,w.__generator)(this,function(d){switch(d.label){case 0:var e,f,g;return(c=aX())?[2,c]:a&&b?[4,(f=(e={msit:a,mstVerifier:b}).msit,g=e.mstVerifier,f&&g?bS(bU.subWindowGetMSTByMSIT,{method:"POST",body:JSON.stringify({msit:f,mstVerifier:g})}):Promise.reject(an(L,"no proper argument")))]:[3,2];case 1:return[2,d.sent().mst];case 2:return[2,null]}})})}(j,h)];case 8:return(n=s.sent())?(aM(W.MST,n),[4,n?bS(bU.subWindowGetAppData,{method:"POST",body:JSON.stringify({mst:n})}):Promise.reject(an(L,"no proper argument"))]):[3,10];case 9:(o=s.sent().data)&&aW(JSON.stringify(o)),s.label=10;case 10:return f&&!a0()&&a1(f),f&&g&&!ba()?[4,c3(f,g)]:[3,12];case 11:(p=s.sent())&&bb(p),s.label=12;case 12:return[2]}})})}(a)]:[3,6];case 5:return e.sent(),[3,8];case 6:return bd()?[3,8]:[4,c8()];case 7:e.sent(),e.label=8;case 8:return[4,c9.invoke()];case 9:if(e.sent(),d=aN())try{bO(location.href,d.endpointUrl)}catch(a){A.warn("liff.init() was called with a current URL that is not related to the endpoint URL.\n".concat(location.href," is not under ").concat(d.endpointUrl))}return[4,b()];case 10:return e.sent(),aw(window.location.href),[2]}})})}(a,this.internalHooks.beforeFinished.call)])];case 3:return e.sent(),c1("color-scheme",((null==(g=aN())?void 0:g.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" ")),c_({matches:null==(h=window.matchMedia("(prefers-color-scheme: dark)"))?void 0:h.matches,media:null==h?void 0:h.media}),h.addEventListener?h.addEventListener("change",c_):h.addListener&&h.addListener(c_),[4,this.internalHooks.beforeSuccess.call()];case 4:return e.sent(),!a.withLoginOnExternalBrowser||bd()?[3,6]:(cR(),[4,new Promise(function(){})]);case 5:e.sent(),e.label=6;case 6:return[4,function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b,c;return(0,w.__generator)(this,function(d){switch(d.label){case 0:return(a=null!=(c=dd(window.location.href))?c:dd(window.document.referrer))&&ad(a,"13.10.0")>=0||aI()||"android"!==bn()||(b=ar(window.location.search))[bW]||b.liffIsEscapedFromApp?[2]:b.liffClientId&&document.referrer.includes("access.".concat("line.me"))?(window.location.href=ax(window.location.href,{liffIsEscapedFromApp:"true"}),[2]):b.liffClientId&&document.referrer.includes("android-app://")?[4,dc()]:[3,2];case 1:d.sent(),d.label=2;case 2:return b.liffClientId&&""===document.referrer&&1===window.history.length?[4,dc()]:[3,4];case 3:d.sent(),d.label=4;case 4:return!document.referrer.includes("liffClientId")||document.referrer.includes("liffIsEscapedFromApp")?[3,6]:[4,dc()];case 5:d.sent(),d.label=6;case 6:return[2]}})})}()];case 7:return e.sent(),[4,this.hooks.after.call()];case 8:return e.sent(),"function"==typeof b&&b(),z(),[3,11];case 9:return d=e.sent(),[4,this.internalHooks.error.call(d)];case 10:throw e.sent(),"function"==typeof c&&c(d),d;case 11:return[2]}})})},b}(F);function df(){return{liffApp:"https://liff.".concat("line.me"),liffServer:"https://api.".concat("line.me"),miniApp:"https://miniapp.".concat("line.me")}}function dg(){return null!==F&&F.apply(this,arguments)||this}function dh(){return navigator.language}(0,w.__extends)(dg,F),Object.defineProperty(dg.prototype,"name",{get:function(){return"getOrigins"},enumerable:!1,configurable:!0}),dg.prototype.install=function(){return function(){return df()}};function di(){return null!==F&&F.apply(this,arguments)||this}function dj(){var a=bl();if(!a||!aI()||"ios"!==bn())return navigator.language;if(ad(a,"14.11.0")>=0){var b=window.prompt("LIFF:GET_APP_LANGUAGE");if(b)return b}return navigator.language}(0,w.__extends)(di,F),Object.defineProperty(di.prototype,"name",{get:function(){return"getLanguage"},enumerable:!1,configurable:!0}),di.prototype.install=function(){return function(){return dh()}};function dk(){return null!==F&&F.apply(this,arguments)||this}function dl(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c,d,e,f,g;return(0,w.__generator)(this,function(h){switch(h.label){case 0:return!function(a){if(!ab.includes(a))throw an(L,"Unexpected permission name.");var b=aN();return!!(null==b?void 0:b.scope.includes(a))}(a)?[2,{state:"unavailable"}]:(b=a3())?[4,bV(b)]:[3,2];case 1:c=unescape(h.sent().scope).split(" ");try{for(e=(d=(0,w.__values)(c)).next();!e.done;e=d.next())if(e.value.includes(a))return[2,{state:"granted"}]}catch(a){f={error:a}}finally{try{e&&!e.done&&(g=d.return)&&g.call(d)}finally{if(f)throw f.error}}return[2,{state:"prompt"}];case 2:throw an(K,"Need access_token for api call, Please login first")}})})}function dm(){var a,b,c=aN();return!!c&&"square_chat"!==c.type&&(bw("skipChannelVerificationScreen")||!aI()&&(null==(b=null==(a=c.availability)?void 0:a.skipChannelVerificationScreen)?void 0:b.permission))}(0,w.__extends)(dk,F),Object.defineProperty(dk.prototype,"name",{get:function(){return"getAppLanguage"},enumerable:!1,configurable:!0}),dk.prototype.install=function(){return function(){return dj()}};var dn,dp=cK.on,dq=cK.off,dr=cK.open,ds=function(){function a(a,b){var c=this;this.onSubmit=function(a){return(0,w.__awaiter)(c,[a],void 0,function(a){var b=a.newAccessToken,c=a.ICA_ERROR;return(0,w.__generator)(this,function(a){return b?this.resolve({newAccessToken:b}):c&&this.reject(an(J,c)),this.teardown(),[2]})})},this.onClose=function(){return(0,w.__awaiter)(c,void 0,void 0,function(){return(0,w.__generator)(this,function(a){return this.reject(an(K,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onCancel=function(){return(0,w.__awaiter)(c,void 0,void 0,function(){return(0,w.__generator)(this,function(a){return this.reject(an(K,"user didn't allow the agreement")),this.teardown(),[2]})})},this.onError=function(a){return(0,w.__awaiter)(c,void 0,void 0,function(){return(0,w.__generator)(this,function(b){return this.reject(a),this.teardown(),[2]})})},this.resolve=a,this.reject=b,this.setup()}return a.prototype.setup=function(){dp("submit",this.onSubmit),dp("close",this.onClose),dp("cancel",this.onCancel),dp("error",this.onError)},a.prototype.teardown=function(){dq("submit",this.onSubmit),dq("close",this.onClose),dq("cancel",this.onCancel),dq("error",this.onError),dn=void 0},a.prototype.open=function(a){var b=aK().liffId;b?dr({url:"".concat("https://liff.line.me/1656032314-Xgrw5Pmk"),appData:{liffId:b,channelId:ao(b),accessToken:a3()},onBeforeTransition:a}).catch(this.reject):this.reject(an(K,"liffId is required"))},a}();function dt(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b=this;return(0,w.__generator)(this,function(c){switch(c.label){case 0:if(!dm())throw an(N,"SkipChannelVerificationScreen is unavailable.");return dn&&dn.teardown(),a=function(){return(0,w.__awaiter)(b,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){switch(b.label){case 0:return[4,function(){var a=aK().liffId;if(a)return bS("".concat(bU.unauthorizedPermissions,"?liffId=").concat(a),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(a3())}});throw an(K,"liffId is required")}()];case 1:if(a=b.sent(),(aI()?a:a.filter(function(a){return"chat_message.write"!==a})).length<=0)throw an(N,"All permissions have already been approved.");return[2]}})})},[4,new Promise(function(b,c){(dn=new ds(b,c)).open(a)})];case 1:return a4(c.sent().newAccessToken),[2]}})})}function du(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){switch(b.label){case 0:if(!(a=a3()))throw an(K,"Need access_token for api call, Please login first");return[4,bV(a)];case 1:return[2,decodeURIComponent(b.sent().scope).split(" ").filter(function(a){return""!==a})]}})})}function dv(a,b){var c=this;return function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];return(0,w.__awaiter)(c,void 0,void 0,function(){var c,e,f;return(0,w.__generator)(this,function(g){switch(g.label){case 0:return e=void 0!==(c=(d.length>0?d[d.length-1]:{}).ignorePermissionCheck)&&c,[4,dl(b)];case 1:if("unavailable"!==(f=g.sent().state))return[3,2];throw an(N,"The permission is not in LIFF app scope.");case 2:return"prompt"===f&&dm()&&!e&&(aI()||"chat_message.write"!==b)?[4,dt()]:[3,4];case 3:return g.sent(),[3,5];case 4:e&&d.pop(),g.label=5;case 5:return[4,a.apply(void 0,(0,w.__spreadArray)([],(0,w.__read)(d),!1))];case 6:return[2,g.sent()]}})})}}var dw=new(function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"permission"},enumerable:!1,configurable:!0}),b.prototype.install=function(){return{query:dl,requestAll:dt,getGrantedAll:du}},b}(F));function dx(){return bS(bU.profile)}function dy(){return null!==F&&F.apply(this,arguments)||this}function dz(a){if(!function(a){if(!a||"object"!=typeof a)return!1;var b=a.url,c=a.external,d=(0,w.__read)([typeof b,typeof c],2),e=d[0],f=d[1];return"string"===e&&""!==b&&("undefined"===f||"boolean"===f)}(a))throw an(L,"Invalid parameters for liff.openWindow()");var b=bl();if(aI())if(null!==b&&"ios"===bn()&&ad(b,"9.19")>=0||!window._liff.postMessage){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=a.url,q=a.external;window.open((c=void 0!==q&&q,-1!==p.indexOf("#")&&-1!==p.indexOf("?")&&p.indexOf("#")<p.indexOf("?")||-1===p.indexOf("?")&&-1!==p.indexOf("#")?(l=(f=(0,w.__read)(p.split("#"),2))[0],g=f[1],m=(h=(0,w.__read)((void 0===g?"":g).split("?"),2))[0],n=h[1]):(l=(i=(0,w.__read)(p.split("?"),2))[0],j=i[1],n=(k=(0,w.__read)((void 0===j?"":j).split("#"),2))[0],m=k[1]),d=n,e=m,o=d?"&".concat(d.split("&").filter(function(a){return -1===a.indexOf("is_liff_external_open_window")}).join("&").concat("".concat(e?"#".concat(e):""))):"".concat(e?"#".concat(e):""),"".concat(l,"?").concat("is_liff_external_open_window","=").concat(!!c).concat(o)))}else b8("openWindow",a);else window.open(a.url,"_blank")}(0,w.__extends)(dy,F),Object.defineProperty(dy.prototype,"name",{get:function(){return"getProfile"},enumerable:!1,configurable:!0}),dy.prototype.install=function(){return dv(dx,"profile")};function dA(){return null!==F&&F.apply(this,arguments)||this}(0,w.__extends)(dA,F),Object.defineProperty(dA.prototype,"name",{get:function(){return"openWindow"},enumerable:!1,configurable:!0}),dA.prototype.install=function(){return function(a){return dz(a)}};var dB=function(a){var b;return"object"==typeof a&&null!==a&&("string"==typeof(b=a.type)||b instanceof String)};function dC(a){return Promise.reject(an(L,a))}function dD(a){if(!(Array.isArray(a)&&a.every(dB)))return dC("Parameter 'messages' must be an array of { type, ... }");var b=a.length;return b<1||b>5?dC("Number of messages should be in range 1 to ".concat(5,".")):bS(bU.message,{method:"POST",body:JSON.stringify({messages:a})}).catch(dE)}var dE=function(a){if("403"===a.code){var b="12.0.0"===bl(),c="ios"===bn(),d=aD();b&&(c||d)&&window.alert("LINEアプリをLINE 12.0.1以降にアップデートしてください。\nPlease update your LINE app to LINE 12.0.1 or later.")}throw a},dF=F;function dG(){return null!==dF&&dF.apply(this,arguments)||this}function dH(){return bS(bU.friendship)}(0,w.__extends)(dG,dF),Object.defineProperty(dG.prototype,"name",{get:function(){return"sendMessages"},enumerable:!1,configurable:!0}),dG.prototype.install=function(){return dv(dD,"chat_message.write")};function dI(){return null!==F&&F.apply(this,arguments)||this}(0,w.__extends)(dI,F),Object.defineProperty(dI.prototype,"name",{get:function(){return"getFriendship"},enumerable:!1,configurable:!0}),dI.prototype.install=function(){return dv(dH,"profile")};var dJ,dK=function(a){function b(){var b=a.apply(this,(0,w.__spreadArray)([],(0,w.__read)(arguments),!1))||this;return b.utsExtra={isLiffSuccessful:!1,isLoggedIn:!1,id:"",version:""},b.injected=!1,b}return(0,w.__extends)(b,a),Object.defineProperty(b,"CUSTOMPLACEID_INIT",{get:function(){return"liff.init"},enumerable:!1,configurable:!0}),Object.defineProperty(b,"CUSTOMTYPE",{get:function(){return"liffSdk"},enumerable:!1,configurable:!0}),Object.defineProperty(b,"LiffUtsLoginStatus",{get:function(){return{isLoggedIn:1,isLiffSuccessful:2}},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"name",{get:function(){return"analytics"},enumerable:!1,configurable:!0}),b.prototype.install=function(a){var b=a.liff,c=a.internalHooks;this.liffCore=b,c.init.beforeFinished(this.beforeInitFinished.bind(this)),c.init.beforeSuccess(this.beforeInitSuccess.bind(this)),c.init.error(this.initError.bind(this))},b.prototype.createDeprecatedUtsProxy=function(a){return new Proxy(a,{get:function(a,b){var c=a[b];return"function"==typeof c?function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];return A.warn("[LIFF Analytics] ".concat("LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions."," Called method: ").concat(String(b))),c.apply(a,d)}:c}})},b.prototype.changeRatioToUTSFormat=function(a){if(a&&Number.isFinite(a))return Math.round(100*a)},b.prototype.setExtra=function(){var a,c=this.utsExtra,d=c.isLiffSuccessful,e=c.isLoggedIn,f=c.id,g=c.version,h=(e?b.LiffUtsLoginStatus.isLoggedIn:0)|(d?b.LiffUtsLoginStatus.isLiffSuccessful:0);null==(a=this.uts)||a.setExtra("liff",{id:f,loginStatus:h,version:g})},b.prototype.assignUtsExtra=function(a){Object.assign(this.utsExtra,a)},b.prototype.setVersion=function(a){this.assignUtsExtra({version:a}),A.debug("[LIFFUTS][SDK version] ".concat(a)),this.setExtra()},b.prototype.setLiffId=function(a){this.assignUtsExtra({id:a}),A.debug("[LIFFUTS][LIFFID] ".concat(a)),this.setExtra()},b.prototype.setIsLoggedIn=function(a){this.assignUtsExtra({isLoggedIn:a}),A.debug("[LIFFUTS][isLoggedIn] ".concat(a)),this.setExtra()},b.prototype.sendLiffInit=function(){var a;A.debug("[LIFFUTS][sendCustom] liff.init"),null==(a=this.uts)||a.sendCustom({type:b.CUSTOMTYPE,params:{placeId:b.CUSTOMPLACEID_INIT}})},b.prototype.setIsLiffSuccessful=function(a){this.assignUtsExtra({isLiffSuccessful:a}),A.debug("[LIFFUTS][isLiffInitSuccessful] ".concat(a)),this.setExtra()},b.prototype.prepareReferrer=function(a){var b={};Object.keys(a).forEach(function(c){if(Z.includes(c)){var d=a[c];"string"==typeof d&&d&&(b[c.replace(/^liff\.ref\./,"")]=d)}}),Object.keys(b).length>0&&(this.referrer=b)},b.prototype.beforeInitFinished=function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b,c,d,e,f,g,h,i,j,k,l;return(0,w.__generator)(this,function(m){switch(m.label){case 0:if(a=ar(window.location.search),this.prepareReferrer(a),!(c=null==(b=aN())?void 0:b.utsTracking))return[2];if(e=(d=aK()).liffId,f=d.analytics,"auto"!==c.mode||!f)return[3,6];A.warn("[LIFF Analytics] LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions."),A.debug("[LIFFUTS] ".concat((new Date).toUTCString())),m.label=1;case 1:return m.trys.push([1,3,,4]),g=this,[4,new Promise(function(a,b){var c=window.uts,d=document.createElement("script");d.type="text/javascript",d.src="https://static.line-scdn.net/uts/edge/4.1.0/uts.js",d.onload=function(){a(window.uts),window.uts=c},d.onerror=function(a){b(a)},document.getElementsByTagName("head")[0].appendChild(d)})];case 2:return g.uts=m.sent(),[3,4];case 3:return h=m.sent(),A.debug("[LIFFUTS] cannot load UTS, reason: ".concat(h)),[2];case 4:return i=(0,w.__assign)((0,w.__assign)({},f.context),{utsId:f.context.utsId,appName:f.context.appName,appEnv:f.context.appEnv||"release"}),j=(0,w.__assign)((0,w.__assign)({endpoint:"https://uts-front.line-apps.com"},f.options),{sampleRate:this.changeRatioToUTSFormat(c.sendRatio),version:"current"}),this.uts.init(i,j),[4,function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){switch(b.label){case 0:return[4,function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b;return(0,w.__generator)(this,function(c){switch(c.label){case 0:if(!bd())return[3,6];c.label=1;case 1:return c.trys.push([1,5,,6]),(a=ba())&&a.sub?[2,a.sub]:[3,2];case 2:return[4,dx()];case 3:if((b=c.sent())&&b.userId)return[2,b.userId];c.label=4;case 4:return[3,6];case 5:return c.sent(),A.debug("can't retrieve Mid/Uid because of something wrong"),[3,6];case 6:return[2]}})})}()];case 1:return(a=b.sent())&&"u"===a.substring(0,1)?[2,a]:[2]}})})}()];case 5:(k=m.sent())&&(A.debug("[LIFFUTS][mid] ".concat(k)),this.uts.setMid(k)),(null==b?void 0:b.tid)&&(A.debug("[LIFFUTS][tid] ".concat(b.tid)),this.uts.setTid(b.tid)),this.referrer&&(A.debug("liff.ref.referrer",this.referrer),this.uts.setSessionParams(this.referrer)),e&&this.setLiffId(e),this.setIsLoggedIn(bd()),this.setVersion(bf()),l=av(location.href),A.debug("[LIFFUTS][url] ".concat(l)),this.uts.setUrl(l),this.liffCore.analytics=this.createDeprecatedUtsProxy(this.uts),this.injected=!0,m.label=6;case 6:return[2]}})})},b.prototype.beforeInitSuccess=function(){return this.injected&&(this.setIsLiffSuccessful(!0),this.sendLiffInit()),Promise.resolve()},b.prototype.initError=function(){return this.injected&&(this.setIsLiffSuccessful(!1),this.sendLiffInit()),Promise.resolve()},b}(F),dL=function(a){A.warn("[LIFF Analytics] LIFF Analytics is deprecated and will be removed in a future version. Please migrate to alternative analytics solutions. Called function: sendShareTargetPicker"),A.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"),a.sendCustom({type:"liffSdk",params:{placeId:"liff.shareTargetPicker"}})},dM=function(){function a(a,b){var c=this;this.resolve=a,this.reject=b,this.onSubmit=function(a){var b=a.message;c.resolve({value:b}),c.destroy()},this.onClose=function(){c.resolve({value:null}),c.destroy()},this.onCancel=function(){c.resolve({value:null}),c.destroy()},this.onError=function(a){c.reject(a),c.destroy()},this.start()}return a.prototype.start=function(){cK.on("submit",this.onSubmit),cK.on("close",this.onClose),cK.on("cancel",this.onCancel),cK.on("error",this.onError)},a.prototype.destroy=function(){cK.off("submit",this.onSubmit),cK.off("close",this.onClose),cK.off("cancel",this.onCancel),cK.off("error",this.onError),dJ=void 0},a}();function dN(){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(a){return bv.scanCodeV2(),dJ&&dJ.destroy(),[2,new Promise(function(a,b){dJ=new dM(a,b),cK.open({url:"https://liff.line.me/1656359117-jxmx5e11"}).catch(function(a){null==dJ||dJ.destroy(),b(a)})})]})})}var dO=new(function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"scanCodeV2"},enumerable:!1,configurable:!0}),b.prototype.install=function(){return dN},b}(F)),dP={},dQ=!1,dR=!1;function dS(a,b,c,d){if(void 0===c&&(c={}),"object"!=typeof a||!a.postMessage)throw an(L,"target must be window object");if("string"!=typeof b)throw an(L,"keyname must be string");if("object"!=typeof c)throw an(L,"incorrect body format. It should be Object or Array comprised of Object");if(!d)throw an(L,"serverEndPointUrl isn't passed. please fill up with proper url");if("*"===d)throw Error("serverEndPointUrl doesn't allow to set '*'");var e={name:b,body:c};a.postMessage(e,d)}var dT=function(){function a(){this.payloadToShareTargetPicker=null,this.popupWindow=null,this.doesWaitForSubwindowResult=!1}return a.getInstance=function(){return a.instance?a.instance.reset():a.instance=new a,a.instance},a.prototype.init=function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c;return(0,w.__generator)(this,function(d){switch(d.label){case 0:return d.trys.push([0,5,,6]),this.liffId=a.referrer.liffId,this.doesWaitForSubwindowResult=!(!a.options||!a.options.waitForSubwindowResult),this.allowPostMessageOrigin=this.initAllowPostMessageOrigin(),this.payloadToShareTargetPicker=this.buildPayloadToShareTargetPicker(a),window.AbortController&&(this.abortController=new window.AbortController),this.prepareAnotherWindow(),[4,this.initOtt()];case 1:return d.sent(),this.initListener(),this.openAnotherWindow(),this.doesWaitForSubwindowResult?[4,this.pollingShareResult()]:[3,3];case 2:return b=d.sent(),this.finalize(),[2,b];case 3:case 6:return[2];case 4:return[3,6];case 5:if(c=d.sent(),this.finalize(),"AbortError"!==c.name)throw c;return[3,6]}})})},a.prototype.resetAllVariables=function(){this.liffId="",this.allowPostMessageOrigin="",this.payloadToShareTargetPicker=null,this.ott="",this.popupWindow=null,this.timeoutIDForHealthCheck=null,this.abortController=null,this.internalError=null,this.doesWaitForSubwindowResult=!1},a.prototype.reset=function(){this.finalize(),this.resetAllVariables()},a.prototype.finalize=function(){var a,b,c,d,e,f;this.abortController&&this.abortController.abort(),aI()||(a=this.timeoutIDForHealthCheck,b=this.popupWindow,c=window,d="message.receivedHealthcheck",e=(0,w.__read)(d.split("."),1)[0],(f=dP[d])&&c.removeEventListener(e,f),dP[d]=null,a&&clearTimeout(a),b&&!b.closed&&b.close())},a.prototype.buildPayloadToShareTargetPicker=function(a){return{messages:a.messages,isMultiple:a.isMultiple,referrer:a.referrer}},a.prototype.initAllowPostMessageOrigin=function(a){var b;return void 0===a&&(a=bU.shareTargetPicker),(b=a.match(/^(https?:\/\/.*?)\//))&&b[1]||""},a.prototype.initOtt=function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b,c;return(0,w.__generator)(this,function(d){switch(d.label){case 0:return this.abortController&&(a=this.abortController.signal),b="".concat(bU.shareTargetPickerOtt,"/").concat(this.liffId,"/ott"),c=this,[4,bS(b,{method:"GET",signal:a}).then(function(a){return a.ott})];case 1:return c.ott=d.sent(),[2]}})})},a.prototype.prepareAnotherWindow=function(){aI()||("ios"!==bn()||aD()?this.popupWindow=window.open("","liffpopup","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):this.popupWindow=window.open())},a.prototype.openAnotherWindow=function(){var a,b,c,d,e;if(aI()&&this.payloadToShareTargetPicker)a=this.liffId,b={liffId:a,ott:this.ott,data:JSON.stringify(this.payloadToShareTargetPicker),closeModals:!1},location.href="".concat("line://picker","?").concat(as(b));else{if(this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),!this.popupWindow)throw an(Q);c=this.popupWindow,d=this.liffId,e=this.ott,c.location.href="".concat(bU.shareTargetPicker,"?").concat(as({liffId:d,ott:e}))}},a.prototype.initListener=function(){var a,b,c,d,e,f,g;aI()||(a=this.onReceivedHealthcheck.bind(this),b=this.allowPostMessageOrigin,d="receivedHealthcheck",c=window,e="message.".concat(d),f=function(c){A.debug("messageReceive",c),c.origin===b&&c.data.name===d&&a(c)},dQ||(dR=function(){var a=!1;try{var b=Object.defineProperty({},"passive",{get:function(){return a=!0,!1}});window.addEventListener("test",b,b),window.removeEventListener("test",b,b)}catch(b){a=!1}return a}(),dQ=!0),g=(0,w.__read)(e.split("."),1)[0],new Promise(function(a){var b=function(b){a(b),f&&f(b)};dP[e]=b,c.addEventListener(g,b,!!dR&&void 0)}))},a.prototype.healthCheck=function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a;return(0,w.__generator)(this,function(b){switch(b.label){case 0:if(this.popupWindow&&!this.popupWindow.closed)return[3,7];if(!this.doesWaitForSubwindowResult)return[3,5];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,this.onCanceled()];case 2:return b.sent(),[3,4];case 3:return a=b.sent(),this.internalError=a,[3,4];case 4:return[3,6];case 5:this.finalize(),b.label=6;case 6:return[3,8];case 7:dS(this.popupWindow,"healthcheck",void 0,this.allowPostMessageOrigin),this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),b.label=8;case 8:return[2]}})})},a.prototype.onReceivedHealthcheck=function(){var a;if(!this.popupWindow||!this.payloadToShareTargetPicker)throw an(Q);a=this.popupWindow,dS(a,"ready",this.payloadToShareTargetPicker,this.allowPostMessageOrigin)},a.prototype.onCanceled=function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b;return(0,w.__generator)(this,function(c){switch(c.label){case 0:if(aI()||!this.ott)throw Error("need to call with ott in client");return this.abortController&&(a=this.abortController.signal),b={liffId:this.liffId,ott:this.ott},[4,bS("".concat(bU.shareTargetPickerResult,"?").concat(as(b)),{method:"POST",signal:a,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:"result=CANCEL"})];case 1:return[2,"ok"===c.sent().status]}})})},a.prototype.getShareResult=function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var a,b;return(0,w.__generator)(this,function(c){if(!this.ott)throw Error("need to call with ott in client");return this.abortController&&(a=this.abortController.signal),b={liffId:this.liffId,ott:this.ott},A.debug("fetch: getShareResult"),[2,bS("".concat(bU.shareTargetPickerResult,"?").concat(as(b)),{method:"GET",headers:{Accept:"application/json"},signal:a})]})})},a.isPollingTimeOut=function(a,b){return(b-a)/6e4>=10},a.prototype.pollingShareResult=function(){return(0,w.__awaiter)(this,void 0,void 0,function(){var b,c;return(0,w.__generator)(this,function(d){switch(d.label){case 0:b=Date.now(),d.label=1;case 1:if(a.isPollingTimeOut(b,Date.now()))return[3,4];if(this.internalError)throw this.internalError;return[4,this.getShareResult()];case 2:if((c=d.sent())&&c.result)switch(c.result){case"SUCCESS":return[2,{status:"success"}];case"CANCEL":return[2];default:throw Error(c.resultDescription)}return[4,new Promise(function(a){setTimeout(a,500)})];case 3:return d.sent(),[3,1];case 4:throw Error("Timeout: not finished within ".concat(10,"min"))}})})},a}(),dU=new(function(a){function b(){var b=a.apply(this,(0,w.__spreadArray)([],(0,w.__read)(arguments),!1))||this;return b.shareTargetPicker=function(a){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return(0,w.__awaiter)(b,(0,w.__spreadArray)([a],(0,w.__read)(c),!1),void 0,function(a,b){var c,d,e,f,g,h,i;return void 0===b&&(b={}),(0,w.__generator)(this,function(j){switch(j.label){case 0:if(bv.shareTargetPicker(),!a||!Array.isArray(a)||0===a.length)throw an(L,"no proper argument");if(a.length>5)throw an(L,"exceed the limit of num of messages");if(!(c=aK().liffId))throw an(O);window.liff&&(d=window.liff).analytics&&dL(d.analytics),e=void 0===b.isMultiple||b.isMultiple,j.label=1;case 1:return j.trys.push([1,3,,4]),f=dT.getInstance(),g=bl(),h={waitForSubwindowResult:!0},aI()&&g&&0>ad(g,"10.11.0")&&(h.waitForSubwindowResult=!1),[4,f.init({messages:a,isMultiple:e,referrer:{liffId:c,url:location.origin},options:h})];case 2:return[2,j.sent()];case 3:throw(i=j.sent())instanceof am?i:an(R,i.message);case 4:return[2]}})})},b}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"shareTargetPicker"},enumerable:!1,configurable:!0}),b.prototype.install=function(){return this.shareTargetPicker},b}(F));function dV(a,b){return(0,w.__awaiter)(this,void 0,void 0,function(){var c;return(0,w.__generator)(this,function(d){switch(d.label){case 0:return(c=new URL(bU.createShortcutOnHomeScreen)).searchParams.append("liffId",a),c.searchParams.append("url",b.url),b.description&&c.searchParams.append("description",b.description),[4,bS(c.toString())];case 1:return[2,d.sent().shortcutPageUrl]}})})}function dW(a){if(aC(a))throw an(L,"LINE URL scheme are not supported in the current environment.")}function dX(a){if(void 0===a.url||null===a.url||""===a.url)throw an(L,"no proper argument");var b,c=aN();if(!(null==(b=null==c?void 0:c.availability.addToHomeLineScheme)?void 0:b.permission)){if(aC(a.url))throw an(N,"No permission to specify line schema in url.");if(a.description)throw an(N,"No permission to specify description.")}if(!aC(a.url)){if(!c)throw an(N,"Could not get Context from server.");c.liffId!==aA(a.url)&&bO(a.url,c.endpointUrl)}}function dY(a){return(0,w.__awaiter)(this,void 0,void 0,function(){var b;return(0,w.__generator)(this,function(c){switch(c.label){case 0:if(!(b=aK().liffId))throw an(M,"Invalid LIFF ID.");return"ios"===bn()?[4,function(a,b){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(c){switch(c.label){case 0:return dW(b.url),[4,dV(a,b)];case 1:return dz({url:c.sent(),external:!0}),[2]}})})}(b,a)]:[3,2];case 1:return c.sent(),[3,4];case 2:return[4,function(a,b){return(0,w.__awaiter)(this,void 0,void 0,function(){var c,d;return(0,w.__generator)(this,function(e){switch(e.label){case 0:return c={liffId:a,targetUrl:b.url,description:b.description},d="".concat("line://shortcut/liff","?").concat(as(c)),location.href=d,[4,function(a,b){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(c){switch(c.label){case 0:return aI()?[2]:[4,new Promise(function(a){setTimeout(a,1e3)})];case 1:return c.sent(),"hidden"===document.visibilityState?[2]:(dW(b.url),[4,dV(a,b)]);case 2:return dz({url:c.sent(),external:!0}),[2]}})})}(a,b)];case 1:return e.sent(),[2]}})})}(b,a)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}var dZ=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"createShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),b.prototype.install=function(){return function(a){return function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(b){switch(b.label){case 0:return dX(a),bv.createShortcutOnHomeScreen(),[4,dY(a)];case 1:return b.sent(),[2]}})})}(a)}},b}(F),d$=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"internalCreateShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),b.prototype.install=function(){return function(a){return function(a){return(0,w.__awaiter)(this,void 0,void 0,function(){return(0,w.__generator)(this,function(b){switch(b.label){case 0:return dX(a),bv.internalCreateShortcutOnHomeScreen(),[4,dY(a)];case 1:return b.sent(),[2]}})})}(a)}},b}(F);function d_(a){return(0,w.__awaiter)(this,arguments,void 0,function(a){var b=a.productIds;return(0,w.__generator)(this,function(a){switch(a.label){case 0:return[4,b8("iap.getPlatformProducts",{productIds:b}).catch(function(a){if(a.code&&a.description)throw an(a.code,a.description);throw an(J,"Failed to get platform products",{cause:a})})];case 1:return[2,a.sent().products]}})})}var d0=function(a){return(0,w.__awaiter)(void 0,[a],void 0,function(a){var b,c=a.productId,d=a.orderId;return(0,w.__generator)(this,function(a){switch(a.label){case 0:var e;return(null==(b=aN())?void 0:b.isIapSandbox)?[4,(e={productId:c,orderId:d},(0,w.__awaiter)(void 0,[e],void 0,function(a){var b=a.productId,c=a.orderId;return(0,w.__generator)(this,function(a){switch(a.label){case 0:if(!window.confirm("Proceed with a test in-app purchase?"))throw an("CANCELED","Transaction was canceled.");return[4,bS(bU.iapVirtualConfirm,{method:"POST",body:JSON.stringify({productId:b,orderId:c})})];case 1:return a.sent(),[2]}})}))]:[3,2];case 1:case 3:return a.sent(),[2];case 2:return[4,b8("iap.createPayment",{productId:c,orderId:d}).catch(function(a){if(a.code&&a.description)throw an(a.code,a.description);throw an(J,"Failed to get platform products",{cause:a})})]}})})},d1=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,w.__extends)(b,a),Object.defineProperty(b.prototype,"name",{get:function(){return"iap"},enumerable:!1,configurable:!0}),b.prototype.install=function(){var a=this;return{getPlatformProducts:function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(0,w.__awaiter)(a,void 0,void 0,function(){return(0,w.__generator)(this,function(a){return bv.iap(),[2,d_.apply(void 0,(0,w.__spreadArray)([],(0,w.__read)(b),!1))]})})},createPayment:function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(0,w.__awaiter)(a,void 0,void 0,function(){return(0,w.__generator)(this,function(a){return bv.iap(),[2,d0.apply(void 0,(0,w.__spreadArray)([],(0,w.__read)(b),!1))]})})},requestConsentAgreement:function(){return(0,w.__awaiter)(a,void 0,void 0,function(){return(0,w.__generator)(this,function(a){return bv.iap(),[2,(0,w.__awaiter)(void 0,void 0,void 0,function(){return(0,w.__generator)(this,function(a){switch(a.label){case 0:return[4,b8("iap.requestConsentAgreement").catch(function(a){if(a.code&&a.description)throw an(a.code,a.description);throw an(J,"Failed to request consent agreement",{cause:a})})];case 1:return a.sent(),[2]}})})]})})}}},b}(F),d2=Object.defineProperties({},{getOS:{value:bn,enumerable:!0,writable:!0},getVersion:{value:bf,enumerable:!0,writable:!0},getLanguage:{value:dh,enumerable:!0,writable:!0},getAppLanguage:{value:dj,enumerable:!0,writable:!0},getOrigins:{value:df,enumerable:!0,writable:!0},isInClient:{value:aI,enumerable:!0,writable:!0},isLoggedIn:{value:bd,enumerable:!0,writable:!0},logout:{value:bE,enumerable:!0,writable:!0},getAccessToken:{value:a3,enumerable:!0,writable:!0},getIDToken:{value:a0,enumerable:!0,writable:!0},getDecodedIDToken:{value:ba,enumerable:!0,writable:!0},getContext:{value:aN,enumerable:!0,writable:!0},openWindow:{value:dz,enumerable:!0,writable:!0},closeWindow:{value:b9,enumerable:!0,writable:!0},getFriendship:{value:dv(dH,"profile"),enumerable:!0,writable:!0},getAId:{value:aQ,enumerable:!0,writable:!0},getProfilePlus:{value:aU,enumerable:!0,writable:!0},getIsVideoAutoPlay:{value:aS,enumerable:!0,writable:!0},getLineVersion:{value:bl,enumerable:!0,writable:!0},isApiAvailable:{value:bw,enumerable:!0,writable:!0},getProfile:{value:dv(dx,"profile"),enumerable:!0,writable:!0},sendMessages:{value:dv(dD,"chat_message.write"),enumerable:!0,writable:!0},subWindow:{value:cK,enumerable:!0,writable:!0},ready:{value:I,enumerable:!0,writable:!0},id:{get:function(){return aK().liffId||null},enumerable:!0},_dispatchEvent:{value:function(a){var b={};try{b=JSON.parse(a)}catch(a){throw an(L,a.message)}var c=new CustomEvent(S,{detail:b});A.debug("[client dispatchEvent to js]",{type:c.type,detail:c.detail}),window.dispatchEvent(c)},enumerable:!0,writable:!0},_call:{value:b8,enumerable:!0,writable:!0},_addListener:{value:b5,enumerable:!0,writable:!0},_removeListener:{value:b6,enumerable:!0,writable:!0},_postMessage:{value:b7,enumerable:!0,writable:!0}}),d3=new E,d4=new D(d3,d2),d5=new H(d3,d4).install();[new H(d3,d4),new cS,new de,new dK,dO,bP,bj,dw,dU,cY,new bD,new dZ,new d$,new d1].forEach(function(a){d5.call(d2,a)}),a.s(["useLineLiff",0,()=>{let[a,c]=(0,b.useState)(null),[d,e]=(0,b.useState)(null);(0,b.useEffect)(()=>{},[]);let f=async a=>{if(d2&&d2.isLoggedIn())try{d2.isInClient()?(await d2.sendMessages([{type:"text",text:a}]),console.log("LINE message sent:",a)):console.log("Not in LINE client, cannot send implicit message. Use backend.")}catch(a){console.error("Error sending LINE message",a)}};return{liff:d2,profile:d,liffError:a,login:()=>{d2&&!d2.isLoggedIn()&&d2.login()},sendMessage:f}}],21448)}];

//# sourceMappingURL=music-studio-app_15877d6d._.js.map