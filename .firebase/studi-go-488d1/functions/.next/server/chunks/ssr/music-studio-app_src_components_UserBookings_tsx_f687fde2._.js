module.exports=[24411,a=>{"use strict";var b=a.i(15334),c=a.i(66757),d=a.i(4715),e=a.i(10425),f=a.i(86176),g=a.i(11866),h=a.i(97438),i=a.i(86378),j=a.i(16586),k=a.i(47369),l=a.i(14617),m=a.i(4507),n=a.i(914),o=a.i(13035);let p=(0,o.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var q=a.i(50048),r=a.i(56162),s=a.i(84495);let t=(0,o.default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),u=(0,o.default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var v=a.i(9048),w=a.i(10623);let x=(0,w.createServerReference)("001aaeba859f050f484d75f7c922e9dbc2294c9bae",w.callServer,void 0,w.findSourceMapURL,"fetchMyBookings"),y=(0,w.createServerReference)("40e52a23ec02f4934ec4cbf15742a1edb8f0ba0e43",w.callServer,void 0,w.findSourceMapURL,"cancelBookingAction"),z=(0,w.createServerReference)("60b9ade70d3c57ffe44daa42c6679956674fc101de",w.callServer,void 0,w.findSourceMapURL,"updateBookingAction");var A=a.i(41943),B=a.i(26465),C=a.i(66760),D=a.i(90732),E=a.i(34183);function F(){let[a,o]=(0,c.useState)([]),[w,F]=(0,c.useState)(!0),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(""),[S,T]=(0,c.useState)(""),U=(0,D.useRouter)(),V=async()=>{F(!0),o(await x()),F(!1)};(0,c.useEffect)(()=>{V()},[]);let W=async a=>{if(!confirm("本当にこの予約をキャンセルしますか？"))return;H(a);let b=await y(a);b.success?(alert("予約をキャンセルしました。"),await V()):alert(b.message),H(null)},X=async()=>{if(M){H(M.id),L(!1);try{let a=await z(M.id,{date:O,startTime:Q,durationHours:parseInt(S)});a.success?(alert("予約内容を変更しました。"),await V()):alert(a.message)}catch(a){alert("通信エラーが発生しました。")}finally{H(null),N(null)}}};return w?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[(0,b.jsx)(q.Loader2,{className:"animate-spin h-8 w-8 text-cyan-400"}),(0,b.jsx)("p",{className:"text-gray-500 font-mono tracking-widest animate-pulse",children:"AUTHORIZING ACCESS..."})]}):(0,b.jsxs)("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-20",children:[(0,b.jsx)("div",{className:"flex justify-start mb-4",children:(0,b.jsxs)(e.Button,{variant:"ghost",onClick:()=>U.back(),className:"text-gray-500 hover:text-white group flex items-center gap-2 px-0",children:[(0,b.jsx)(s.ArrowLeft,{className:"h-4 w-4 transition-transform group-hover:-translate-x-1"}),(0,b.jsx)("span",{className:"text-xs font-mono tracking-tighter",children:"BACK() // RETURN TO PREVIOUS"})]})}),(0,b.jsx)("header",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"h-12 w-1.5 bg-cyan-500 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-6xl font-black italic tracking-tighter text-white uppercase leading-none",children:"My Bookings"}),(0,b.jsx)("p",{className:"text-gray-500 font-mono text-sm mt-2 uppercase tracking-[0.3em]",children:"RESERVATION_HISTORY_v.4.1"})]})]})}),0===a.length?(0,b.jsxs)(d.Card,{className:"bg-slate-900/50 border-white/5 border-dashed py-20 flex flex-col items-center gap-6",children:[(0,b.jsx)("div",{className:"p-4 bg-white/5 rounded-full",children:(0,b.jsx)(j.Calendar,{className:"h-10 w-10 text-gray-700"})}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-400",children:"予約履歴がありません"}),(0,b.jsx)("p",{className:"text-gray-600 text-sm",children:"次回のセッションを予約しましょう"})]}),(0,b.jsx)(e.Button,{onClick:()=>U.push("/studios"),className:"bg-cyan-500 hover:bg-cyan-400 text-black font-bold",children:"スタジオを探す"})]}):(0,b.jsx)("div",{className:"grid gap-6",children:a.map(a=>{let c=(0,C.isFuture)((0,B.parseISO)(a.date))&&"cancelled"!==a.status,g=G===a.id;return(0,b.jsx)(d.Card,{className:`bg-slate-900 border-white/10 overflow-hidden group transition-all hover:border-cyan-500/30 ${"cancelled"===a.status?"opacity-50 grayscale":""}`,children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,b.jsxs)("div",{className:"p-8 flex-1 space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-[9px] font-mono text-gray-600 uppercase tracking-widest mb-1",children:["ID: ",a.id]}),(0,b.jsx)("h3",{className:"text-3xl font-black text-white group-hover:text-cyan-400 transition-colors uppercase italic",children:a.studioName})]}),(0,b.jsx)(f.Badge,{variant:"outline",className:`px-4 py-1 rounded-full border-none font-bold text-[10px] ${"cancelled"===a.status?"bg-red-500/10 text-red-500":"modified"===a.status?"bg-orange-500/10 text-orange-400":"bg-green-500/10 text-green-400"}`,children:a.status?.toUpperCase()||"FULLY_RESERVED"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 border-t border-white/5 pt-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"text-[10px] text-gray-600 uppercase flex items-center gap-1 font-bold tracking-widest",children:[(0,b.jsx)(j.Calendar,{className:"h-3 w-3"})," Date"]}),(0,b.jsx)("div",{className:"text-sm font-black text-white",children:(0,A.format)((0,B.parseISO)(a.date),"yyyy.MM.dd")})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"text-[10px] text-gray-600 uppercase flex items-center gap-1 font-bold tracking-widest",children:[(0,b.jsx)(k.Clock,{className:"h-3 w-3"})," Time / Slot"]}),(0,b.jsxs)("div",{className:"text-sm font-black text-white",children:[a.startTime," (",a.durationHours,"h)"]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"text-[10px] text-gray-600 uppercase flex items-center gap-1 font-bold tracking-widest",children:[(0,b.jsx)(l.MapPin,{className:"h-3 w-3"})," Zone / Studio"]}),(0,b.jsx)("div",{className:"text-sm font-black text-white",children:a.roomName||"Main Hall"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"text-[10px] text-gray-600 uppercase flex items-center gap-1 font-bold tracking-widest",children:[(0,b.jsx)(r.DollarSign,{className:"h-3 w-3"})," Ledger Value"]}),(0,b.jsxs)("div",{className:"text-sm font-black text-cyan-400",children:["¥",a.totalPrice.toLocaleString()]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white/5 md:w-56 p-6 flex md:flex-col gap-3 justify-center items-center border-t md:border-t-0 md:border-l border-white/5",children:[c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{variant:"ghost",className:"w-full text-xs font-bold text-gray-400 hover:text-white border border-white/5 hover:border-white/20",disabled:g,onClick:()=>{N(a),P(a.date),R(a.startTime),T(a.durationHours.toString()),L(!0)},children:[g&&M?.id===a.id?(0,b.jsx)(q.Loader2,{className:"h-3 w-3 animate-spin mr-2"}):(0,b.jsx)(n.RefreshCw,{className:"h-3 w-3 mr-2"}),"MODIFY"]}),(0,b.jsxs)(e.Button,{variant:"ghost",className:"w-full text-xs font-bold text-red-500 hover:bg-red-500/10 border border-red-500/10 hover:border-red-500/30",disabled:g,onClick:()=>W(a.id),children:[g&&null===M?(0,b.jsx)(q.Loader2,{className:"h-3 w-3 animate-spin"}):(0,b.jsx)(p,{className:"h-3 w-3 mr-2"}),"CANCEL"]})]}):(0,b.jsx)("div",{className:"text-[9px] text-gray-600 italic font-mono mb-2 uppercase",children:"LOCKED // RECORD_ONLY"}),"paid"===a.paymentStatus?(0,b.jsxs)(e.Button,{variant:"ghost",className:"w-full text-xs font-bold text-cyan-400 hover:bg-cyan-500/10 border border-cyan-500/10 hover:border-cyan-500/30",onClick:()=>J(a),children:[(0,b.jsx)(u,{className:"h-3 w-3 mr-2"})," RECEIPT"]}):(0,b.jsx)("div",{className:"text-[10px] text-orange-500 font-mono font-bold uppercase py-2 px-4 border border-orange-500/20 bg-orange-500/5 rounded text-center w-full",children:"UNPAID // 支払い待ち"})]})]})},a.id)})}),(0,b.jsx)("section",{className:"bg-white/5 p-8 rounded-3xl border border-white/5 backdrop-blur-3xl shadow-2xl",children:(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"p-3 bg-cyan-500/10 rounded-2xl border border-cyan-500/30",children:(0,b.jsx)(m.AlertCircle,{className:"h-6 w-6 text-cyan-400"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h4",{className:"text-lg font-black text-white uppercase italic",children:"Security & Policy Log"}),(0,b.jsx)("p",{className:"text-gray-500 text-xs leading-relaxed font-mono uppercase tracking-tighter",children:"SYS_POLICY: Cancellation window is 24 hours prior to initiation. Unauthorized absences may result in restricted access or financial penalties. Ledger records are permanently archived."})]})]})}),(0,b.jsx)(E.Dialog,{open:K,onOpenChange:L,children:(0,b.jsxs)(E.DialogContent,{className:"bg-slate-950 border border-white/10 text-white shadow-[0_0_50px_rgba(6,182,212,0.1)]",children:[(0,b.jsxs)(E.DialogHeader,{children:[(0,b.jsx)(E.DialogTitle,{className:"text-2xl font-black italic uppercase tracking-tighter",children:"Modify Session Details"}),(0,b.jsxs)(E.DialogDescription,{className:"text-gray-500 uppercase text-[10px] font-mono",children:["Update your reservation for ",M?.studioName]})]}),(0,b.jsxs)("div",{className:"grid gap-6 py-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:"New Date"}),(0,b.jsx)(h.Input,{type:"date",className:"bg-white/5 border-white/10 text-white focus:border-cyan-500 transition-colors",value:O,onChange:a=>P(a.target.value)})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:"Start Time"}),(0,b.jsx)(h.Input,{type:"time",className:"bg-white/5 border-white/10 text-white focus:border-cyan-500 transition-colors",value:Q,onChange:a=>R(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:"Duration (h)"}),(0,b.jsxs)(i.Select,{value:S,onValueChange:T,children:[(0,b.jsx)(i.SelectTrigger,{className:"bg-white/5 border-white/10 text-white focus:border-cyan-500",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsx)(i.SelectContent,{className:"bg-slate-900 border-white/10 text-white",children:[1,2,3,4,5,6,8,10,12].map(a=>(0,b.jsxs)(i.SelectItem,{value:a.toString(),children:[a,"時間"]},a))})]})]})]}),(0,b.jsx)("div",{className:"bg-cyan-500/5 p-4 rounded-xl border border-cyan-500/20",children:(0,b.jsx)("p",{className:"text-[10px] text-cyan-400 font-bold uppercase tracking-widest leading-relaxed",children:"※ 変更により料金が変動する場合があります。また、空き状況によっては変更できないことがございます。"})})]}),(0,b.jsxs)(E.DialogFooter,{className:"gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",className:"text-xs text-gray-500 hover:text-white",onClick:()=>L(!1),children:"CANCEL Changes"}),(0,b.jsxs)(e.Button,{className:"bg-cyan-500 hover:bg-cyan-400 text-black font-black uppercase italic",onClick:X,children:[(0,b.jsx)(v.Save,{className:"h-4 w-4 mr-2"})," Commit modification"]})]})]})}),(0,b.jsx)(E.Dialog,{open:!!I,onOpenChange:a=>!a&&J(null),children:(0,b.jsxs)(E.DialogContent,{className:"bg-white text-black p-0 overflow-hidden max-w-lg border-none shadow-2xl",children:[(0,b.jsxs)("div",{className:"p-10 space-y-8 print:p-0",id:"receipt-content",children:[(0,b.jsxs)(E.DialogHeader,{className:"flex flex-row justify-between items-start border-b-4 border-black pb-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h2",{className:"text-4xl font-black italic uppercase tracking-tighter",children:"領収書"}),(0,b.jsx)("p",{className:"text-[10px] font-mono uppercase text-gray-500",children:"決済記録 // Studi-Go"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-[10px] font-mono font-bold uppercase text-gray-400",children:"発行日"}),(0,b.jsx)("div",{className:"text-sm font-black",children:(0,A.format)(new Date,"yyyy年MM月dd日")})]})]}),I&&(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-[10px] font-mono uppercase text-gray-500",children:"サービス提供者"}),(0,b.jsx)("p",{className:"text-xl font-bold uppercase",children:I.studioName}),I.invoiceNumber&&(0,b.jsx)("div",{className:"bg-gray-100 px-2 py-1 rounded inline-block",children:(0,b.jsxs)("p",{className:"text-[9px] font-bold text-gray-600",children:["適格事業者番号: ",I.invoiceNumber]})})]}),(0,b.jsxs)("div",{className:"text-right space-y-1",children:[(0,b.jsx)("p",{className:"text-[10px] font-mono uppercase text-gray-500",children:"取引ID"}),(0,b.jsxs)("p",{className:"text-xs font-mono font-bold",children:["#",I.id.toUpperCase()]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100",children:[(0,b.jsx)("h3",{className:"text-[10px] font-mono uppercase text-gray-500 mb-4 border-b pb-2",children:"ご利用明細"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm font-bold",children:[(0,b.jsxs)("span",{children:["スタジオ利用料 (",I.durationHours,"時間)"]}),(0,b.jsxs)("span",{children:["¥",I.totalPrice.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"text-[11px] text-gray-500 font-mono",children:["部屋: ",I.roomName," / 日時: ",I.date," ",I.startTime,"~"]})]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-end border-t border-black pt-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"text-[10px] font-mono uppercase text-gray-500 text-left",children:"ステータス"}),(0,b.jsx)(f.Badge,{variant:"outline",className:"bg-black text-white border-none font-black text-[10px] px-3",children:"paid"===I.paymentStatus?"入金済み":"確定済み"})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-[10px] font-mono uppercase text-gray-500",children:"合計金額 (税込)"}),(0,b.jsxs)("p",{className:"text-5xl font-black italic tracking-tighter leading-none",children:["¥",I.totalPrice.toLocaleString()]})]})]})]}),(0,b.jsxs)("footer",{className:"text-[8px] font-mono uppercase text-gray-400 text-center leading-normal pt-10 border-t border-gray-100 mt-10",children:["本領収書はStudi-Goのデータベースに記録された決済情報を元に作成されています。",(0,b.jsx)("br",{}),"税務上の詳細については、各スタジオまたは運営者までお問い合わせください。"]})]}),(0,b.jsxs)("div",{className:"bg-gray-100 p-4 flex gap-3 justify-end print:hidden",children:[(0,b.jsx)(e.Button,{variant:"outline",className:"border-gray-300 text-gray-600 hover:text-black font-bold h-10",onClick:()=>J(null),children:"閉じる"}),(0,b.jsxs)(e.Button,{className:"bg-black text-white hover:bg-gray-800 font-black h-10 px-6 group",onClick:()=>{window.print()},children:[(0,b.jsx)(t,{className:"h-4 w-4 mr-2 group-hover:scale-110 transition-transform"})," 印刷 / PDF保存"]})]})]})})]})}a.s(["UserBookings",()=>F],24411)}];

//# sourceMappingURL=music-studio-app_src_components_UserBookings_tsx_f687fde2._.js.map