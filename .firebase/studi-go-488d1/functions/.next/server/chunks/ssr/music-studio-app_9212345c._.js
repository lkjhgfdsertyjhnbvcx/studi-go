module.exports=[50718,(a,b,c)=>{"use strict";b.exports=a.r(62144).vendored["react-ssr"].ReactDOM},73992,a=>{"use strict";var b=a.i(15334),c=a.i(94146);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tfoot",{"data-slot":"table-footer",className:(0,c.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",a),...d})}function h({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function i({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function j({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function k({className:a,...d}){return(0,b.jsx)("caption",{"data-slot":"table-caption",className:(0,c.cn)("text-muted-foreground mt-4 text-sm",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCaption",()=>k,"TableCell",()=>j,"TableFooter",()=>g,"TableHead",()=>i,"TableHeader",()=>e,"TableRow",()=>h])},50507,a=>{"use strict";let b=(0,a.i(13035).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],50507)},4507,a=>{"use strict";let b=(0,a.i(13035).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],4507)},92166,a=>{"use strict";let b=(0,a.i(13035).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],92166)},19726,a=>{"use strict";let b=(0,a.i(13035).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],19726)},50048,a=>{"use strict";let b=(0,a.i(13035).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],50048)},4715,a=>{"use strict";var b=a.i(15334),c=a.i(94146);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},86176,a=>{"use strict";var b=a.i(15334),c=a.i(97110),d=a.i(23286),e=a.i(94146);let f=(0,d.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},56162,a=>{"use strict";let b=(0,a.i(13035).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],56162)},5089,a=>{"use strict";let b=(0,a.i(13035).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);a.s(["Mail",()=>b],5089)},53374,a=>{"use strict";var b=a.i(15334),c=a.i(66757),d=a.i(4715),e=a.i(10425),f=a.i(97438),g=a.i(73992),h=a.i(86176),i=a.i(56162),j=a.i(50507),k=a.i(4507),l=a.i(5089),m=a.i(50048),n=a.i(19726),o=a.i(13035);let p=(0,o.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),q=(0,o.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var r=a.i(92166),s=a.i(86378),t=a.i(10623);let u=(0,t.createServerReference)("60911b2ed54e7b03b6524a5fa565a747434aaa0d15",t.callServer,void 0,t.findSourceMapURL,"sendReminderEmail"),v=(0,t.createServerReference)("60d71a481981a003059e26521c79853bac1ade54b4",t.callServer,void 0,t.findSourceMapURL,"updatePaymentStatus");var w=a.i(90732);function x({initialPayments:a}){let o=(0,w.useRouter)(),[t,x]=(0,c.useState)(a),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)("all"),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(null);(0,c.useEffect)(()=>{x(a)},[a]);let I=async a=>{if(confirm("入金済み（消し込み）として処理しますか？")){z(!0),B(!1),H(a);try{let b=await v(a,"paid");b.success?(B(!0),await new Promise(a=>setTimeout(a,1500)),o.refresh()):alert(`エラー: ${b.message}`)}catch(a){alert(`接続エラー: ${a.message}`)}finally{H(null),z(!1),B(!1)}}},J=async a=>{if(confirm(`${a.userEmail} に催促メールを送信しますか？`)){H(a.id);try{(await u(a.id,a.userEmail)).success&&alert("催促メールを送信しました")}catch(a){console.error(a)}finally{H(null)}}},K=t.filter(a=>{let b="all"===C||"pending"===C&&"pending"===a.status||"paid"===C&&"paid"===a.status||"failed"===C&&"failed"===a.status,c=""===E||a.studioName.toLowerCase().includes(E.toLowerCase())||a.userName.toLowerCase().includes(E.toLowerCase())||a.userEmail.toLowerCase().includes(E.toLowerCase())||a.bookingId.toLowerCase().includes(E.toLowerCase());return b&&c}),L=t.filter(a=>"paid"===a.status).reduce((a,b)=>a+b.amount,0),M=t.filter(a=>"pending"===a.status).reduce((a,b)=>a+b.amount,0),N=t.filter(a=>"pending"===a.status).length;return(0,b.jsxs)("div",{className:"min-h-screen bg-black text-white p-6 md:p-12 font-sans relative",children:[y&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-xl flex flex-col items-center justify-center transition-all duration-500",children:A?(0,b.jsxs)("div",{className:"flex flex-col items-center animate-in zoom-in duration-300",children:[(0,b.jsx)("div",{className:"h-20 w-20 rounded-full bg-green-500/20 flex items-center justify-center mb-6",children:(0,b.jsx)(r.CheckCircle2,{className:"h-12 w-12 text-green-400"})}),(0,b.jsx)("div",{className:"text-3xl font-black text-green-400 tracking-widest uppercase",children:"Payment Reconciled"}),(0,b.jsx)("div",{className:"text-gray-400 text-sm mt-3 uppercase font-mono tracking-tighter",children:"Transaction Permanently Stored // Refreshing..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"h-16 w-16 text-cyan-400 animate-spin mb-6"}),(0,b.jsx)("div",{className:"text-2xl font-black text-cyan-400 animate-pulse tracking-widest uppercase",children:"Processing Reconciliation..."}),(0,b.jsx)("div",{className:"text-gray-500 text-sm mt-3 uppercase font-mono tracking-tighter",children:"Updating Secure Ledger // Synchronizing Data"})]})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,b.jsxs)("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 border-b border-white/10 pb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent",children:"決済管理パネル"}),(0,b.jsx)("p",{className:"text-gray-400 mt-1",children:"入金状況の確認、手動消し込み、および未入金者への督促"})]}),(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",className:"text-gray-500 hover:text-cyan-400 flex items-center gap-2",onClick:()=>o.refresh(),children:[(0,b.jsx)(m.Loader2,{className:"h-3 w-3"}),"手動リフレッシュ"]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,b.jsxs)(d.Card,{className:"bg-slate-900 border-white/10 shadow-xl shadow-cyan-500/5",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"総売上 (確定済)"}),(0,b.jsx)(i.DollarSign,{className:"h-4 w-4 text-green-400"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-black text-white",children:["¥",L.toLocaleString()]}),(0,b.jsx)("div",{className:"h-1 w-full bg-white/5 rounded-full mt-4 overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-green-500",style:{width:"100%"}})})]})]}),(0,b.jsxs)(d.Card,{className:"bg-slate-900 border-white/10 shadow-xl shadow-orange-500/5",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"売掛金 (未入金)"}),(0,b.jsx)(k.AlertCircle,{className:"h-4 w-4 text-orange-400"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-black text-orange-400",children:["¥",M.toLocaleString()]}),(0,b.jsxs)("p",{className:"text-xs text-orange-400/50 mt-2 font-mono",children:[N," 件の未完了トランザクション"]})]})]}),(0,b.jsxs)(d.Card,{className:"bg-slate-900 border-white/10 shadow-xl",children:[(0,b.jsxs)(d.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(d.CardTitle,{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"入金完了率"}),(0,b.jsx)(j.CheckCircle,{className:"h-4 w-4 text-cyan-400"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"text-3xl font-black text-white",children:[t.length>0?Math.round(t.filter(a=>"paid"===a.status).length/t.length*100):0,"%"]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["全 ",t.length," トランザクション中"]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative group",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 group-focus-within:text-cyan-400 transition-colors"}),(0,b.jsx)(f.Input,{placeholder:"ユーザー名、メール、予約番号で検索...",className:"pl-10 bg-slate-900 border-white/10 focus:border-cyan-500/50 transition-all text-white placeholder:text-gray-600",value:E,onChange:a=>F(a.target.value)})]}),(0,b.jsxs)(s.Select,{value:C,onValueChange:D,children:[(0,b.jsxs)(s.SelectTrigger,{className:"w-full md:w-[200px] bg-slate-900 border-white/10 text-white",children:[(0,b.jsx)(p,{className:"h-4 w-4 mr-2 opacity-50"}),(0,b.jsx)(s.SelectValue,{placeholder:"絞り込み"})]}),(0,b.jsxs)(s.SelectContent,{className:"bg-slate-800 border-white/10 text-white",children:[(0,b.jsx)(s.SelectItem,{value:"all",children:"すべてのステータス"}),(0,b.jsx)(s.SelectItem,{value:"paid",children:"入金済み"}),(0,b.jsx)(s.SelectItem,{value:"pending",children:"未入金"}),(0,b.jsx)(s.SelectItem,{value:"failed",children:"支払い失敗"})]})]})]}),(0,b.jsx)("div",{className:"rounded-xl border border-white/10 bg-slate-900/50 backdrop-blur-sm overflow-hidden",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{className:"bg-white/5",children:(0,b.jsxs)(g.TableRow,{className:"border-white/10",children:[(0,b.jsx)(g.TableHead,{className:"py-4 text-gray-400 font-bold uppercase text-[10px]",children:"顧客情報"}),(0,b.jsx)(g.TableHead,{className:"py-4 text-gray-400 font-bold uppercase text-[10px]",children:"金額"}),(0,b.jsx)(g.TableHead,{className:"py-4 text-gray-400 font-bold uppercase text-[10px]",children:"支払い方法"}),(0,b.jsx)(g.TableHead,{className:"py-4 text-gray-400 font-bold uppercase text-[10px]",children:"ステータス"}),(0,b.jsx)(g.TableHead,{className:"py-4 text-gray-400 font-bold uppercase text-[10px]",children:"日付 / 期限"}),(0,b.jsx)(g.TableHead,{className:"py-4 text-gray-400 font-bold uppercase text-[10px] text-right",children:"アクション"})]})}),(0,b.jsx)(g.TableBody,{children:0===K.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:6,className:"text-center py-20 text-gray-600 italic",children:"決済データが見当りません"})}):K.map(a=>(0,b.jsxs)(g.TableRow,{className:"border-white/5 hover:bg-white/5 transition-colors",children:[(0,b.jsxs)(g.TableCell,{children:[(0,b.jsx)("div",{className:"font-bold text-white mb-0.5",children:a.userName}),(0,b.jsx)("div",{className:"text-xs text-gray-500 font-mono",children:a.userEmail}),a.userPhone&&(0,b.jsxs)("div",{className:"text-[10px] text-gray-600 mt-1 flex items-center gap-1",children:[(0,b.jsx)(q,{className:"h-2 w-2"})," ",a.userPhone]})]}),(0,b.jsxs)(g.TableCell,{className:"font-mono text-lg font-bold text-white",children:["¥",a.amount.toLocaleString()]}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"outline",className:"bg-black/50 border-white/10 text-[10px] text-gray-400 py-0 uppercase",children:a.paymentMethod.replace("_"," ")})}),(0,b.jsx)(g.TableCell,{children:"paid"===a.status?(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-green-400 text-xs font-bold",children:[(0,b.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-green-400"}),"入金済み"]}):"pending"===a.status?(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-orange-400 text-xs font-bold",children:[(0,b.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-orange-400"}),"未入金"]}):(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-red-500 text-xs font-bold",children:[(0,b.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500"}),"失敗"]})}),(0,b.jsxs)(g.TableCell,{children:[(0,b.jsx)("div",{className:"text-xs text-white",children:a.date}),"pending"===a.status&&(0,b.jsxs)("div",{className:"text-[10px] text-red-400/70 mt-1",children:["期限: ",a.dueDate]})]}),(0,b.jsx)(g.TableCell,{className:"text-right",children:(0,b.jsx)("div",{className:"flex justify-end gap-2",children:"pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(e.Button,{size:"sm",className:"bg-cyan-600 hover:bg-cyan-500 text-white font-bold text-xs shadow-lg shadow-cyan-900/20",onClick:()=>I(a.id),disabled:G===a.id,children:[(0,b.jsx)(r.CheckCircle2,{className:"h-3 w-3 mr-1"})," 消し込み"]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)(e.Button,{size:"sm",variant:"outline",className:"border-white/10 text-gray-400 hover:text-white h-7 px-2 text-[10px]",onClick:()=>J(a),disabled:G===a.id,children:[(0,b.jsx)(l.Mail,{className:"h-3 w-3 mr-1"})," メール"]}),(0,b.jsxs)(e.Button,{size:"sm",variant:"outline",className:"border-white/10 text-gray-400 hover:text-white h-7 px-2 text-[10px]",onClick:()=>{a.userPhone?window.location.href=`tel:${a.userPhone}`:alert(`電話番号が不明です。直接連絡してください。
ユーザー名: ${a.userName}`)},children:[(0,b.jsx)(q,{className:"h-3 w-3 mr-1"})," 電話"]})]})]})})})]},a.id))})]})})]})]})}a.s(["default",()=>x],53374)}];

//# sourceMappingURL=music-studio-app_9212345c._.js.map